{"version":3,"sources":["Components/Main/Floor/Floor.js","Components/Main/Text/aAttackGraffiti.ttf","Components/Main/Text/Text.js","Components/Api/authHelpers.js","Components/Api/SpotifyApi.js","Components/Store/searchSlice.js","Components/Store/playlistSlice.js","Components/Store/store.js","Components/Store/authSlice.js","Components/Store/fileSlice.js","Components/Store/loaderSlice.js","Components/Store/modeSlice.js","Components/Store/songsSlice.js","Components/Store/triggersSlice.js","Components/Main/Model/files/Intro/HangingIdle.fbx","Components/Main/Model/files/Intro/Fall.fbx","Components/Main/Model/files/Intro/Land.fbx","Components/Main/Model/files/Intro/Waving.fbx","Components/Main/Model/files/UserInput/Stunned.fbx","Components/Main/Model/files/UserInput/Getting Up.fbx","Components/Main/Model/files/Angry.fbx","Components/Main/Model/files/Typing.fbx","Components/Main/Model/files/Running/RunningRight.fbx","Components/Main/Model/files/Running/RunningLeft.fbx","Components/Main/Model/files/Idle/Happy Idle.fbx","Components/Main/Model/animations.js","Components/Main/Model/files/Idle/Breathing Idle.fbx","Components/Main/Model/files/Running/Scared.fbx","Components/Main/Model/files/Dancing/ArmSwing.fbx","Components/Main/Model/files/Dancing/HipHop5.fbx","Components/Main/Model/files/Dancing/Belly.fbx","Components/Main/Model/files/Dancing/Samba1.fbx","Components/Main/Model/files/Dancing/Samba5.fbx","Components/Main/Model/files/Dancing/Dance.fbx","Components/Main/Model/files/Dancing/House2.fbx","Components/Main/Model/files/Dancing/Gangnam Style.fbx","Components/Main/Model/files/Thriller/Moonwalk.fbx","Components/Main/Model/files/Thriller/Thriller Idle.fbx","Components/Main/Model/classes/danceManager.js","Components/Main/Model/classes/runningManager.js","Components/Main/Model/classes/positionManager.js","Components/Main/Model/classes/mouseManager.js","Components/Main/Model/classes/jointManager.js","Components/Main/Model/classes/chainManager.js","Components/Main/Model/files/Model/Model.fbx","Components/Main/Model/classes/animationManager.js","Components/Main/Model/classes/thrillerManager.js","Components/Main/Model/classes/modelClass.js","Components/Main/Model/Model.js","Components/Main/Model/hooks/useLoader.js","Components/Main/Model/hooks/useFalling.js","Components/Main/Model/hooks/useRunning.js","Components/Main/Model/hooks/useClick.js","Components/Main/Model/hooks/useTriggers.js","Components/Main/Effects/CustomBloom.js","Components/Main/Effects/Effects.js","Components/Main/NoEffects/NoEffects.js","Components/Main/Ring/Ring.js","Components/Main/Table/djglb.glb","Components/Main/Table/Table.js","Components/Main/Lighting/SpotLight/SpotLight.js","Components/Main/Lighting/Lighting.js","Components/Main/Rig/Rig.js","Components/Main/Main.js","Components/Main/Rig/useInteractions.js","Components/Loader/LoaderStyle.js","Components/Loader/Loader.js","colors.js","Components/Logout/LogoutStyle.js","Components/Logout/Logout.js","Components/WelcomeButtons/Login/Dots.js","Components/WelcomeButtons/Login/LoginStyle.js","Components/WelcomeButtons/WelcomeButtonsStyle.js","Components/WelcomeButtons/Login/Login.js","Components/WelcomeButtons/Login/useLogin.js","Components/WelcomeButtons/SelectSong/SelectSong.js","Components/WelcomeButtons/WelcomeButtons.js","Components/SelectedFilePlayer/AudioAnalysis/Shader.js","Components/SelectedFilePlayer/AudioAnalysis/shaders/vs.js","Components/SelectedFilePlayer/AudioAnalysis/shaders/fs.js","Components/SelectedFilePlayer/AudioAnalysis/AudioAnalysis.js","Components/SelectedFilePlayer/MoodButtons/danceIcon.png","Components/SelectedFilePlayer/MoodButtons/MoodButton/MootButtonStyle.js","Components/SelectedFilePlayer/MoodButtons/MoodButton/MoodButton.js","Components/SelectedFilePlayer/MoodButtons/MoodButtonsStyle.js","Components/SelectedFilePlayer/MoodButtons/MoodButtons.js","Components/SelectedFilePlayer/SelectedFilePlayer.js","Components/SpotifyComponents/Header/HeaderStyle.js","Components/SpotifyComponents/Header/Search/SearchStyle.js","Components/SpotifyComponents/Header/Search/Search.js","Components/SpotifyComponents/Header/SpotifyLogo/SpotifyLogoStyle.js","Components/SpotifyComponents/Header/SpotifyLogo/spotifyLogo.png","Components/SpotifyComponents/Header/SpotifyLogo/SpotifyLogo.js","Components/SpotifyComponents/Header/Header.js","Components/SpotifyComponents/TrackResult/TrackResultStyle.js","Components/SpotifyComponents/TrackResult/TrackResult.js","Components/SpotifyComponents/InfiniteLoader/InfiniteLoaderStyle.js","Components/SpotifyComponents/InfiniteLoader/useHeight.js","Components/SpotifyComponents/InfiniteLoader/InnerElement.js","Components/SpotifyComponents/PlaylistTracks/PlaylistTracks.js","Components/SpotifyComponents/SearchTracks/SearchTracks.js","Components/SpotifyComponents/SidePanel/Playlist/PlaylistStyle.js","Components/SpotifyComponents/SidePanel/Playlist/Playlist.js","Components/SpotifyComponents/SidePanel/SidePanelStyle.js","Components/SpotifyComponents/SidePanel/SidePanel.js","Components/SpotifyComponents/Player/PlayerStyles.js","Components/SpotifyComponents/Player/Player.js","Components/SpotifyComponents/SpotifyComponents.js","AppStyle.js","App.js","Components/AuthIntercept/AuthIntercept.js","Components/DeviceDetect/Error.js","Components/DeviceDetect/DeviceDetect.js","index.js"],"names":["Floor","rotation","Math","PI","position","receiveShadow","args","color","Logo","Text","font","fontSize","letterSpacing","outlineColor","outlineBlur","outlineWidth","strokeColor","strokeWidth","makeid","length","result","characters","i","char","charAt","floor","random","push","join","sha256","plain","data","TextEncoder","encode","window","crypto","subtle","digest","base64urlencode","a","btoa","String","fromCharCode","apply","Uint8Array","replace","pkce_challenge_from_verifier","v","hashed","codeVerifierLocal","stateLocal","buildParams","parameters","params","Object","keys","param","value","popupWindow","url","windowName","win","w","h","y","top","outerHeight","screenY","x","outerWidth","screenX","open","spotifyApi","SpotifyWebApi","userId","refreshAccessToken","refreshToken","getRefreshToken","URLSearchParams","append","process","axios","post","headers","then","res","access_token","expires_in","refresh_token","localStorage","setItem","adjustedExpiry","Date","now","setRefreshToken","setAccessToken","setTimeout","console","log","catch","err","useStore","getState","logout","preFlightCheck","accessToken","expiry","getItem","login","getAccessToken","get","Authorization","id","setAccessRequired","checkAuthentication","loginRedirect","min","max","ceil","codeChallenge","response_type","client_id","redirect_uri","scope","state","code_challenge","code_challenge_method","authURL","popup","requestTokens","payload","code","error","formatDuration","duration","seconds","round","minutes","toString","padStart","formatTracks","tracks","playlist","map","track","albumImage","album","images","reduce","smallest","image","height","artist","artists","name","title","albumUrl","duration_ms","getTracks","query","offset","searchTracks","body","items","getMyPlaylist","getMySavedTracks","getPlaylist","getPlaylists","getUserPlaylists","limit","clearTracksId","queryId","onCloseSearch","set","searchTracksOpen","clearSearchText","searchFinised","searchQuery","searchOffset","inProgress","clearPlaylistId","buildPlaylist","list","song","slice","onClosePlaylist","selectedPlaylist","playlistTracksOpen","playlistRequestsFinised","playlistRequestsOffset","playlistRequestsInProgress","playlistTracks","create","loggedIn","accessRequired","interfaceOpen","lightsOn","removeItem","authSlice","file","setFile","fileSlice","isPreLoaded","setPreLoaded","isLoaded","setLoaded","loaderSlice","mode","setMode","modeSlice","onSelectPlayList","setPlaylistSong","newPlaylist","songs","isPlaying","playlistRequestsLoadNextPage","playlistSlice","searchInProgress","sendSearchRequest","setSearchSong","searchLoadNextPage","searchSlice","onInterfaceOpen","running","setRunning","direction","setLightsOn","click","onClick","setIsPlaying","status","mood","setMood","triggersSlice","animations","hangingIdle","HangingIdle","blockUser","falling","Falling","blockAll","land","Land","once","waving","Waving","typing","Typing","angry","Angry","stunned","Stunned","gettingUp","GettingUp","idle","happyIdle","HappyIdle","runRight","RunRight","scared","runLeft","RunLeft","ArmSwing","HipHop5","Belly","Samba1","Samba5","Dance","House2","Gangnam","moonwalk","thrillerIdle","runLeftStack","runScared","gangnam","allDanceLow","danceLowStack","allDanceMed","danceMedStack","allDanceHigh","danceHighStack","loops","Can","Chicken","HipHop12","Maraschino","Bboy1","Bboy2","Breakdance2","Jazz2","Jazz3","Rumba","Salsa2","Swing2","thriller","DanceManger","model","this","stacks","count","lists","isDancing","downloading","active","stack","currentAction","nextDance","pop","unshift","randomMove","allMoves","actions","animationManager","popStack","getRandomMove","worker","postMessage","type","animation","loop","loadAnimation","addToStack","RunningManger","next","positionManager","runningDirection","updateDirection","PositionManager","posController","vel","pos","requestedDirection","isFalling","incr","incrVel","updateY","stopFalling","updateX","stopRunning","setPos","WaveManager","mouseX","mouseY","waveStatus","side","time","waveAllowed","newSide","getSide","newTime","JointManager","getJointAngle","neck","waist","fadeJointsRequired","c","isBone","joint","angle","mouseManager","yPos","xPos","moveJoint","targetX","targetY","prevAction","ChainManager","startFalling","started","updateFade","fadeSpeed","isPlayingCheck","setState","setChain","setDirection","runningManager","setScared","resetThriller","thrillerManager","jointManager","chain","blockingActions","action","shift","chainName","isUserAction","getBlockingActions","cb","AnimationManager","mixer","clipAction","LoopOnce","clampWhenFinished","repetitions","_clip","splice","play","loadFile","anim","loader","load","fbx","eventFinished","e","runNextAnimation","removeEventListener","reset","chainManager","animationRouter","fade","addEventListener","FBXLoader","init","Model","scale","setScalar","traverse","isMesh","castShadow","__r3f","handlers","setJoint","AnimationMixer","danceManager","dance","run","move","crossFadeFrom","checkIfFadeRequired","ThrillerManager","index","downloadIndex","paused","downloadNextMove","nextMove","getNextMove","Worker","DanceManager","RunningManager","MouseManager","workerInit","onmessage","AnimationClip","parse","onWorkerMessage","moveJoints","fadeJoints","wave","fall","memo","modelRef","useState","setFbx","useEffect","setPosController","current","useFrame","update","useLoader","useFalling","useClick","isLoadedRef","useRef","menuOpen","useTriggers","ref","object","UnrealBloomPass","resolution","strength","radius","threshold","undefined","Vector2","clearColor","Color","pars","minFilter","LinearFilter","magFilter","format","RGBAFormat","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","resy","renderTargetBright","WebGLRenderTarget","texture","generateMipmaps","renderTargetHorizonal","renderTargetVertical","LuminosityHighPassShader","highPassShader","highPassUniforms","UniformsUtils","clone","uniforms","materialHighPassFilter","ShaderMaterial","vertexShader","fragmentShader","defines","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","needsUpdate","bloomTintColors","Vector3","CopyShader","copyShader","copyUniforms","materialCopy","blending","AdditiveBlending","depthTest","depthWrite","transparent","enabled","needsSwap","_oldClearColor","oldClearAlpha","basic","MeshBasicMaterial","fsQuad","FullScreenQuad","dispose","width","setSize","renderer","writeBuffer","readBuffer","deltaTime","maskActive","getClearColor","getClearAlpha","oldAutoClear","autoClear","setClearColor","buffers","stencil","setTest","renderToScreen","material","setRenderTarget","clear","render","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius","KERNEL_RADIUS","SIGMA","colorTexture","texSize","NUM_MIPS","blurTexture1","blurTexture2","blurTexture3","blurTexture4","blurTexture5","dirtTexture","bloomStrength","bloomFactors","bloomRadius","Pass","Effects","children","bloomRef","composer","useThree","gl","size","camera","scene","setScene","bloom","attachArray","NoEffects","clearDepth","Ring","extend","EffectComposer","RenderPass","Table","group","nodes","useGLTF","djglb","geometry","mesh_0","preload","vec","SpotLight","React","depthBuffer","distance","attenuation","anglePower","props","mesh","dpr","viewport","SpotLightMaterial","spotPosition","copy","getWorldPosition","lookAt","parent","target","geom","CylinderGeometry","applyMatrix4","Matrix4","makeTranslation","makeRotationX","_extends","attach","near","far","Lighting","lightRef","setAngle","intensity","penumbra","Rig","mouse","setMouse","Main","className","fov","shadows","spin","keyframes","Container","styled","div","Circle","Border1","Border2","Loader","useProgress","progress","colors","StyledLogoutIcon","LogoutIcon","Logout","IconButton","Dots","dots","setDots","t","clearTimeout","Status","AccessRequired","WelcomeButtonsContainer","Button","Or","Input","input","Login","setInProgress","setError","initiateSpotifyLogin","onResponse","success","spotifyCallback","close","useLogin","SelectSong","inputRef","accept","onChange","files","URL","createObjectURL","WelcomeButtons","Shader","analyzer","shader","useMemo","Array","fill","getFrequencyData","uniform","leftCounter","rightCounter","clock","elapsedTime","audioLoader","AudioLoader","listener","AudioListener","audio","Audio","AudioAnalysis","sound","add","AudioAnalyser","stop","buffer","setBuffer","setLoop","setVolume","StyledMoodButton","selected","MoodButton","ButtonsContainer","StyledIcon","img","moods","MoodButtons","setOpen","storeMood","onHover","useCallback","onHoverOff","onPointerEnter","onPointerLeave","Tooltip","placement","src","icon","SelectedFilePlayer","HeaderContainer","SearchBarContainer","StyledSearchIcon","SearchIcon","StyledCancelIcon","ClearIcon","Search","searchText","setSearchText","requestSearch","debounce","cancel","onSearchTextChange","placeholder","autoComplete","SpotifyLogo","newWindow","opener","alt","Header","TrackResultContainer","Image","TextContainer","TrackTitle","Artist","Duration","TrackResult","selectSong","StyledOuter","StyledOuterTop","StyledOuterLeft","StyledInner","useHeight","setHeight","updateHeight","innerHeight","InnerElement","OuterElement","forwardRef","style","onScroll","Row","item","key","areEqual","PlaylistTracks","hasNextPage","loadMoreItems","isItemLoaded","itemCount","onItemsRendered","itemSize","outerElementType","innerElementType","itemData","SearchTracks","PlaylistContainer","Playlist","SidePanelContainer","likedSongs","SidePanel","playlists","setPlaylists","PlayerContainer","styles","bgColor","sliderTrackColor","sliderColor","sliderHandleColor","trackNameColor","trackArtistColor","Player","prevTrack","setPlay","updateMood","songName","toLowerCase","includes","getAudioFeaturesForTrack","danceability","energy","playerCB","token","callback","showSaveIcon","syncExternalDevice","uris","SpotifyComponents","Background","show","App","onMouseMove","clientX","innerWidth","clientY","useMouseInteraction","onPointerMove","fallback","AuthIntercept","pass","setPass","urlParams","location","search","ErrorContainer","Error","DeviceDetect","isBrowser","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.48664c77.chunk.js","sourcesContent":["export default function Floor() {\r\n  return (\r\n    <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -20, 0]} receiveShadow>\r\n      <circleBufferGeometry args={[75, 32]} />\r\n      <meshStandardMaterial color=\"rgb(0, 67, 78)\" />\r\n    </mesh>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/aAttackGraffiti.761d6a56.ttf\";","import { Text } from \"@react-three/drei\";\r\nimport font from \"./aAttackGraffiti.ttf\";\r\n\r\nexport default function Logo() {\r\n  return (\r\n    <Text\r\n      font={font}\r\n      fontSize={7}\r\n      color=\"lime\"\r\n      position={[0, 15, -20]}\r\n      letterSpacing={0.3}\r\n      outlineColor={\"darkgreen\"}\r\n      outlineBlur={0.5}\r\n      outlineWidth={0.1}\r\n      strokeColor=\"green\"\r\n      strokeWidth={0.21}\r\n    >\r\n      Grootify\r\n    </Text>\r\n  );\r\n}\r\n","export const makeid = (length) => {\r\n  const result = [];\r\n  const characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  for (let i = 0; i < length; i++) {\r\n    const char = characters.charAt(\r\n      Math.floor(Math.random() * characters.length)\r\n    );\r\n    result.push(char);\r\n  }\r\n  return result.join(\"\");\r\n};\r\nfunction sha256(plain) {\r\n  const encoder = new TextEncoder();\r\n  const data = encoder.encode(plain);\r\n  return window.crypto.subtle.digest(\"SHA-256\", data);\r\n}\r\n\r\nfunction base64urlencode(a) {\r\n  return btoa(String.fromCharCode.apply(null, new Uint8Array(a)))\r\n    .replace(/\\+/g, \"-\")\r\n    .replace(/\\//g, \"_\")\r\n    .replace(/=+$/, \"\");\r\n}\r\n\r\nexport async function pkce_challenge_from_verifier(v) {\r\n  const hashed = await sha256(v);\r\n  return base64urlencode(hashed);\r\n}\r\n\r\n// helper function to generate a random number\r\nexport const getRandomInt = (min, max) => {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n};\r\nexport const buildParams = (parameters) => {\r\n  const result = [];\r\n  const params = Object.keys(parameters);\r\n  for (let i = 0; i < params.length; i++) {\r\n    const param = params[i];\r\n    const value = parameters[param];\r\n    if (i > 0) result.push(\"&\");\r\n    result.push(param, \"=\", value);\r\n  }\r\n  return result.join(\"\");\r\n};\r\nexport const popupWindow = (url, windowName, win, w, h) => {\r\n  const y = win.top.outerHeight / 2 + win.top.screenY - h / 2;\r\n  const x = win.top.outerWidth / 2 + win.top.screenX - w / 2;\r\n  return win.open(\r\n    url,\r\n    windowName,\r\n    `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${y}, left=${x}`\r\n  );\r\n};\r\n","import SpotifyWebApi from \"spotify-web-api-node\";\r\nimport axios from \"axios\";\r\nimport {\r\n  makeid,\r\n  getRandomInt,\r\n  pkce_challenge_from_verifier,\r\n  buildParams,\r\n  popupWindow,\r\n} from \"./authHelpers\";\r\nimport { useStore } from \"../Store/store\";\r\n\r\nexport const spotifyApi = new SpotifyWebApi();\r\nlet userId = null;\r\n\r\nspotifyApi.refreshAccessToken = () => {\r\n  const refreshToken = spotifyApi.getRefreshToken();\r\n  const params = new URLSearchParams();\r\n\r\n  params.append(\"client_id\", process.env.REACT_APP_SPOTIFY_CLIENT_ID);\r\n  params.append(\"grant_type\", \"refresh_token\");\r\n  params.append(\"refresh_token\", refreshToken);\r\n\r\n  return axios\r\n    .post(\"https://accounts.spotify.com/api/token\", params, {\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded;\",\r\n      },\r\n    })\r\n    .then((res) => {\r\n      const { access_token, expires_in, refresh_token } = res.data;\r\n      localStorage.setItem(\"sp-accessToken\", access_token);\r\n      localStorage.setItem(\"sp-refreshToken\", refresh_token);\r\n      const adjustedExpiry = (expires_in - 60) * 1000;\r\n      localStorage.setItem(\"sp-expiry\", Date.now() + adjustedExpiry);\r\n      spotifyApi.setRefreshToken(refresh_token);\r\n      spotifyApi.setAccessToken(access_token);\r\n      setTimeout(() => {\r\n        spotifyApi.refreshAccessToken();\r\n      }, adjustedExpiry);\r\n      console.log(\"accessTokenRefreshed\");\r\n      return true;\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"Could not refresh access token\", err);\r\n      useStore.getState().logout();\r\n      return false;\r\n    });\r\n};\r\n\r\nspotifyApi.preFlightCheck = async (accessToken) => {\r\n  const expiry = localStorage.getItem(\"sp-expiry\");\r\n  if (Date.now() > expiry) {\r\n    //try to refresh token\r\n    return await spotifyApi.refreshAccessToken();\r\n  } else {\r\n    setTimeout(() => {\r\n      spotifyApi.refreshAccessToken();\r\n    }, +expiry - Date.now());\r\n  }\r\n  spotifyApi.setAccessToken(accessToken);\r\n  return \"accessTokenValid\";\r\n};\r\n\r\nspotifyApi.login = async () => {\r\n  const accessToken = spotifyApi.getAccessToken();\r\n\r\n  return axios\r\n    .get(\"https://api.spotify.com/v1/me\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${accessToken}`,\r\n      },\r\n    })\r\n    .then((res) => {\r\n      userId = res.data.id;\r\n      return true;\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"Could not access profile data\", err);\r\n      useStore.getState().setAccessRequired();\r\n      useStore.getState().logout();\r\n      return false;\r\n    });\r\n};\r\n\r\nspotifyApi.checkAuthentication = async () => {\r\n  const accessToken = localStorage.getItem(\"sp-accessToken\");\r\n  const refreshToken = localStorage.getItem(\"sp-refreshToken\");\r\n\r\n  if (!accessToken || !refreshToken) return false;\r\n\r\n  spotifyApi.setRefreshToken(refreshToken);\r\n  const preFlight = await spotifyApi.preFlightCheck(accessToken);\r\n  if (!preFlight) return false;\r\n\r\n  return await spotifyApi.login();\r\n};\r\n\r\nlet codeVerifierLocal;\r\nlet stateLocal;\r\nspotifyApi.loginRedirect = async () => {\r\n  codeVerifierLocal = makeid(getRandomInt(43, 128));\r\n\r\n  const codeChallenge = await pkce_challenge_from_verifier(codeVerifierLocal);\r\n  stateLocal = makeid(12);\r\n\r\n  // construct the authentication url\r\n  const scopes = [\r\n    \"streaming\",\r\n    \"user-read-email\",\r\n    \"user-read-private\",\r\n    \"user-read-playback-state\",\r\n    \"user-modify-playback-state\",\r\n    \"user-library-read\",\r\n    \"user-library-modify\",\r\n    \"playlist-read-private\",\r\n  ];\r\n  const parameters = {\r\n    response_type: \"code\",\r\n    client_id: process.env.REACT_APP_SPOTIFY_CLIENT_ID,\r\n    redirect_uri: \"https://david-beale.github.io/Grootify/\",\r\n    scope: scopes.join(\" \"),\r\n    state: stateLocal,\r\n    code_challenge: codeChallenge,\r\n    code_challenge_method: \"S256\",\r\n  };\r\n\r\n  const authURL =\r\n    \"https://accounts.spotify.com/authorize?\" + buildParams(parameters);\r\n\r\n  const popup = popupWindow(authURL, \"Login With Spotify\", window, 600, 800);\r\n\r\n  return popup;\r\n};\r\n\r\nspotifyApi.requestTokens = (payload) => {\r\n  const { state, code, error } = payload;\r\n\r\n  if (error || state !== stateLocal) return false;\r\n\r\n  const params = new URLSearchParams();\r\n\r\n  params.append(\"client_id\", process.env.REACT_APP_SPOTIFY_CLIENT_ID);\r\n  params.append(\"grant_type\", \"authorization_code\");\r\n  params.append(\"code\", code);\r\n  params.append(\"redirect_uri\", \"https://david-beale.github.io/Grootify/\");\r\n  params.append(\"code_verifier\", codeVerifierLocal);\r\n\r\n  return axios\r\n    .post(\"https://accounts.spotify.com/api/token\", params, {\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded;\",\r\n      },\r\n    })\r\n    .then((res) => {\r\n      const { access_token, refresh_token, expires_in } = res.data;\r\n      localStorage.setItem(\"sp-accessToken\", access_token);\r\n      localStorage.setItem(\"sp-refreshToken\", refresh_token);\r\n      const adjustedExpiry = (expires_in - 60) * 1000;\r\n      localStorage.setItem(\"sp-expiry\", Date.now() + adjustedExpiry);\r\n      spotifyApi.setAccessToken(access_token);\r\n      spotifyApi.setRefreshToken(refresh_token);\r\n      setTimeout(() => {\r\n        spotifyApi.refreshAccessToken();\r\n      }, adjustedExpiry);\r\n\r\n      return true;\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      return false;\r\n    });\r\n};\r\n\r\nconst formatDuration = (duration) => {\r\n  let seconds = Math.round(duration / 1000);\r\n  const minutes = ~~(seconds / 60);\r\n  seconds -= minutes * 60;\r\n  return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\r\n};\r\nconst formatTracks = (tracks, playlist = false) => {\r\n  return tracks.map((track) => {\r\n    if (playlist) track = track.track;\r\n    const albumImage = track.album.images.reduce((smallest, image) => {\r\n      if (image.height < smallest.height) return image;\r\n      return smallest;\r\n    }, track.album.images[0]);\r\n    return {\r\n      artist: track.artists[0].name,\r\n      title: track.name,\r\n      id: track.id,\r\n      albumUrl: albumImage.url,\r\n      duration: formatDuration(track.duration_ms),\r\n    };\r\n  });\r\n};\r\nspotifyApi.getTracks = (query, offset) => {\r\n  return spotifyApi\r\n    .searchTracks(query, { offset: offset })\r\n    .then((res) => formatTracks(res.body.tracks.items))\r\n    .catch(() => false);\r\n};\r\nspotifyApi.getMyPlaylist = (playlist, offset) => {\r\n  if (playlist === \"liked\") {\r\n    return spotifyApi\r\n      .getMySavedTracks({ offset })\r\n      .then((res) => formatTracks(res.body.items, true))\r\n      .catch((err) => {\r\n        console.log(err);\r\n        return false;\r\n      });\r\n  }\r\n  return spotifyApi\r\n    .getPlaylist(playlist, { offset })\r\n    .then((res) => formatTracks(res.body.tracks.items, true))\r\n    .catch((err) => {\r\n      console.log(err);\r\n      return false;\r\n    });\r\n};\r\n\r\nspotifyApi.getTracks = (query) => {\r\n  return spotifyApi\r\n    .searchTracks(query)\r\n    .then((res) => formatTracks(res.body.tracks.items))\r\n    .catch(() => false);\r\n};\r\n\r\nspotifyApi.getPlaylists = () => {\r\n  return spotifyApi\r\n    .getUserPlaylists(userId, { limit: 50 })\r\n    .then(\r\n      function (data) {\r\n        return data.body.items.map((playlist) => {\r\n          return {\r\n            name: playlist.name,\r\n            id: playlist.id,\r\n            image: playlist.images[1] || playlist.images[0],\r\n          };\r\n        });\r\n      },\r\n      function (err) {\r\n        console.log(\"Something went wrong!\", err);\r\n      }\r\n    )\r\n    .catch((err) => console.log(err));\r\n};\r\n","import { spotifyApi } from \"../Api/SpotifyApi\";\r\nimport { onClosePlaylist } from \"./playlistSlice\";\r\n\r\nlet clearTracksId = null;\r\nlet queryId = null;\r\n\r\nexport const searchSlice = (set, get) => ({\r\n  clearSearchText: [],\r\n  searchTracksOpen: false,\r\n  searchTracks: [],\r\n  searchFinised: false,\r\n  searchQuery: null,\r\n  searchOffset: 0,\r\n  searchInProgress: false,\r\n\r\n  sendSearchRequest: async (query) => {\r\n    const id = Date.now();\r\n    queryId = id;\r\n    const tracks = await spotifyApi.getTracks(query, 0);\r\n    if (queryId !== id) return;\r\n    clearTracksId = \"abort\"; //cancels close timeout\r\n    set(() => ({\r\n      searchTracks: tracks,\r\n      searchTracksOpen: true,\r\n      searchQuery: query,\r\n      searchOffset: 20,\r\n      searchFinised: tracks.length < 20,\r\n    }));\r\n    onClosePlaylist(set);\r\n  },\r\n\r\n  onCloseSearch: () => onCloseSearch(set),\r\n\r\n  setSearchSong: (song) => {\r\n    onCloseSearch(set);\r\n    set(() => ({ songs: [\"spotify:track:\" + song], isPlaying: true }));\r\n  },\r\n\r\n  searchLoadNextPage: async () => {\r\n    if (!get().searchOffset || get().searchInProgress) return;\r\n    set(() => ({ searchInProgress: true }));\r\n    const tracks = await spotifyApi.getTracks(\r\n      get().searchQuery,\r\n      get().searchOffset\r\n    );\r\n    set((state) => ({\r\n      searchTracks: [...state.searchTracks, ...tracks],\r\n      searchOffset: state.searchOffset + 20,\r\n      searchFinised: tracks.length < 20,\r\n      searchInProgress: false,\r\n    }));\r\n  },\r\n});\r\n\r\nexport const onCloseSearch = (set) => {\r\n  set(() => ({\r\n    searchTracksOpen: false,\r\n    clearSearchText: [],\r\n    searchFinised: false,\r\n    searchQuery: null,\r\n    searchOffset: 0,\r\n    inProgress: false,\r\n  }));\r\n  let id = Date.now();\r\n  clearTracksId = Date.now();\r\n  setTimeout(() => {\r\n    if (id !== clearTracksId) return;\r\n    set(() => ({ searchTracks: [] }));\r\n  }, 500);\r\n};\r\n","import { spotifyApi } from \"../Api/SpotifyApi\";\r\nimport { onCloseSearch } from \"./searchSlice\";\r\n\r\nlet clearPlaylistId = null;\r\nlet queryId = null;\r\n\r\nexport const playlistSlice = (set, get) => ({\r\n  playlistTracksOpen: false,\r\n  playlistTracks: [],\r\n  selectedPlaylist: null,\r\n\r\n  playlistRequestsFinised: false,\r\n  playlistRequestsOffset: 0,\r\n  playlistRequestsInProgress: false,\r\n\r\n  onClosePlaylist: () => {\r\n    onClosePlaylist(set);\r\n  },\r\n  onSelectPlayList: async (playlist) => {\r\n    if (playlist === get().selectedPlaylist) {\r\n      onClosePlaylist(set);\r\n      return;\r\n    }\r\n    const id = Date.now();\r\n    queryId = id;\r\n    const tracks = await spotifyApi.getMyPlaylist(playlist);\r\n    if (queryId !== id) return;\r\n    clearPlaylistId = \"abort\";\r\n    set(() => ({\r\n      selectedPlaylist: playlist,\r\n      playlistTracksOpen: true,\r\n      playlistTracks: tracks,\r\n      playlistRequestsOffset: 20,\r\n      playlistRequestsFinised: tracks.length < 20,\r\n    }));\r\n    onCloseSearch(set);\r\n  },\r\n\r\n  setPlaylistSong: (song) => {\r\n    onClosePlaylist(set);\r\n    const playlistTracks = get().playlistTracks;\r\n    const newPlaylist = buildPlaylist(playlistTracks, song);\r\n    set(() => ({ songs: newPlaylist, isPlaying: true }));\r\n  },\r\n\r\n  playlistRequestsLoadNextPage: async () => {\r\n    if (!get().playlistRequestsOffset || get().playlistRequestsInProgress)\r\n      return;\r\n    set(() => ({ playlistRequestsInProgress: true }));\r\n    const tracks = await spotifyApi.getMyPlaylist(\r\n      get().selectedPlaylist,\r\n      get().playlistRequestsOffset\r\n    );\r\n    set((state) => ({\r\n      playlistTracks: [...state.playlistTracks, ...tracks],\r\n      playlistRequestsOffset: state.playlistRequestsOffset + 20,\r\n      playlistRequestsFinised: tracks.length < 20,\r\n      playlistRequestsInProgress: false,\r\n    }));\r\n  },\r\n});\r\n\r\nconst buildPlaylist = (list, song) => {\r\n  for (let i = 0; i < list.length; i++) {\r\n    if (list[i].id === song) {\r\n      return [...list.slice(i, list.length), ...list.slice(0, i)].map(\r\n        (track) => \"spotify:track:\" + track.id\r\n      );\r\n    }\r\n  }\r\n};\r\nexport const onClosePlaylist = (set) => {\r\n  set(() => ({\r\n    selectedPlaylist: null,\r\n    playlistTracksOpen: false,\r\n    playlistRequestsFinised: false,\r\n    playlistRequestsOffset: 0,\r\n    playlistRequestsInProgress: false,\r\n  }));\r\n  let id = Date.now();\r\n  clearPlaylistId = Date.now();\r\n  setTimeout(() => {\r\n    if (id !== clearPlaylistId) return;\r\n    set(() => ({ playlistTracks: [] }));\r\n  }, 500);\r\n};\r\n","import create from \"zustand\";\r\nimport { authSlice } from \"./authSlice\";\r\nimport { fileSlice } from \"./fileSlice\";\r\nimport { loaderSlice } from \"./loaderSlice\";\r\nimport { modeSlice } from \"./modeSlice\";\r\nimport { playlistSlice } from \"./playlistSlice\";\r\nimport { searchSlice } from \"./searchSlice\";\r\nimport { songsSlice } from \"./songsSlice\";\r\nimport { triggersSlice } from \"./triggersSlice\";\r\n\r\nexport const useStore = create((set, get) => ({\r\n  ...authSlice(set, get),\r\n  ...fileSlice(set, get),\r\n  ...loaderSlice(set, get),\r\n  ...modeSlice(set, get),\r\n  ...playlistSlice(set, get),\r\n  ...searchSlice(set, get),\r\n  ...songsSlice(set, get),\r\n  ...triggersSlice(set, get),\r\n}));\r\n","export const authSlice = (set) => ({\r\n  loggedIn: null,\r\n  accessRequired: false,\r\n  login: () => set(() => ({ loggedIn: true, accessRequired: false })),\r\n  logout: () => {\r\n    set(() => ({ loggedIn: false, interfaceOpen: false, lightsOn: false }));\r\n    localStorage.removeItem(\"sp-accessToken\");\r\n    localStorage.removeItem(\"sp-refreshToken\");\r\n  },\r\n  setAccessRequired: () => set(() => ({ accessRequired: true })),\r\n});\r\n","export const fileSlice = (set) => ({\r\n  file: null,\r\n  setFile: (file) => set(() => ({ file })),\r\n});\r\n","export const loaderSlice = (set) => ({\r\n  isPreLoaded: false,\r\n  setPreLoaded: () => set(() => ({ isPreLoaded: true })),\r\n  isLoaded: false,\r\n  setLoaded: () => set(() => ({ isLoaded: true })),\r\n});\r\n","export const modeSlice = (set) => ({\r\n  mode: null,\r\n\r\n  setMode: (mode) => set(() => ({ mode })),\r\n});\r\n","export const songsSlice = () => ({\r\n  songs: [],\r\n});\r\n","export const triggersSlice = (set) => ({\r\n  interfaceOpen: false,\r\n  onInterfaceOpen: () => set(() => ({ interfaceOpen: true })),\r\n\r\n  running: false,\r\n  setRunning: (direction) => set(() => ({ running: direction })),\r\n\r\n  lightsOn: false,\r\n  setLightsOn: () => set(() => ({ lightsOn: true })),\r\n\r\n  click: false,\r\n  onClick: () => set(() => ({ click: [] })),\r\n\r\n  isPlaying: false,\r\n  setIsPlaying: (status) => set(() => ({ isPlaying: status })),\r\n\r\n  mood: 2,\r\n  setMood: (mood) => set(() => ({ mood })),\r\n});\r\n","export default __webpack_public_path__ + \"static/media/HangingIdle.6c06d7e9.fbx\";","export default __webpack_public_path__ + \"static/media/Fall.534bdd27.fbx\";","export default __webpack_public_path__ + \"static/media/Land.d0119f07.fbx\";","export default __webpack_public_path__ + \"static/media/Waving.91a7305c.fbx\";","export default __webpack_public_path__ + \"static/media/Stunned.c5377893.fbx\";","export default __webpack_public_path__ + \"static/media/Getting Up.2d5ceffd.fbx\";","export default __webpack_public_path__ + \"static/media/Angry.7db84f18.fbx\";","export default __webpack_public_path__ + \"static/media/Typing.cedeec8e.fbx\";","export default __webpack_public_path__ + \"static/media/RunningRight.60369293.fbx\";","export default __webpack_public_path__ + \"static/media/RunningLeft.0707ef58.fbx\";","export default __webpack_public_path__ + \"static/media/Happy Idle.9c825c3c.fbx\";","import HangingIdle from \"./files/Intro/HangingIdle.fbx\";\r\nimport Falling from \"./files/Intro/Fall.fbx\";\r\nimport Land from \"./files/Intro/Land.fbx\";\r\nimport Waving from \"./files/Intro/Waving.fbx\";\r\n\r\nimport Stunned from \"./files/UserInput/Stunned.fbx\";\r\nimport GettingUp from \"./files/UserInput/Getting Up.fbx\";\r\n\r\nimport Angry from \"./files/Angry.fbx\";\r\nimport Typing from \"./files/Typing.fbx\";\r\n\r\nimport RunRight from \"./files/Running/RunningRight.fbx\";\r\nimport RunLeft from \"./files/Running/RunningLeft.fbx\";\r\n\r\nimport HappyIdle from \"./files/Idle/Happy Idle.fbx\";\r\nimport Idle from \"./files/Idle/Breathing Idle.fbx\";\r\nimport Scared from \"./files/Running/Scared.fbx\";\r\n\r\nimport ArmSwing from \"./files/Dancing/ArmSwing.fbx\";\r\nimport HipHop5 from \"./files/Dancing/HipHop5.fbx\";\r\nimport Belly from \"./files/Dancing/Belly.fbx\";\r\nimport Samba1 from \"./files/Dancing/Samba1.fbx\";\r\nimport Samba5 from \"./files/Dancing/Samba5.fbx\";\r\nimport Dance from \"./files/Dancing/Dance.fbx\";\r\nimport House2 from \"./files/Dancing/House2.fbx\";\r\nimport Gangnam from \"./files/Dancing/Gangnam Style.fbx\";\r\n\r\nimport moonwalk from \"./files/Thriller/Moonwalk.fbx\";\r\nimport thrillerIdle from \"./files/Thriller/Thriller Idle.fbx\";\r\n\r\nexport const animations = {\r\n  //params:\r\n  //once = no loop\r\n  //blockUser = no user interaction allowed\r\n  //blockAll = animation must finish\r\n  hangingIdle: { file: HangingIdle, blockUser: true },\r\n\r\n  falling: { file: Falling, blockAll: true },\r\n  land: { file: Land, once: true, blockAll: true },\r\n  waving: { file: Waving, once: true, blockUser: true },\r\n  typing: { file: Typing, once: true, blockUser: true },\r\n\r\n  angry: { file: Angry, once: true, blockUser: true },\r\n  stunned: { file: Stunned, once: true, blockAll: true },\r\n  gettingUp: { file: GettingUp, once: true, blockAll: true },\r\n\r\n  idle: { file: Idle },\r\n  happyIdle: { file: HappyIdle },\r\n\r\n  runRight: { file: RunRight, blockUser: true },\r\n  scared: { file: Scared, blockUser: true },\r\n  runLeft: { file: RunLeft, blockUser: true },\r\n\r\n  //default dancing:\r\n  ArmSwing: { file: ArmSwing, once: true },\r\n  HipHop5: { file: HipHop5, once: true },\r\n  Belly: { file: Belly, once: true },\r\n  Samba1: { file: Samba1, once: true },\r\n  Samba5: { file: Samba5, once: true },\r\n  Dance: { file: Dance, once: true },\r\n  House2: { file: House2, once: true },\r\n  Gangnam: { file: Gangnam },\r\n\r\n  moonwalk: { file: moonwalk, once: true, blockUser: true },\r\n  thrillerIdle: { file: thrillerIdle, blockUser: true },\r\n};\r\n\r\nexport const runLeft = [\r\n  \"runLeft\",\r\n  \"RunningLeft2\",\r\n  \"RunningLeft3\",\r\n  \"RunningLeft4\",\r\n];\r\nexport const runLeftStack = [\"runLeft\"];\r\nexport const runRight = [\"runRight\"];\r\nexport const runScared = [\"scared\"];\r\n\r\nexport const gangnam = [\"Gangnam\"];\r\n\r\nexport const allDanceLow = [\r\n  \"Arms\",\r\n  \"Belly\",\r\n  \"Breakdance2\",\r\n  \"Dance\",\r\n  \"HipHop11\",\r\n  \"Jazz2\",\r\n  \"Jazz3\",\r\n  \"Salsa4\",\r\n  \"Samba4\",\r\n];\r\nexport const danceLowStack = [\"Dance\", \"Belly\"];\r\n\r\nexport const allDanceMed = [\r\n  \"ArmSwing\",\r\n  \"Arms\",\r\n  \"Bboy1\",\r\n  \"Bboy2\",\r\n  \"Breakdance2\",\r\n  \"Can\",\r\n  \"Chicken\",\r\n  \"Dance2\",\r\n  \"HipHop11\",\r\n  \"HipHop13\",\r\n  \"HipHop2\",\r\n  \"HipHop3\",\r\n  \"HipHop4\",\r\n  \"HipHop5\",\r\n  \"HipHop6\",\r\n  \"HipHop7\",\r\n  \"HipHop8\",\r\n  \"Hokey\",\r\n  \"House2\",\r\n  \"Jazz2\",\r\n  \"Jazz3\",\r\n  \"Locking\",\r\n  \"Macarena\",\r\n  \"Maraschino\",\r\n  \"Robot\",\r\n  \"Rumba\",\r\n  \"Salsa1\",\r\n  \"Salsa2\",\r\n  \"Salsa3\",\r\n  \"Salsa4\",\r\n  \"Samba1\",\r\n  \"Samba2\",\r\n  \"Samba3\",\r\n  \"Samba4\",\r\n  \"Samba5\",\r\n  \"Samba6\",\r\n  \"Silly2\",\r\n  \"Swing\",\r\n  \"Swing2\",\r\n  \"Swing3\",\r\n  \"Tut\",\r\n  \"Twist\",\r\n];\r\nexport const danceMedStack = [\"ArmSwing\", \"Samba1\"];\r\n\r\nexport const allDanceHigh = [\r\n  \"Bboy1\",\r\n  \"Bboy2\",\r\n  \"Dance2\",\r\n  \"HipHop10\",\r\n  \"HipHop12\",\r\n  \"HipHop2\",\r\n  \"HipHop3\",\r\n  \"HipHop4\",\r\n  \"HipHop5\",\r\n  \"HipHop6\",\r\n  \"HipHop7\",\r\n  \"HipHop8\",\r\n  \"House1\",\r\n  \"House2\",\r\n  \"Locking\",\r\n  \"Maraschino\",\r\n  \"Robot\",\r\n  \"Rumba\",\r\n  \"Running\",\r\n  \"Salsa1\",\r\n  \"Salsa2\",\r\n  \"Samba1\",\r\n  \"Samba2\",\r\n  \"Samba3\",\r\n  \"Samba5\",\r\n  \"Samba6\",\r\n  \"Shuffling\",\r\n  \"Silly1\",\r\n  \"Silly2\",\r\n  \"Swing\",\r\n  \"Swing2\",\r\n  \"Swing3\",\r\n  \"Tut\",\r\n  \"Twerk\",\r\n  \"ArmSwing\",\r\n];\r\nexport const danceHighStack = [\"ArmSwing\", \"Samba5\", \"House2\"];\r\n\r\nexport const loops = {\r\n  Can: 2,\r\n  Chicken: 2,\r\n  HipHop12: 2,\r\n  Maraschino: 2,\r\n  Bboy1: 3,\r\n  Bboy2: 2,\r\n  Breakdance2: 3,\r\n  Jazz2: 3,\r\n  Jazz3: 3,\r\n  Rumba: 3,\r\n  Salsa2: 3,\r\n  Swing2: 2,\r\n};\r\n\r\nexport const thriller = [\r\n  \"moonwalk\",\r\n  \"thrillerIdle\",\r\n  \"thriller1\",\r\n  \"thriller2\",\r\n  \"thriller3\",\r\n  \"thriller4\",\r\n];\r\n","export default __webpack_public_path__ + \"static/media/Breathing Idle.2de5616f.fbx\";","export default __webpack_public_path__ + \"static/media/Scared.0c3aefb1.fbx\";","export default __webpack_public_path__ + \"static/media/ArmSwing.cfa64b8b.fbx\";","export default __webpack_public_path__ + \"static/media/HipHop5.bfc85956.fbx\";","export default __webpack_public_path__ + \"static/media/Belly.e398baef.fbx\";","export default __webpack_public_path__ + \"static/media/Samba1.308a41bf.fbx\";","export default __webpack_public_path__ + \"static/media/Samba5.28f1b775.fbx\";","export default __webpack_public_path__ + \"static/media/Dance.6589c141.fbx\";","export default __webpack_public_path__ + \"static/media/House2.1be45f0a.fbx\";","export default __webpack_public_path__ + \"static/media/Gangnam Style.94781dc5.fbx\";","export default __webpack_public_path__ + \"static/media/Moonwalk.f6ecffc3.fbx\";","export default __webpack_public_path__ + \"static/media/Thriller Idle.214830c1.fbx\";","import {\r\n  allDanceLow,\r\n  allDanceMed,\r\n  allDanceHigh,\r\n  danceLowStack,\r\n  danceMedStack,\r\n  danceHighStack,\r\n  loops,\r\n  gangnam,\r\n} from \"../animations\";\r\n\r\nexport default class DanceManger {\r\n  constructor(model) {\r\n    this.model = model;\r\n    this.stacks = {\r\n      1: { name: \"low\", list: danceLowStack, count: 0 },\r\n      2: { name: \"med\", list: danceMedStack, count: 0 },\r\n      3: { name: \"high\", list: danceHighStack, count: 0 },\r\n    };\r\n    this.lists = {\r\n      1: { name: \"low\", list: allDanceLow },\r\n      2: { name: \"med\", list: allDanceMed },\r\n      3: { name: \"high\", list: allDanceHigh },\r\n      4: { name: \"gangnam\", list: gangnam },\r\n    };\r\n    this.mood = 2;\r\n    this.isDancing = false;\r\n    this.downloading = { name: null, mood: null, active: false };\r\n    // this.index = -1;\r\n  }\r\n\r\n  addToStack() {\r\n    const { name, mood } = this.downloading;\r\n    const stack = this.stacks[mood];\r\n    stack.count++;\r\n    stack.list.push(name);\r\n  }\r\n  popStack(stack, currentAction) {\r\n    let nextDance;\r\n    stack.count--;\r\n    if (stack.count < 0) stack.count = 0;\r\n    do {\r\n      nextDance = stack.list.pop();\r\n      stack.list.unshift(nextDance);\r\n    } while (nextDance === currentAction.name);\r\n    return nextDance;\r\n  }\r\n  getRandomMove(currentAction) {\r\n    const allMoves = this.lists[this.mood].list;\r\n    // return allMoves[this.index] || allMoves[0];\r\n    let randomMove;\r\n    do {\r\n      const randomMoveIndex = Math.floor(Math.random() * allMoves.length);\r\n      randomMove = allMoves[randomMoveIndex];\r\n    } while (\r\n      randomMove === currentAction.name ||\r\n      randomMove === this.downloading.name\r\n    );\r\n    return randomMove;\r\n  }\r\n  get(currentAction) {\r\n    const actions = this.model.animationManager.actions;\r\n    this.isDancing = true;\r\n    //prevent cache from getting too big\r\n    // if (dancingCache.length > 10) {\r\n    //   const oldest = dancingCache.shift();\r\n    //   delete actions[oldest];\r\n    // }\r\n    const mood = this.mood || 2;\r\n    const stack = this.stacks[mood];\r\n    if (stack && stack.count) return this.popStack(stack, currentAction);\r\n    const randomMove = this.getRandomMove(currentAction);\r\n    if (actions[randomMove]) return randomMove;\r\n\r\n    if (!this.downloading.active) {\r\n      actions[randomMove] = true;\r\n      this.downloading = { name: randomMove, mood, active: true };\r\n      this.model.worker.postMessage({ name: randomMove, type: \"dance\" });\r\n    }\r\n    return this.popStack(stack, currentAction);\r\n  }\r\n  setMood(mood) {\r\n    this.mood = mood;\r\n  }\r\n  onWorkerMessage(animation) {\r\n    const loop = loops[this.downloading.name];\r\n    this.model.animationManager.loadAnimation({\r\n      animation,\r\n      once: !loop,\r\n      loop: loop,\r\n      name: this.downloading.name,\r\n    });\r\n    this.addToStack();\r\n    this.downloading = { name: null, mood: null, active: false };\r\n  }\r\n}\r\n","import { runLeft, runLeftStack, runRight, runScared } from \"../animations\";\r\n\r\nexport default class RunningManger {\r\n  constructor(model) {\r\n    this.model = model;\r\n    this.stacks = { [-1]: { name: \"left\", list: runLeftStack, count: 0 } };\r\n    this.lists = { [-1]: runLeft, 1: runRight, scared: runScared };\r\n    this.scared = false;\r\n    this.downloading = { name: null, direction: null, active: false };\r\n  }\r\n  addToStack() {\r\n    const { name, direction } = this.downloading;\r\n    const stack = this.stacks[direction];\r\n    stack.count++;\r\n    stack.list.push(name);\r\n  }\r\n  popStack(stack) {\r\n    stack.count--;\r\n    if (stack.count < 0) stack.count = 0;\r\n    const next = stack.list.pop();\r\n    stack.list.unshift(next);\r\n    return next;\r\n  }\r\n\r\n  getRandomMove() {\r\n    if (this.scared) {\r\n      this.scared = false;\r\n      return this.lists.scared[0];\r\n    }\r\n    const direction = this.model.positionManager.runningDirection;\r\n    const allMoves = this.lists[direction];\r\n    let randomMove;\r\n    do {\r\n      const randomMoveIndex = Math.floor(Math.random() * allMoves.length);\r\n      randomMove = allMoves[randomMoveIndex];\r\n    } while (randomMove === this.downloading.name);\r\n    return randomMove;\r\n  }\r\n  setScared() {\r\n    this.scared = true;\r\n  }\r\n  get() {\r\n    if (!this.model.positionManager.updateDirection()) {\r\n      this.scared = false;\r\n      return false;\r\n    }\r\n    const direction = this.model.positionManager.runningDirection;\r\n    const actions = this.model.animationManager.actions;\r\n\r\n    const stack = this.stacks[direction];\r\n    if (stack && stack.count) return this.popStack(stack);\r\n    const randomMove = this.getRandomMove();\r\n    if (actions[randomMove]) return randomMove;\r\n\r\n    if (!this.downloading.active) {\r\n      actions[randomMove] = true;\r\n      this.downloading = { name: randomMove, direction, active: true };\r\n      this.model.worker.postMessage({ name: randomMove, type: \"running\" });\r\n    }\r\n    return this.popStack(stack);\r\n  }\r\n  onWorkerMessage(animation) {\r\n    this.model.animationManager.loadAnimation({\r\n      animation,\r\n      name: this.downloading.name,\r\n    });\r\n    this.addToStack();\r\n    this.downloading = { name: null, direction: null, active: false };\r\n  }\r\n}\r\n","export default class PositionManager {\r\n  constructor() {\r\n    this.posController = null;\r\n    this.vel = 0;\r\n    this.pos = \"left\";\r\n    this.requestedDirection = false;\r\n    this.runningDirection = 0;\r\n    this.isFalling = false;\r\n  }\r\n  setPosController(posController) {\r\n    this.posController = posController;\r\n  }\r\n  setPos(pos) {\r\n    this.pos = pos;\r\n  }\r\n  incrVel(incr, limit = false) {\r\n    this.vel += incr;\r\n    if (limit) this.vel = Math.min(limit, this.vel);\r\n  }\r\n  startFalling() {\r\n    this.isFalling = true;\r\n  }\r\n  fall() {\r\n    if (!this.isFalling) return;\r\n    this.incrVel(-0.01);\r\n    this.updateY();\r\n    if (this.posController.y <= -20) {\r\n      this.stopFalling();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  stopFalling() {\r\n    this.vel = 0;\r\n    this.isFalling = false;\r\n    this.posController.y = -20;\r\n  }\r\n  run() {\r\n    if (!this.runningDirection) return;\r\n    this.incrVel(0.008, 0.4);\r\n    this.updateX();\r\n    if (\r\n      (this.runningDirection === 1 && this.posController.x >= 56) ||\r\n      (this.runningDirection === -1 && this.posController.x <= 0)\r\n    ) {\r\n      this.stopRunning();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  stopRunning() {\r\n    if (this.runningDirection === -1) this.setPos(\"left\");\r\n    else this.setPos(\"right\");\r\n    this.requestedDirection = false;\r\n    this.runningDirection = 0;\r\n    this.vel = 0;\r\n  }\r\n  setDirection(direction) {\r\n    this.requestedDirection = direction;\r\n    if (this.runningDirection !== this.requestedDirection) this.vel = 0;\r\n    this.setPos(\"transit\");\r\n  }\r\n  updateY() {\r\n    this.posController.y += this.vel;\r\n  }\r\n  updateX() {\r\n    this.posController.x += this.vel * this.runningDirection;\r\n  }\r\n  updateDirection() {\r\n    if (this.requestedDirection === this.runningDirection) return false;\r\n    this.runningDirection = this.requestedDirection;\r\n    return true;\r\n  }\r\n}\r\n","export default class WaveManager {\r\n  constructor(model) {\r\n    this.model = model;\r\n    this.mouseX = 0;\r\n    this.mouseY = 0;\r\n    this.waveStatus = { count: 0, side: null, time: null };\r\n  }\r\n  setMouse([mouseX, mouseY]) {\r\n    this.mouseX = mouseX;\r\n    this.mouseY = mouseY;\r\n  }\r\n  getSide() {\r\n    if (this.mouseX < -0.17) return -1;\r\n    if (this.mouseX < 0.17) return 0;\r\n    return 1;\r\n  }\r\n  wave() {\r\n    if (!this.model.animationManager.waveAllowed()) return;\r\n    const newSide = this.getSide();\r\n    if (!newSide) return;\r\n    const { count, side, time } = this.waveStatus;\r\n    const newTime = Date.now();\r\n    if (!count) {\r\n      this.waveStatus.count++;\r\n      this.waveStatus.side = newSide;\r\n      this.waveStatus.time = newTime;\r\n      return;\r\n    } else {\r\n      if (side === newSide) return;\r\n      if (newTime - time > 1000) return (this.waveStatus.count = 0);\r\n\r\n      this.waveStatus.count++;\r\n      this.waveStatus.side = newSide;\r\n      this.waveStatus.time = newTime;\r\n    }\r\n    if (this.waveStatus.count === 3) {\r\n      this.waveStatus.count = 0;\r\n      return true;\r\n    }\r\n  }\r\n}\r\n","export default class JointManager {\r\n  constructor(model) {\r\n    this.model = model;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.neck = null;\r\n    this.waist = null;\r\n    this.fadeJointsRequired = false;\r\n  }\r\n  setJoint(c) {\r\n    if (c.isBone && c.name === \"mixamorigNeck\") {\r\n      this.neck = c;\r\n    } else if (c.isBone && c.name === \"mixamorigSpine\") {\r\n      this.waist = c;\r\n    }\r\n  }\r\n  getJointAngle = () => {\r\n    this.x = this.neck.rotation.y / 1.2;\r\n    this.y = this.neck.rotation.x / 1.2;\r\n  };\r\n  moveJoint(joint, angle) {\r\n    joint.rotation.y = this.x * angle;\r\n    joint.rotation.x = this.y * angle;\r\n  }\r\n  moveJoints() {\r\n    const currentAction = this.model.animationManager.currentAction;\r\n    if (!currentAction || currentAction.name !== \"idle\") return;\r\n    const { mouseX, mouseY } = this.model.mouseManager;\r\n    const { pos } = this.model.positionManager;\r\n    let yPos = mouseY - 0.1;\r\n    // adjust xpos to account for model position\r\n    let xPos = mouseX;\r\n    if (pos === \"right\") {\r\n      xPos -= 0.43;\r\n      if (xPos > 0) xPos *= 13;\r\n    } else {\r\n      xPos *= 2;\r\n    }\r\n\r\n    this.x += (xPos - this.x) * 0.07;\r\n    this.y += (yPos - this.y) * 0.07;\r\n    this.moveJoint(this.neck, 1.2);\r\n    this.moveJoint(this.waist, 0.5);\r\n  }\r\n  fadeJoints() {\r\n    if (!this.fadeJointsRequired) return;\r\n    const targetX = this.neck.rotation.y / 1.2;\r\n    const targetY = this.neck.rotation.x / 1.2;\r\n\r\n    this.x += (targetX - this.x) * 0.07;\r\n    this.y += (targetY - this.y) * 0.07;\r\n    this.moveJoint(this.neck, 1.2);\r\n    this.moveJoint(this.waist, 0.5);\r\n  }\r\n  checkIfFadeRequired(prevAction, currentAction) {\r\n    //if prev action was idle, we need to fade out the manually controlled joints\r\n    //ignore \"stunned\" as it will result in a clanky animation\r\n    if (prevAction.name === \"idle\" && currentAction.name !== \"stunned\") {\r\n      this.fadeJointsRequired = true;\r\n      setTimeout(() => {\r\n        this.fadeJointsRequired = false;\r\n      }, 500);\r\n    }\r\n  }\r\n}\r\n","import { useStore } from \"../../../Store/store\";\r\n\r\nexport default class ChainManager {\r\n  constructor(model) {\r\n    this.model = model;\r\n    this.positionManager = model.positionManager;\r\n    this.runningManager = model.runningManager;\r\n    this.jointManager = model.jointManager;\r\n    this.chain = [];\r\n  }\r\n\r\n  getBlockingActions() {\r\n    const actions = this.model.animationManager.actions;\r\n    const blockingActions = [];\r\n    for (let i = 0; i < this.chain.length; i++) {\r\n      const action = this.chain[i];\r\n      if (!actions[action.animation] || !actions[action.animation].blockAll) {\r\n        break;\r\n      }\r\n      blockingActions.push(action);\r\n    }\r\n    return blockingActions;\r\n  }\r\n  shift() {\r\n    return this.chain.shift();\r\n  }\r\n  push(chainName) {\r\n    const { chain } = this[chainName]();\r\n    this.chain.push(...chain);\r\n  }\r\n  setChain(chainName) {\r\n    if (!this[chainName]) {\r\n      console.log(chainName, \" does not exist\");\r\n      return false;\r\n    }\r\n    const { chain, isUserAction } = this[chainName]();\r\n\r\n    const currentAction = this.model.animationManager.currentAction;\r\n    if ((currentAction.blockUser || currentAction.blockAll) && isUserAction) {\r\n      return false;\r\n    }\r\n    if (currentAction.blockAll) {\r\n      if (!chain) return false;\r\n      const blockingActions = this.getBlockingActions();\r\n      this.chain = [...blockingActions, ...chain];\r\n      return false;\r\n    }\r\n    if (chain) this.chain = chain;\r\n    return true;\r\n  }\r\n\r\n  //\r\n  //  CALLBACKS \r\n  //\r\n\r\n  startFalling = () => {\r\n    this.positionManager.startFalling();\r\n    this.model.started = true;\r\n  };\r\n  updateFade = () => {\r\n    this.model.animationManager.fadeSpeed = 0.5;\r\n  };\r\n  isPlayingCheck = () => {\r\n    if (this.model.isPlaying) {\r\n      useStore.setState({ interfaceOpen: true });\r\n      this.model.setChain(\"danceChain\");\r\n      return true;\r\n    } else {\r\n      this.runRight();\r\n    }\r\n  };\r\n  land = () => {\r\n    useStore.setState({ lightsOn: true });\r\n  };\r\n  runLeft = () => {\r\n    this.positionManager.setDirection(-1);\r\n  };\r\n  runRight = () => {\r\n    this.positionManager.setDirection(1);\r\n  };\r\n  runScared = () => {\r\n    this.positionManager.setDirection(1);\r\n    this.runningManager.setScared();\r\n  };\r\n\r\n  typing = () => {\r\n    setTimeout(() => {\r\n      useStore.setState({ interfaceOpen: true });\r\n    }, 2000);\r\n  };\r\n  resetThriller = () => {\r\n    this.model.thrillerManager.resetThriller();\r\n  };\r\n\r\n  //\r\n  //  CHAINS \r\n  //\r\n\r\n  leftDanceChain() {\r\n    return {\r\n      chain: [\r\n        { animation: \"running\", cb: this.runLeft },\r\n        { animation: \"dance\" },\r\n      ],\r\n    };\r\n  }\r\n  danceChain() {\r\n    return {\r\n      chain: [{ animation: \"dance\" }],\r\n    };\r\n  }\r\n\r\n  rightDanceChain() {\r\n    return {\r\n      chain: [\r\n        { animation: \"running\", cb: this.runRight },\r\n        { animation: \"dance\" },\r\n      ],\r\n    };\r\n  }\r\n  rightIdleChain() {\r\n    return {\r\n      chain: [\r\n        { animation: \"running\", cb: this.runRight },\r\n        { animation: \"idle\", cb: this.jointManager.getJointAngle },\r\n      ],\r\n    };\r\n  }\r\n\r\n  idleChain() {\r\n    return {\r\n      chain: [{ animation: \"idle\", cb: this.jointManager.getJointAngle }],\r\n    };\r\n  }\r\n  angryChain() {\r\n    return {\r\n      chain: [\r\n        { animation: \"angry\" },\r\n        { animation: \"idle\", cb: this.jointManager.getJointAngle },\r\n      ],\r\n    };\r\n  }\r\n  scaredDanceChain() {\r\n    return {\r\n      chain: [\r\n        { animation: \"running\", cb: this.runScared },\r\n        { animation: \"dance\" },\r\n      ],\r\n    };\r\n  }\r\n  scaredIdleChain() {\r\n    return {\r\n      chain: [\r\n        { animation: \"running\", cb: this.runScared },\r\n        { animation: \"idle\", cb: this.jointManager.getJointAngle },\r\n      ],\r\n    };\r\n  }\r\n  fallingChain() {\r\n    return {\r\n      chain: [\r\n        { animation: \"falling\", cb: this.startFalling },\r\n        { animation: \"land\", cb: this.land },\r\n        { animation: \"waving\", cb: this.updateFade },\r\n        { animation: \"running\", cb: this.isPlayingCheck },\r\n        { animation: \"typing\", cb: this.typing },\r\n        { animation: \"idle\", cb: this.jointManager.getJointAngle },\r\n      ],\r\n    };\r\n  }\r\n  waveChain() {\r\n    const chain = [{ animation: \"waving\" }];\r\n    const currentAction = this.model.animationManager.currentAction;\r\n    if (currentAction.name === \"idle\") {\r\n      chain.push({ animation: \"idle\", cb: this.jointManager.getJointAngle });\r\n    } else if (this.chain[0].animation === \"dance\") {\r\n      chain.push({ animation: \"dance\" });\r\n    }\r\n    return {\r\n      chain,\r\n      isUserAction: true,\r\n    };\r\n  }\r\n  fallOverChain() {\r\n    const chain = [{ animation: \"stunned\" }, { animation: \"gettingUp\" }];\r\n    const currentAction = this.model.animationManager.currentAction;\r\n    if (currentAction.name === \"idle\") {\r\n      chain.push({ animation: \"idle\", cb: this.jointManager.getJointAngle });\r\n    } else if (this.chain[0].animation === \"dance\") {\r\n      chain.push({ animation: \"dance\" });\r\n    }\r\n    return {\r\n      chain,\r\n      isUserAction: true,\r\n    };\r\n  }\r\n  thrillerChain() {\r\n    return {\r\n      chain: [{ animation: \"thriller\", cb: this.resetThriller }],\r\n    };\r\n  }\r\n  thrillerNextChain() {\r\n    return { chain: [{ animation: \"thriller\" }] };\r\n  }\r\n  leftThrillerChain() {\r\n    return {\r\n      chain: [\r\n        { animation: \"running\", cb: this.runLeft },\r\n        { animation: \"thriller\", cb: this.resetThriller },\r\n      ],\r\n    };\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Model.4743001a.fbx\";","import { animations } from \"../animations\";\r\nimport { AnimationMixer, LoopOnce } from \"three\";\r\nimport { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader\";\r\nimport Model from \"../files/Model/Model.fbx\";\r\n\r\nexport default class AnimationManager {\r\n  constructor(model) {\r\n    this.model = model;\r\n    this.mixer = null;\r\n    this.loader = new FBXLoader();\r\n    this.fbx = null;\r\n    this.actions = {};\r\n    this.currentAction = null;\r\n    this.fadeSpeed = 0.25;\r\n    this.init();\r\n  }\r\n  init() {\r\n    this.loader.load(Model, (model) => {\r\n      model.scale.setScalar(0.02);\r\n      model.traverse((c) => {\r\n        if (c.isMesh) {\r\n          c.castShadow = true;\r\n          c.__r3f = { handlers: {} };\r\n        } else {\r\n          this.model.jointManager.setJoint(c);\r\n        }\r\n      });\r\n      this.mixer = new AnimationMixer(model);\r\n      this.fbx = model;\r\n      for (const name in animations) {\r\n        this.loadFile(name, animations[name]);\r\n      }\r\n    });\r\n  }\r\n  loadAnimation = ({ animation, name, once, loop, blockUser, blockAll }) => {\r\n    const action = this.mixer.clipAction(animation);\r\n    if (once) {\r\n      action.loop = LoopOnce;\r\n      action.clampWhenFinished = true;\r\n    } else if (loop) {\r\n      action.repetitions = loop;\r\n      action.clampWhenFinished = true;\r\n    }\r\n    action.name = name;\r\n    action.blockUser = blockUser;\r\n    action.blockAll = blockAll;\r\n    this.actions[name] = action;\r\n    if (name === \"idle\") {\r\n      action._clip.tracks.splice(5, 1);\r\n      action._clip.tracks.splice(2, 1);\r\n    }\r\n    if (name === \"hangingIdle\") {\r\n      this.currentAction = action;\r\n      action.play();\r\n    }\r\n  };\r\n  loadFile = (name, anim) => {\r\n    const { file, once, blockUser, blockAll } = anim;\r\n    this.loader.load(file, (fbx) => {\r\n      this.loadAnimation({\r\n        animation: fbx.animations[0],\r\n        name,\r\n        once,\r\n        blockUser,\r\n        blockAll,\r\n      });\r\n    });\r\n  };\r\n  reset() {\r\n    this.model.danceManager.isDancing = false;\r\n  }\r\n  animationRouter(animation) {\r\n    if (animation === \"dance\") {\r\n      //dancing will always be the last in a chain, continue dancing until manually stopped\r\n      this.model.chainManager.push(\"danceChain\");\r\n      const dance = this.model.danceManager.get(this.currentAction);\r\n      return this.actions[dance];\r\n    } else if (animation === \"running\") {\r\n      const run = this.model.runningManager.get();\r\n      if (!run) return false;\r\n      return this.actions[run];\r\n    } else if (animation === \"thriller\") {\r\n      this.model.chainManager.push(\"thrillerNextChain\");\r\n      const move = this.model.thrillerManager.get();\r\n      if (!move) return false;\r\n      return this.actions[move];\r\n    } else if (animation === this.currentAction.name) return false;\r\n    return this.actions[animation];\r\n  }\r\n  fade(action) {\r\n    if (!this.currentAction) return;\r\n    action.crossFadeFrom(this.currentAction, this.fadeSpeed);\r\n    this.model.jointManager.checkIfFadeRequired(this.currentAction, action);\r\n  }\r\n  eventFinished = (e) => {\r\n    //ignore old event listener:\r\n    if (e.action.name !== this.currentAction.name) return;\r\n    this.runNextAnimation();\r\n  };\r\n\r\n  runNextAnimation = () => {\r\n    this.mixer.removeEventListener(\"finished\", this.eventFinished);\r\n    this.reset();\r\n    let { animation, cb } = this.model.chainManager.shift();\r\n    if (cb) {\r\n      const skip = cb();\r\n      if (skip) return;\r\n    }\r\n    const action = this.animationRouter(animation);\r\n    if (!action) return;\r\n    action.reset();\r\n    this.fade(action);\r\n    action.play();\r\n    this.currentAction = action;\r\n    this.mixer.addEventListener(\"finished\", this.eventFinished);\r\n  };\r\n  waveAllowed = () => {\r\n    return (\r\n      this.currentAction &&\r\n      !this.currentAction.blockUser &&\r\n      !this.currentAction.blockAll\r\n    );\r\n  };\r\n}\r\n","import { thriller } from \"../animations\";\r\n\r\nexport default class ThrillerManager {\r\n  constructor(model) {\r\n    this.model = model;\r\n    this.list = thriller;\r\n    this.downloading = null;\r\n    this.index = 0;\r\n    this.downloadIndex = 1;\r\n    this.paused = false;\r\n  }\r\n\r\n  resetThriller() {\r\n    this.index = 0;\r\n    if (this.downloadIndex === 1) this.downloadNextMove();\r\n  }\r\n  downloadNextMove() {\r\n    this.downloadIndex++;\r\n    const nextMove = this.list[this.downloadIndex];\r\n    if (!nextMove) return;\r\n    this.downloading = nextMove;\r\n    this.model.worker.postMessage({ name: nextMove, type: \"thriller\" });\r\n  }\r\n  getNextMove() {\r\n    const next = this.list[this.index];\r\n    this.index++;\r\n    if (next === \"thrillerIdle\") {\r\n      if (this.downloadIndex > 2) {\r\n        //skip idle as next move is ready\r\n        return this.getNextMove();\r\n      } else {\r\n        //idle will be skipped as soon as the move is ready\r\n        this.paused = true;\r\n      }\r\n    }\r\n    return next;\r\n  }\r\n  get() {\r\n    this.model.danceManager.isDancing = true;\r\n    const nextMove = this.getNextMove();\r\n    if (!nextMove) {\r\n      //end reached\r\n      this.model.setChain(\"danceChain\");\r\n      return;\r\n    }\r\n    const actions = this.model.animationManager.actions;\r\n    if (actions[nextMove]) return nextMove;\r\n    this.paused = true;\r\n    return null;\r\n  }\r\n  onWorkerMessage(animation) {\r\n    this.model.animationManager.loadAnimation({\r\n      animation,\r\n      once: true,\r\n      blockUser: true,\r\n      name: this.downloading,\r\n    });\r\n    if (this.paused) {\r\n      this.model.animationManager.runNextAnimation();\r\n      this.paused = false;\r\n    }\r\n    this.downloadNextMove();\r\n  }\r\n}\r\n","import DanceManager from \"./danceManager\";\r\nimport RunningManager from \"./runningManager\";\r\nimport PositionManager from \"./positionManager\";\r\nimport MouseManager from \"./mouseManager\";\r\nimport JointManager from \"./jointManager\";\r\nimport ChainManager from \"./chainManager\";\r\nimport AnimationManager from \"./animationManager\";\r\nimport ThrillerManager from \"./thrillerManager\";\r\nimport { AnimationClip } from \"three\";\r\nconst worker = new Worker(\"./loader/loader.js\");\r\n\r\nclass ModelClass {\r\n  constructor() {\r\n    this.started = false;\r\n    this.isPlaying = false;\r\n    this.worker = worker;\r\n    this.positionManager = new PositionManager();\r\n    this.danceManager = new DanceManager(this);\r\n    this.runningManager = new RunningManager(this);\r\n    this.mouseManager = new MouseManager(this);\r\n    this.jointManager = new JointManager(this);\r\n    this.chainManager = new ChainManager(this);\r\n    this.animationManager = new AnimationManager(this);\r\n    this.thrillerManager = new ThrillerManager(this);\r\n    this.workerInit();\r\n  }\r\n  setIsPlaying(state) {\r\n    this.isPlaying = state;\r\n  }\r\n  workerInit() {\r\n    this.worker.onmessage = (e) => {\r\n      const { anim, type } = e.data;\r\n      const animation = AnimationClip.parse(anim);\r\n      if (type === \"dance\") {\r\n        this.danceManager.onWorkerMessage(animation);\r\n      } else if (type === \"running\") {\r\n        this.runningManager.onWorkerMessage(animation);\r\n      } else if (type === \"thriller\") {\r\n        this.thrillerManager.onWorkerMessage(animation);\r\n      }\r\n    };\r\n  }\r\n\r\n  moveJoints() {\r\n    this.jointManager.moveJoints();\r\n  }\r\n  fadeJoints() {\r\n    this.jointManager.fadeJoints();\r\n  }\r\n  wave() {\r\n    const wave = this.mouseManager.wave();\r\n    if (wave) this.setChain(\"waveChain\");\r\n  }\r\n  fall() {\r\n    const end = this.positionManager.fall();\r\n    if (end) this.animationManager.runNextAnimation();\r\n  }\r\n  run() {\r\n    const end = this.positionManager.run();\r\n    if (end) this.animationManager.runNextAnimation();\r\n  }\r\n\r\n  setChain(chain) {\r\n    const nextAction = this.chainManager.setChain(chain);\r\n    if (nextAction) this.animationManager.runNextAnimation();\r\n  }\r\n}\r\n\r\nconst model = new ModelClass();\r\n\r\nexport default model;\r\n","import { memo } from \"react\";\r\nimport { useLoader } from \"./hooks/useLoader\";\r\nimport { useFalling } from \"./hooks/useFalling\";\r\nimport { useRunning } from \"./hooks/useRunning\";\r\nimport { useClick } from \"./hooks/useClick\";\r\nimport { useTriggers } from \"./hooks/useTriggers\";\r\nimport { useStore } from \"../../Store/store\";\r\n\r\nexport default memo(function Model({ modelRef }) {\r\n  const onClick = useStore((state) => state.onClick);\r\n  const fbx = useLoader(modelRef);\r\n  useFalling();\r\n  useRunning();\r\n  useClick();\r\n  useTriggers();\r\n  return (\r\n    <group onClick={onClick} ref={modelRef} position={[0, 21.5, 0]}>\r\n      <primitive object={fbx} />;\r\n    </group>\r\n  );\r\n});\r\n","import { useFrame } from \"@react-three/fiber\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useStore } from \"../../../Store/store\";\r\nimport model from \"../classes/modelClass\";\r\n\r\nexport const useLoader = (modelRef) => {\r\n  const isPreLoaded = useStore((state) => state.isPreLoaded);\r\n  const setLoaded = useStore((state) => state.setLoaded);\r\n  const [fbx, setFbx] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (!isPreLoaded) return;\r\n    setFbx(model.animationManager.fbx);\r\n    model.positionManager.setPosController(modelRef.current.position);\r\n    setTimeout(() => {\r\n      setLoaded();\r\n    }, 2000);\r\n  }, [isPreLoaded, modelRef, setLoaded]);\r\n\r\n  useFrame(() => {\r\n    if (model.animationManager.mixer) {\r\n      model.animationManager.mixer.update(0.0167);\r\n      model.moveJoints();\r\n      model.fadeJoints();\r\n      model.wave();\r\n    }\r\n  });\r\n\r\n  return fbx;\r\n};\r\n","import { useFrame } from \"@react-three/fiber\";\r\nimport { useEffect } from \"react\";\r\nimport { useStore } from \"../../../Store/store\";\r\nimport model from \"../classes/modelClass\";\r\n\r\nexport const useFalling = () => {\r\n  const mode = useStore((state) => state.mode);\r\n  const isLoaded = useStore((state) => state.isLoaded);\r\n  const onInterfaceOpen = useStore((state) => state.onInterfaceOpen);\r\n  const setLightsOn = useStore((state) => state.setLightsOn);\r\n\r\n  useEffect(() => {\r\n    if (!mode || !isLoaded) return;\r\n    if (!model.started) {\r\n      model.setChain(\"fallingChain\");\r\n    } else {\r\n      onInterfaceOpen();\r\n      setLightsOn();\r\n    }\r\n  }, [mode, isLoaded, onInterfaceOpen, setLightsOn]);\r\n\r\n  useFrame(() => {\r\n    model.fall();\r\n  });\r\n};\r\n","import { useFrame } from \"@react-three/fiber\";\r\nimport model from \"../classes/modelClass\";\r\n\r\nexport const useRunning = () => {\r\n  useFrame(() => {\r\n    model.run();\r\n  });\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { useStore } from \"../../../Store/store\";\r\nimport model from \"../classes/modelClass\";\r\n\r\nexport const useClick = () => {\r\n  const click = useStore((state) => state.click);\r\n\r\n  useEffect(() => {\r\n    if (!click) return;\r\n    model.setChain(\"fallOverChain\");\r\n  }, [click]);\r\n};\r\n","import { useEffect, useRef } from \"react\";\r\nimport { useStore } from \"../../../Store/store\";\r\nimport model from \"../classes/modelClass\";\r\n\r\nexport const useTriggers = () => {\r\n  const isLoadedRef = useRef(false);\r\n  const isPlaying = useStore((state) => state.isPlaying);\r\n  const mood = useStore((state) => state.mood);\r\n  const playlistTracksOpen = useStore((state) => state.playlistTracksOpen);\r\n  const searchTracksOpen = useStore((state) => state.searchTracksOpen);\r\n  const isLoaded = useStore((state) => state.isLoaded);\r\n  const mode = useStore((state) => state.mode);\r\n\r\n  useEffect(() => {\r\n    if (mode === \"file\") {\r\n      model.setIsPlaying(true);\r\n      const pos = model.positionManager.pos;\r\n      if (pos === \"right\" || pos === \"transit\") {\r\n        model.setChain(\"leftDanceChain\");\r\n      }\r\n    }\r\n  }, [mode]);\r\n\r\n  useEffect(() => {\r\n    isLoadedRef.current = isLoaded;\r\n  }, [isLoaded]);\r\n\r\n  useEffect(() => {\r\n    model.setIsPlaying(isPlaying);\r\n    if (!isLoadedRef.current) return;\r\n    const pos = model.positionManager.pos;\r\n    const menuOpen = playlistTracksOpen || searchTracksOpen;\r\n    if (isPlaying) {\r\n      if (!menuOpen) {\r\n        if (pos === \"right\" || pos === \"transit\") {\r\n          model.setChain(\"leftDanceChain\");\r\n        } else model.setChain(\"danceChain\");\r\n      } else {\r\n        if (pos === \"left\" || pos === \"transit\") {\r\n          model.setChain(\"scaredDanceChain\");\r\n        } else model.setChain(\"danceChain\");\r\n      }\r\n    } else {\r\n      if (!menuOpen) {\r\n        if (pos === \"right\") model.setChain(\"idleChain\");\r\n        else if (pos === \"transit\") model.setChain(\"rightIdleChain\");\r\n        else model.setChain(\"angryChain\");\r\n      } else {\r\n        if (pos === \"left\" || pos === \"transit\") {\r\n          model.setChain(\"scaredIdleChain\");\r\n        } else model.setChain(\"idleChain\");\r\n      }\r\n    }\r\n  }, [isPlaying, playlistTracksOpen, searchTracksOpen]);\r\n\r\n  useEffect(() => {\r\n    if (mood === \"thriller\") {\r\n      model.danceManager.setMood(2);\r\n      const pos = model.positionManager.pos;\r\n      if (pos === \"right\" || pos === \"transit\") {\r\n        model.setChain(\"leftThrillerChain\");\r\n      } else model.setChain(\"thrillerChain\");\r\n      return;\r\n    }\r\n    model.danceManager.setMood(mood);\r\n    if (model.danceManager.isDancing) model.setChain(\"danceChain\");\r\n  }, [mood]);\r\n};\r\n","import {\r\n  AdditiveBlending,\r\n  Color,\r\n  LinearFilter,\r\n  MeshBasicMaterial,\r\n  RGBAFormat,\r\n  ShaderMaterial,\r\n  UniformsUtils,\r\n  Vector2,\r\n  Vector3,\r\n  WebGLRenderTarget,\r\n} from \"three\";\r\nimport {\r\n  Pass,\r\n  FullScreenQuad,\r\n} from \"three/examples/jsm/postprocessing/Pass.js\";\r\nimport { CopyShader } from \"three/examples/jsm/shaders/CopyShader.js\";\r\nimport { LuminosityHighPassShader } from \"three/examples/jsm/shaders/LuminosityHighPassShader.js\";\r\n\r\n/**\r\n * UnrealBloomPass is inspired by the bloom pass of Unreal Engine. It creates a\r\n * mip map chain of bloom textures and blurs them with different radii. Because\r\n * of the weighted combination of mips, and because larger blurs are done on\r\n * higher mips, this effect provides good quality and performance.\r\n *\r\n * Reference:\r\n * - https://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/Bloom/\r\n */\r\nclass UnrealBloomPass extends Pass {\r\n  constructor(resolution, strength, radius, threshold) {\r\n    super();\r\n\r\n    this.strength = strength !== undefined ? strength : 1;\r\n    this.radius = radius;\r\n    this.threshold = threshold;\r\n    this.resolution =\r\n      resolution !== undefined\r\n        ? new Vector2(resolution.x, resolution.y)\r\n        : new Vector2(256, 256);\r\n\r\n    // create color only once here, reuse it later inside the render function\r\n    this.clearColor = new Color(0, 0, 0);\r\n\r\n    // render targets\r\n    const pars = {\r\n      minFilter: LinearFilter,\r\n      magFilter: LinearFilter,\r\n      format: RGBAFormat,\r\n    };\r\n    this.renderTargetsHorizontal = [];\r\n    this.renderTargetsVertical = [];\r\n    this.nMips = 5;\r\n    let resx = Math.round(this.resolution.x / 2);\r\n    let resy = Math.round(this.resolution.y / 2);\r\n\r\n    this.renderTargetBright = new WebGLRenderTarget(resx, resy, pars);\r\n    this.renderTargetBright.texture.name = \"UnrealBloomPass.bright\";\r\n    this.renderTargetBright.texture.generateMipmaps = false;\r\n\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      const renderTargetHorizonal = new WebGLRenderTarget(resx, resy, pars);\r\n\r\n      renderTargetHorizonal.texture.name = \"UnrealBloomPass.h\" + i;\r\n      renderTargetHorizonal.texture.generateMipmaps = false;\r\n\r\n      this.renderTargetsHorizontal.push(renderTargetHorizonal);\r\n\r\n      const renderTargetVertical = new WebGLRenderTarget(resx, resy, pars);\r\n\r\n      renderTargetVertical.texture.name = \"UnrealBloomPass.v\" + i;\r\n      renderTargetVertical.texture.generateMipmaps = false;\r\n\r\n      this.renderTargetsVertical.push(renderTargetVertical);\r\n\r\n      resx = Math.round(resx / 2);\r\n\r\n      resy = Math.round(resy / 2);\r\n    }\r\n\r\n    // luminosity high pass material\r\n\r\n    if (LuminosityHighPassShader === undefined)\r\n      console.error(\"THREE.UnrealBloomPass relies on LuminosityHighPassShader\");\r\n\r\n    const highPassShader = LuminosityHighPassShader;\r\n    this.highPassUniforms = UniformsUtils.clone(highPassShader.uniforms);\r\n\r\n    this.highPassUniforms[\"luminosityThreshold\"].value = threshold;\r\n    this.highPassUniforms[\"smoothWidth\"].value = 0.01;\r\n\r\n    this.materialHighPassFilter = new ShaderMaterial({\r\n      uniforms: this.highPassUniforms,\r\n      vertexShader: highPassShader.vertexShader,\r\n      fragmentShader: highPassShader.fragmentShader,\r\n      defines: {},\r\n    });\r\n\r\n    // Gaussian Blur Materials\r\n    this.separableBlurMaterials = [];\r\n    const kernelSizeArray = [3, 5, 7, 9, 11];\r\n    resx = Math.round(this.resolution.x / 2);\r\n    resy = Math.round(this.resolution.y / 2);\r\n\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.separableBlurMaterials.push(\r\n        this.getSeperableBlurMaterial(kernelSizeArray[i])\r\n      );\r\n\r\n      this.separableBlurMaterials[i].uniforms[\"texSize\"].value = new Vector2(\r\n        resx,\r\n        resy\r\n      );\r\n\r\n      resx = Math.round(resx / 2);\r\n\r\n      resy = Math.round(resy / 2);\r\n    }\r\n\r\n    // Composite material\r\n    this.compositeMaterial = this.getCompositeMaterial(this.nMips);\r\n    this.compositeMaterial.uniforms[\"blurTexture1\"].value =\r\n      this.renderTargetsVertical[0].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture2\"].value =\r\n      this.renderTargetsVertical[1].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture3\"].value =\r\n      this.renderTargetsVertical[2].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture4\"].value =\r\n      this.renderTargetsVertical[3].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture5\"].value =\r\n      this.renderTargetsVertical[4].texture;\r\n    this.compositeMaterial.uniforms[\"bloomStrength\"].value = strength;\r\n    this.compositeMaterial.uniforms[\"bloomRadius\"].value = 0.1;\r\n    this.compositeMaterial.needsUpdate = true;\r\n\r\n    const bloomFactors = [1.0, 0.8, 0.6, 0.4, 0.2];\r\n    this.compositeMaterial.uniforms[\"bloomFactors\"].value = bloomFactors;\r\n    this.bloomTintColors = [\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n    ];\r\n    this.compositeMaterial.uniforms[\"bloomTintColors\"].value =\r\n      this.bloomTintColors;\r\n\r\n    // copy material\r\n    if (CopyShader === undefined) {\r\n      console.error(\"THREE.UnrealBloomPass relies on CopyShader\");\r\n    }\r\n\r\n    const copyShader = CopyShader;\r\n\r\n    this.copyUniforms = UniformsUtils.clone(copyShader.uniforms);\r\n    this.copyUniforms[\"opacity\"].value = 1.0;\r\n\r\n    this.materialCopy = new ShaderMaterial({\r\n      uniforms: this.copyUniforms,\r\n      vertexShader: copyShader.vertexShader,\r\n      fragmentShader: copyShader.fragmentShader,\r\n      blending: AdditiveBlending,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      transparent: true,\r\n    });\r\n\r\n    this.enabled = true;\r\n    this.needsSwap = false;\r\n\r\n    this._oldClearColor = new Color();\r\n    this.oldClearAlpha = 1;\r\n\r\n    this.basic = new MeshBasicMaterial();\r\n\r\n    this.fsQuad = new FullScreenQuad(null);\r\n  }\r\n\r\n  dispose() {\r\n    for (let i = 0; i < this.renderTargetsHorizontal.length; i++) {\r\n      this.renderTargetsHorizontal[i].dispose();\r\n    }\r\n\r\n    for (let i = 0; i < this.renderTargetsVertical.length; i++) {\r\n      this.renderTargetsVertical[i].dispose();\r\n    }\r\n\r\n    this.renderTargetBright.dispose();\r\n  }\r\n\r\n  setSize(width, height) {\r\n    let resx = Math.round(width / 2);\r\n    let resy = Math.round(height / 2);\r\n\r\n    this.renderTargetBright.setSize(resx, resy);\r\n\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.renderTargetsHorizontal[i].setSize(resx, resy);\r\n      this.renderTargetsVertical[i].setSize(resx, resy);\r\n\r\n      this.separableBlurMaterials[i].uniforms[\"texSize\"].value = new Vector2(\r\n        resx,\r\n        resy\r\n      );\r\n\r\n      resx = Math.round(resx / 2);\r\n      resy = Math.round(resy / 2);\r\n    }\r\n  }\r\n\r\n  render(renderer, writeBuffer, readBuffer, deltaTime, maskActive) {\r\n    renderer.getClearColor(this._oldClearColor);\r\n    this.oldClearAlpha = renderer.getClearAlpha();\r\n    const oldAutoClear = renderer.autoClear;\r\n    renderer.autoClear = false;\r\n\r\n    renderer.setClearColor(this.clearColor, 0);\r\n\r\n    if (maskActive) renderer.state.buffers.stencil.setTest(false);\r\n\r\n    // Render input to screen\r\n\r\n    if (this.renderToScreen) {\r\n      this.fsQuad.material = this.basic;\r\n      this.basic.map = readBuffer.texture;\r\n\r\n      renderer.setRenderTarget(null);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n    }\r\n\r\n    // 1. Extract Bright Areas\r\n\r\n    this.highPassUniforms[\"tDiffuse\"].value = readBuffer.texture;\r\n    this.highPassUniforms[\"luminosityThreshold\"].value = this.threshold;\r\n    this.fsQuad.material = this.materialHighPassFilter;\r\n\r\n    renderer.setRenderTarget(this.renderTargetBright);\r\n    renderer.clear();\r\n    this.fsQuad.render(renderer);\r\n\r\n    // 2. Blur All the mips progressively\r\n\r\n    let inputRenderTarget = this.renderTargetBright;\r\n\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.fsQuad.material = this.separableBlurMaterials[i];\r\n\r\n      this.separableBlurMaterials[i].uniforms[\"colorTexture\"].value =\r\n        inputRenderTarget.texture;\r\n      this.separableBlurMaterials[i].uniforms[\"direction\"].value =\r\n        UnrealBloomPass.BlurDirectionX;\r\n      renderer.setRenderTarget(this.renderTargetsHorizontal[i]);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n\r\n      this.separableBlurMaterials[i].uniforms[\"colorTexture\"].value =\r\n        this.renderTargetsHorizontal[i].texture;\r\n      this.separableBlurMaterials[i].uniforms[\"direction\"].value =\r\n        UnrealBloomPass.BlurDirectionY;\r\n      renderer.setRenderTarget(this.renderTargetsVertical[i]);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n\r\n      inputRenderTarget = this.renderTargetsVertical[i];\r\n    }\r\n\r\n    // Composite All the mips\r\n\r\n    this.fsQuad.material = this.compositeMaterial;\r\n    this.compositeMaterial.uniforms[\"bloomStrength\"].value = this.strength;\r\n    this.compositeMaterial.uniforms[\"bloomRadius\"].value = this.radius;\r\n    this.compositeMaterial.uniforms[\"bloomTintColors\"].value =\r\n      this.bloomTintColors;\r\n\r\n    renderer.setRenderTarget(this.renderTargetsHorizontal[0]);\r\n    renderer.clear();\r\n    this.fsQuad.render(renderer);\r\n\r\n    // Blend it additively over the input texture\r\n\r\n    this.fsQuad.material = this.materialCopy;\r\n    this.copyUniforms[\"tDiffuse\"].value =\r\n      this.renderTargetsHorizontal[0].texture;\r\n\r\n    if (maskActive) renderer.state.buffers.stencil.setTest(true);\r\n\r\n    if (this.renderToScreen) {\r\n      renderer.setRenderTarget(null);\r\n      this.fsQuad.render(renderer);\r\n    } else {\r\n      renderer.setRenderTarget(readBuffer);\r\n      this.fsQuad.render(renderer);\r\n    }\r\n\r\n    // Restore renderer settings\r\n\r\n    renderer.setClearColor(this._oldClearColor, this.oldClearAlpha);\r\n    renderer.autoClear = oldAutoClear;\r\n  }\r\n\r\n  getSeperableBlurMaterial(kernelRadius) {\r\n    return new ShaderMaterial({\r\n      defines: {\r\n        KERNEL_RADIUS: kernelRadius,\r\n        SIGMA: kernelRadius,\r\n      },\r\n\r\n      uniforms: {\r\n        colorTexture: { value: null },\r\n        texSize: { value: new Vector2(0.5, 0.5) },\r\n        direction: { value: new Vector2(0.5, 0.5) },\r\n      },\r\n\r\n      vertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n      fragmentShader: `#include <common>\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tuniform sampler2D colorTexture;\r\n\t\t\t\tuniform vec2 texSize;\r\n\t\t\t\tuniform vec2 direction;\r\n\r\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\r\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\r\n\t\t\t\t}\r\n        void main() {\r\n          vec2 invSize = 1.0 / texSize;\r\n          float fSigma = float(SIGMA);\r\n          float weightSum = gaussianPdf(0.0, fSigma);\r\n          float alphaSum = 0.0;\r\n          vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\r\n          for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\r\n            float x = float(i);\r\n            float w = gaussianPdf(x, fSigma);\r\n            vec2 uvOffset = direction * invSize * x;\r\n            vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\r\n            vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\r\n            diffuseSum += (sample1.rgb + sample2.rgb) * w;\r\n            alphaSum += (sample1.a + sample2.a) * w;\r\n            weightSum += 2.0 * w;\r\n          }\r\n          gl_FragColor = vec4(diffuseSum/weightSum, alphaSum/weightSum);\r\n        }`,\r\n    });\r\n  }\r\n\r\n  getCompositeMaterial(nMips) {\r\n    return new ShaderMaterial({\r\n      defines: {\r\n        NUM_MIPS: nMips,\r\n      },\r\n\r\n      uniforms: {\r\n        blurTexture1: { value: null },\r\n        blurTexture2: { value: null },\r\n        blurTexture3: { value: null },\r\n        blurTexture4: { value: null },\r\n        blurTexture5: { value: null },\r\n        dirtTexture: { value: null },\r\n        bloomStrength: { value: 1.0 },\r\n        bloomFactors: { value: null },\r\n        bloomTintColors: { value: null },\r\n        bloomRadius: { value: 0.0 },\r\n      },\r\n\r\n      vertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n      fragmentShader: `varying vec2 vUv;\r\n\t\t\t\tuniform sampler2D blurTexture1;\r\n\t\t\t\tuniform sampler2D blurTexture2;\r\n\t\t\t\tuniform sampler2D blurTexture3;\r\n\t\t\t\tuniform sampler2D blurTexture4;\r\n\t\t\t\tuniform sampler2D blurTexture5;\r\n\t\t\t\tuniform sampler2D dirtTexture;\r\n\t\t\t\tuniform float bloomStrength;\r\n\t\t\t\tuniform float bloomRadius;\r\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\r\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\r\n\r\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\r\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\r\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\r\n\t\t\t\t}`,\r\n    });\r\n  }\r\n}\r\n\r\nUnrealBloomPass.BlurDirectionX = new Vector2(1.0, 0.0);\r\nUnrealBloomPass.BlurDirectionY = new Vector2(0.0, 1.0);\r\n\r\nexport { UnrealBloomPass };\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { extend, useThree, useFrame } from \"@react-three/fiber\";\r\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\r\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\r\nimport { UnrealBloomPass } from \"./CustomBloom\";\r\n\r\nextend({ EffectComposer, RenderPass, UnrealBloomPass });\r\n\r\nexport default function Effects({ children, bloomRef }) {\r\n  const composer = useRef();\r\n  const { gl, size, camera } = useThree();\r\n  const [scene, setScene] = useState();\r\n  useEffect(\r\n    () => void composer.current.setSize(size.width, size.height),\r\n    [size]\r\n  );\r\n  useFrame(() => {\r\n    if (!scene || !composer.current) return;\r\n    composer.current.render();\r\n  }, 1);\r\n\r\n  const bloom = {\r\n    strength: 0,\r\n    radius: 0.5,\r\n    threshold: 0.1,\r\n  };\r\n  return (\r\n    <>\r\n      <scene ref={setScene}>{children}</scene>\r\n      <effectComposer ref={composer} args={[gl]}>\r\n        <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\r\n        <unrealBloomPass\r\n          ref={bloomRef}\r\n          attachArray=\"passes\"\r\n          args={[undefined, bloom.strength, bloom.radius, bloom.threshold]}\r\n        />\r\n      </effectComposer>\r\n    </>\r\n  );\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport { useThree, useFrame } from \"@react-three/fiber\";\r\n\r\nexport default function NoEffects({ children }) {\r\n  const scene = useRef();\r\n  const { gl, camera } = useThree();\r\n  useFrame(() => {\r\n    gl.autoClear = false;\r\n    gl.clearDepth();\r\n    gl.render(scene.current, camera);\r\n  }, 2);\r\n\r\n  return <scene ref={scene}>{children}</scene>;\r\n}\r\n","export default function Ring() {\r\n  return (\r\n    <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -20, 0]}>\r\n      <torusBufferGeometry args={[76, 1, 3, 36, Math.PI]} />\r\n      <meshBasicMaterial color=\"chartreuse\" />\r\n    </mesh>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/djglb.de0b3ccf.glb\";","import React, { useRef } from \"react\";\r\nimport { useGLTF } from \"@react-three/drei\";\r\nimport djglb from \"./djglb.glb\";\r\n\r\nexport default function Table() {\r\n  const group = useRef();\r\n  const { nodes } = useGLTF(djglb);\r\n  return (\r\n    <group\r\n      ref={group}\r\n      scale={[0.026, 0.026, 0.026]}\r\n      position={[56, -20, 5]}\r\n      rotation={[0, 2.8, 0]}\r\n      dispose={null}\r\n    >\r\n      <mesh\r\n        castShadow\r\n        receiveShadow\r\n        geometry={nodes.mesh_0.geometry}\r\n        material={nodes.mesh_0.material}\r\n        position={[-0.12, 185.8, -29.12]}\r\n        rotation={[-Math.PI / 2, 0, 0]}\r\n      />\r\n    </group>\r\n  );\r\n}\r\n\r\nuseGLTF.preload(djglb);\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport * as React from \"react\";\r\nimport { Vector3, CylinderGeometry, Matrix4 } from \"three\";\r\nimport { useThree, useFrame } from \"@react-three/fiber\";\r\nimport { SpotLightMaterial } from \"@react-three/drei/materials/SpotLightMaterial\";\r\n\r\nconst vec = new Vector3();\r\nconst SpotLight = /*#__PURE__*/ React.forwardRef(\r\n  (\r\n    {\r\n      depthBuffer,\r\n      color = \"white\",\r\n      distance = 5,\r\n      angle = 0.15,\r\n      attenuation = 5,\r\n      anglePower = 5,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const mesh = React.useRef(null);\r\n    const size = useThree((state) => state.size);\r\n    const camera = useThree((state) => state.camera);\r\n    const dpr = useThree((state) => state.viewport.dpr);\r\n    const [material] = React.useState(() => new SpotLightMaterial());\r\n    useFrame(() => {\r\n      material.uniforms.spotPosition.value.copy(\r\n        mesh.current.getWorldPosition(vec)\r\n      );\r\n      mesh.current.lookAt(mesh.current.parent.target.position);\r\n    });\r\n    const geom = React.useMemo(() => {\r\n      const geometry = new CylinderGeometry(\r\n        0.1,\r\n        angle * 50,\r\n        distance,\r\n        128,\r\n        64,\r\n        true\r\n      );\r\n      geometry.applyMatrix4(new Matrix4().makeTranslation(0, -distance / 2, 0));\r\n      geometry.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2));\r\n      return geometry;\r\n    }, [angle, distance]);\r\n    return /*#__PURE__*/ React.createElement(\r\n      \"spotLight\",\r\n      _extends(\r\n        {\r\n          ref: ref,\r\n          angle: angle,\r\n          color: color,\r\n          distance: distance,\r\n        },\r\n        props\r\n      ),\r\n      /*#__PURE__*/ React.createElement(\r\n        \"mesh\",\r\n        {\r\n          ref: mesh,\r\n          geometry: geom,\r\n        },\r\n        /*#__PURE__*/ React.createElement(\"primitive\", {\r\n          object: material,\r\n          attach: \"material\",\r\n          \"uniforms-lightColor-value\": color,\r\n          \"uniforms-attenuation-value\": attenuation,\r\n          \"uniforms-anglePower-value\": anglePower,\r\n          \"uniforms-depth-value\": depthBuffer,\r\n          \"uniforms-cameraNear-value\": camera.near,\r\n          \"uniforms-cameraFar-value\": camera.far,\r\n          \"uniforms-resolution-value\": depthBuffer\r\n            ? [size.width * dpr, size.height * dpr]\r\n            : [0, 0],\r\n        })\r\n      )\r\n    );\r\n  }\r\n);\r\n\r\nexport { SpotLight };\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { useStore } from \"../../Store/store\";\r\nimport { SpotLight } from \"./SpotLight/SpotLight\";\r\n\r\nexport default function Lighting({ modelRef, bloomRef }) {\r\n  const lightsOn = useStore((state) => state.lightsOn);\r\n  const lightRef = useRef(0);\r\n  const [angle, setAngle] = useState(360);\r\n\r\n  useEffect(() => {\r\n    if (lightsOn) {\r\n      lightRef.current.intensity = 5;\r\n      lightRef.current.angle = 0.8;\r\n      bloomRef.current.strength = 4;\r\n      setAngle(0.8);\r\n    } else {\r\n      lightRef.current.intensity = 0;\r\n      lightRef.current.angle = 360;\r\n      bloomRef.current.strength = 0;\r\n      setAngle(360);\r\n    }\r\n  }, [lightsOn, bloomRef]);\r\n\r\n  return (\r\n    <>\r\n      <ambientLight intensity={0.3} />\r\n      <SpotLight\r\n        ref={lightRef}\r\n        intensity={0}\r\n        position={[0, 40, 0]}\r\n        angle={angle}\r\n        penumbra={1}\r\n        distance={150}\r\n        attenuation={75}\r\n        anglePower={5}\r\n        target={modelRef.current}\r\n        color=\"white\"\r\n        castShadow\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { useFrame, useThree } from \"@react-three/fiber\";\r\nimport model from \"../Model/classes/modelClass\";\r\n\r\nconst mouseRangeX = 20;\r\nconst mouseRangeY = 20;\r\nexport default function Rig({ mouse }) {\r\n  const { camera } = useThree();\r\n  useFrame(() => {\r\n    camera.position.x +=\r\n      (mouse.current[0] * mouseRangeX - camera.position.x) * 0.025;\r\n    camera.position.y +=\r\n      (-mouse.current[1] * mouseRangeY - camera.position.y) * 0.025;\r\n    camera.lookAt(0, 0, 0);\r\n\r\n    model.mouseManager.setMouse(mouse.current);\r\n  });\r\n  return null;\r\n}\r\n","import { useRef } from \"react\";\r\nimport { Canvas } from \"@react-three/fiber\";\r\n// import { OrbitControls, Stats } from \"@react-three/drei\";\r\nimport Floor from \"./Floor/Floor\";\r\nimport Text from \"./Text/Text\";\r\nimport Model from \"./Model/Model\";\r\nimport Effects from \"./Effects/Effects\";\r\nimport NoEffects from \"./NoEffects/NoEffects\";\r\nimport Ring from \"./Ring/Ring\";\r\nimport Table from \"./Table/Table\";\r\nimport Lighting from \"./Lighting/Lighting\";\r\nimport Rig from \"./Rig/Rig\";\r\n\r\nexport default function Main({ mouse }) {\r\n  const bloomRef = useRef();\r\n  const modelRef = useRef();\r\n\r\n  return (\r\n    <Canvas\r\n      className=\"canvas canvasMain\"\r\n      camera={{\r\n        position: [0, 0, 100],\r\n        fov: 40,\r\n        far: 100000,\r\n      }}\r\n      shadows\r\n    >\r\n      <NoEffects>\r\n        <Model modelRef={modelRef} />\r\n        <Lighting modelRef={modelRef} bloomRef={bloomRef} />\r\n        <Floor />\r\n        <Table />\r\n      </NoEffects>\r\n      <Effects bloomRef={bloomRef}>\r\n        <Text />\r\n        <Ring />\r\n      </Effects>\r\n      <Rig mouse={mouse} />\r\n      {/* <Stats className=\"stats\" /> */}\r\n      {/* <OrbitControls /> */}\r\n    </Canvas>\r\n  );\r\n}\r\n","import { useCallback, useRef } from \"react\";\r\nimport { useStore } from \"../../Store/store\";\r\n\r\nexport const useMouseInteraction = () => {\r\n  const mode = useStore((state) => state.mode);\r\n  const mouse = useRef([0, 0]);\r\n\r\n  const onMouseMove = useCallback(\r\n    (e) => {\r\n      if (!mode) return;\r\n      mouse.current = [\r\n        e.clientX / window.innerWidth - 0.5,\r\n        e.clientY / window.innerHeight - 0.5,\r\n      ];\r\n    },\r\n    [mode]\r\n  );\r\n\r\n  return [mouse, onMouseMove];\r\n};\r\n","import styled, { keyframes } from \"styled-components\";\r\n\r\nconst spin = keyframes`\r\nfrom {\r\n  transform: rotate3d(.5,.5,.5, 360deg);\r\n}\r\nto{\r\n  transform: rotate3d(0deg);\r\n}\r\n`;\r\n\r\nexport const Container = styled.div`\r\n  position: fixed;\r\n  z-index: 999;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: radial-gradient(circle at top, #034412, #000000);\r\n`;\r\nconst Circle = styled.div`\r\n  width: 33vh;\r\n  height: 33vh;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nexport const Text = styled.div`\r\n  color: white;\r\n  font-size: 2rem;\r\n`;\r\nexport const Border1 = styled(Circle)`\r\n  padding: 3px;\r\n  box-shadow: inset -0 0 75px 0px rgba(83, 198, 251, 0.7);\r\n  border: 3px solid rgb(83, 198, 251);\r\n  animation: ${spin} 1.8s linear 0s infinite;\r\n`;\r\n\r\nexport const Border2 = styled(Circle)`\r\n  padding: 3px;\r\n  box-shadow: inset -0 0 75px 0px rgba(2, 238, 120, 0.7);\r\n  border: 3px solid rgb(2, 238, 120);\r\n\r\n  animation: ${spin} 2.5s linear 0s infinite;\r\n`;\r\n","import { useProgress } from \"@react-three/drei\";\r\nimport { useEffect } from \"react\";\r\nimport { useStore } from \"../Store/store\";\r\nimport { Border1, Border2, Container, Text } from \"./LoaderStyle\";\r\n\r\nexport default function Loader() {\r\n  const isLoaded = useStore((state) => state.isLoaded);\r\n  const setPreLoaded = useStore((state) => state.setPreLoaded);\r\n  const { active, progress } = useProgress();\r\n\r\n  useEffect(() => {\r\n    if (active === false && progress > 0) {\r\n      setPreLoaded();\r\n    }\r\n  }, [progress, active, setPreLoaded]);\r\n\r\n  return (\r\n    <>\r\n      {!isLoaded && (\r\n        <Container>\r\n          <Text>{Math.round(progress)}%</Text>\r\n          <Border1 />\r\n          <Border2 />\r\n        </Container>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","export const colors = {\r\n  spotifyLightGreen: \"rgb(30,215,96)\",\r\n  spotifyGreen: \"#1db954\",\r\n  topShadow: \"#25362c\",\r\n  bottomShadow: \"#2b6d42\",\r\n  primary: \"rgb(218, 218, 218)\",\r\n  secondary: \"rgb(168, 168, 168)\",\r\n  primaryBackground: \"rgb(23, 23, 23)\",\r\n  secondaryBackground: \"rgb(45, 45, 45)\",\r\n};\r\n","import styled from \"styled-components\";\r\nimport LogoutIcon from \"@mui/icons-material/Logout\";\r\nimport { colors } from \"../../colors\";\r\n\r\nexport const Container = styled.div`\r\n  height: 50px;\r\n  width: 50px;\r\n  position: fixed;\r\n  top: 10px;\r\n  right: 10px;\r\n  color: white;\r\n  z-index: 7;\r\n`;\r\nexport const StyledLogoutIcon = styled(LogoutIcon)`\r\n  color: ${colors.primary};\r\n`;\r\n","import { IconButton } from \"@mui/material\";\r\nimport model from \"../Main/Model/classes/modelClass\";\r\nimport { useStore } from \"../Store/store\";\r\nimport { Container, StyledLogoutIcon } from \"./LogoutStyle\";\r\n\r\nexport default function Logout() {\r\n  const mode = useStore((state) => state.mode);\r\n  const logout = useStore((state) => state.logout);\r\n  const setMode = useStore((state) => state.setMode);\r\n  const setFile = useStore((state) => state.setFile);\r\n\r\n  const onClick = () => {\r\n    logout();\r\n    setMode(null);\r\n    setFile(null);\r\n    const pos = model.positionManager.pos;\r\n    if (pos === \"left\" || pos === \"transit\") {\r\n      model.setChain(\"rightIdleChain\");\r\n    } else model.setChain(\"idleChain\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {mode !== null && (\r\n        <Container>\r\n          <IconButton color=\"success\" onClick={onClick}>\r\n            <StyledLogoutIcon fontSize=\"large\" />\r\n          </IconButton>\r\n        </Container>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport default function Dots() {\r\n  const [dots, setDots] = useState(\"...\");\r\n\r\n  useEffect(() => {\r\n    let t;\r\n    const update = () => {\r\n      t = setTimeout(() => {\r\n        setDots((dots) => {\r\n          if (dots.length === 3) return \"\";\r\n          if (dots.length === 0) return \".\";\r\n          if (dots.length === 1) return \"..\";\r\n          if (dots.length === 2) return \"...\";\r\n        });\r\n        update();\r\n      }, 500);\r\n    };\r\n    update();\r\n    return () => {\r\n      clearTimeout(t);\r\n    };\r\n  }, []);\r\n  return <>{dots}</>;\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Status = styled.div`\r\n  width: 130px;\r\n  color: ${({ error }) => (error ? \"rgb(247,49,49)\" : \"\")};\r\n  font-weight: 700;\r\n  height: 45px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n`;\r\n\r\nexport const AccessRequired = styled.div`\r\n  font-size: 1rem;\r\n  color: white;\r\n  padding: 0 25px;\r\n  text-align: center;\r\n`;\r\n","import styled from \"styled-components\";\r\nimport { colors } from \"../../colors\";\r\n\r\nexport const WelcomeButtonsContainer = styled.div`\r\n  position: fixed;\r\n  top: 50px;\r\n  left: 0;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  z-index: 4;\r\n`;\r\nexport const Button = styled.div`\r\n  background-color: ${colors.spotifyGreen};\r\n  width: 200px;\r\n  height: 50px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.2rem;\r\n  border-radius: 25px;\r\n  cursor: pointer;\r\n  box-shadow: 0 0 6px 0px white;\r\n  user-select: none;\r\n  transition: background-position 0.2s ease-in-out;\r\n  background-image: linear-gradient(to top, white 50%, transparent 50%);\r\n  background-size: 100% 200%;\r\n  background-position: top;\r\n  &:hover {\r\n    background-position: bottom;\r\n    color: ${colors.spotifyGreen};\r\n    font-weight: 600;\r\n  }\r\n`;\r\nexport const Or = styled.div`\r\n  font-size: 1.2rem;\r\n  margin-bottom: 45px;\r\n`;\r\n\r\nexport const Input = styled.input`\r\n  position: fixed;\r\n  left: 9999px;\r\n`;\r\n","import Dots from \"./Dots\";\r\nimport { Status, AccessRequired } from \"./LoginStyle\";\r\nimport { useLogin } from \"./useLogin\";\r\nimport { spotifyApi } from \"../../Api/SpotifyApi\";\r\nimport { useEffect } from \"react\";\r\nimport { useStore } from \"../../Store/store\";\r\nimport { Button } from \"../WelcomeButtonsStyle\";\r\n\r\nexport default function Login() {\r\n  const loggedIn = useStore((state) => state.loggedIn);\r\n  const accessRequired = useStore((state) => state.accessRequired);\r\n  const login = useStore((state) => state.login);\r\n  const logout = useStore((state) => state.logout);\r\n  const setMode = useStore((state) => state.setMode);\r\n\r\n  const [initiateSpotifyLogin, inProgress, error] = useLogin();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const isAuth = await spotifyApi.checkAuthentication();\r\n      if (isAuth) {\r\n        login();\r\n        setMode(\"spotify\");\r\n      } else logout();\r\n    })();\r\n  }, [login, logout, setMode]);\r\n\r\n  return (\r\n    <>\r\n      {loggedIn === false && (\r\n        <>\r\n          <Button onClick={initiateSpotifyLogin}>Login</Button>\r\n          <Status error={error}>\r\n            {inProgress ? (\r\n              <>\r\n                Authenticating <Dots />\r\n              </>\r\n            ) : (\r\n              error && <>Error Logging In</>\r\n            )}\r\n          </Status>\r\n          {accessRequired && (\r\n            <AccessRequired>\r\n              Sorry, your account needs to be manually authorised. Please get in\r\n              touch.\r\n            </AccessRequired>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\n\r\nimport { spotifyApi } from \"../../Api/SpotifyApi\";\r\nimport { useStore } from \"../../Store/store\";\r\n\r\nexport const useLogin = () => {\r\n  const login = useStore((state) => state.login);\r\n  const setMode = useStore((state) => state.setMode);\r\n\r\n  const [inProgress, setInProgress] = useState(false);\r\n  const [error, setError] = useState(false);\r\n\r\n  const initiateSpotifyLogin = async () => {\r\n    setInProgress(true);\r\n    setError(false);\r\n\r\n    const popup = await spotifyApi.loginRedirect();\r\n\r\n    const onResponse = async (payload) => {\r\n      // check state\r\n      const success = await spotifyApi.requestTokens(payload);\r\n      setInProgress(false);\r\n      if (success) {\r\n        const loggedIn = await spotifyApi.login();\r\n        if (loggedIn) {\r\n          login();\r\n          setMode(\"spotify\");\r\n        }\r\n      }\r\n      setError(true);\r\n    };\r\n\r\n    window.spotifyCallback = (payload) => {\r\n      popup.close();\r\n      onResponse(payload);\r\n    };\r\n  };\r\n\r\n  return [initiateSpotifyLogin, inProgress, error];\r\n};\r\n","import { useRef } from \"react\";\r\nimport { useStore } from \"../../Store/store\";\r\nimport { Button, Input } from \"../WelcomeButtonsStyle\";\r\n\r\nexport default function SelectSong() {\r\n  const setFile = useStore((state) => state.setFile);\r\n  const setMode = useStore((state) => state.setMode);\r\n\r\n  const inputRef = useRef();\r\n  const onClick = () => {\r\n    inputRef.current.click();\r\n  };\r\n  const onChangeHandler = (e) => {\r\n    if (!e.target.files[0]) return;\r\n    const file = URL.createObjectURL(e.target.files[0]);\r\n    setFile(file);\r\n    setMode(\"file\");\r\n  };\r\n  return (\r\n    <Button onClick={onClick}>\r\n      Select Song\r\n      <Input\r\n        ref={inputRef}\r\n        type=\"file\"\r\n        name=\"file\"\r\n        accept=\"audio/*\"\r\n        onChange={onChangeHandler}\r\n      ></Input>\r\n    </Button>\r\n  );\r\n}\r\n","import Login from \"./Login/Login\";\r\nimport { useStore } from \"../Store/store\";\r\nimport { Or, WelcomeButtonsContainer } from \"./WelcomeButtonsStyle\";\r\nimport SelectSong from \"./SelectSong/SelectSong\";\r\n\r\nexport default function WelcomeButtons() {\r\n  const mode = useStore((state) => state.mode);\r\n  return (\r\n    <>\r\n      {mode === null && (\r\n        <WelcomeButtonsContainer>\r\n          <Login />\r\n          <Or>Or</Or>\r\n          <SelectSong />\r\n        </WelcomeButtonsContainer>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useMemo, useRef } from \"react\";\r\nimport { _VS } from \"./shaders/vs\";\r\nimport { _FS } from \"./shaders/fs\";\r\nimport { useFrame } from \"@react-three/fiber\";\r\n\r\nexport default function Shader({ analyzer }) {\r\n  const shader = useRef();\r\n\r\n  const uniforms = useMemo(() => {\r\n    return {\r\n      resolution: { value: 175 },\r\n      data: { value: Array(20).fill(0) },\r\n      time: { value: 0 },\r\n    };\r\n  }, []);\r\n\r\n  const data = useRef();\r\n\r\n  useFrame((state) => {\r\n    if (analyzer.current) {\r\n      data.current = analyzer.current.getFrequencyData();\r\n      const uniform = [];\r\n      let leftCounter = 9;\r\n      let rightCounter = 10;\r\n      for (let i = 0; i < 20; i++) {\r\n        let index;\r\n        if (i % 2 === 0) {\r\n          index = leftCounter;\r\n          leftCounter--;\r\n        } else {\r\n          index = rightCounter;\r\n          rightCounter++;\r\n        }\r\n        uniform[index] = data.current[i * 4] / 255;\r\n      }\r\n      shader.current.uniforms.data.value = uniform;\r\n      shader.current.uniforms.time.value = state.clock.elapsedTime;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <mesh position={[0, 11, -100]}>\r\n      <planeBufferGeometry args={[340, 130]} />\r\n      <shaderMaterial\r\n        ref={shader}\r\n        uniforms={uniforms}\r\n        vertexShader={_VS}\r\n        fragmentShader={_FS}\r\n      />\r\n    </mesh>\r\n  );\r\n}\r\n","export const _VS = `\r\nvarying vec2 vPosition;\r\nvoid main() {\r\n  vPosition = position.xy;\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n}\r\n`;\r\n","export const _FS = `\r\n\r\nvarying vec2 vPosition;\r\n\r\nconst int dots = 20; \r\nconst float radius = .2; \r\nconst float brightness = 0.03;\r\n\r\nuniform float resolution;\r\nuniform float data[ 20 ];\r\nuniform float time;\r\n\r\n\r\n//convert HSV to RGB\r\nvec3 hsv2rgb(vec3 c){\r\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\r\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\r\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\r\n}\r\n\t\t\r\nvoid main() {\r\n\t\r\n\tvec2 p=vPosition.xy / resolution;\r\n  p.x += 0.5;\r\n  p.y += 0.5;\r\n  vec3 c=vec3(0,0,0); //background color\r\n\t\t\r\n    for(int i=0;i<dots; i++){\r\n   \r\n      float vol =  data[i];\r\n      float b = vol * vol * brightness;\r\n     \r\n      float x = float(i)/float(dots);\r\n      float y = 0.9;\r\n      vec2 o = vec2(x,y);\r\n       \r\n      vec3 dotCol = hsv2rgb(vec3((float(i) + time)/float(dots),1.,1.0));\r\n       \r\n      float dist1 = clamp(length(p-o),0.05,1.);\r\n      c += b/dist1*dotCol;\r\n    }\r\n  gl_FragColor = vec4(c,1); \r\n}\r\n\r\n`;\r\n","import { useThree } from \"@react-three/fiber\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useStore } from \"../../Store/store\";\r\nimport { AudioListener, Audio, AudioLoader, AudioAnalyser } from \"three\";\r\nimport Shader from \"./Shader\";\r\n\r\nconst audioLoader = new AudioLoader();\r\nconst listener = new AudioListener();\r\nconst audio = new Audio(listener);\r\n\r\nexport default function AudioAnalysis() {\r\n  const file = useStore((state) => state.file);\r\n  const sound = useRef();\r\n  const analyzer = useRef();\r\n  const { camera } = useThree();\r\n\r\n  useEffect(() => {\r\n    camera.add(listener);\r\n    sound.current = audio;\r\n    analyzer.current = new AudioAnalyser(sound.current, 256);\r\n    return () => {\r\n      sound.current.stop();\r\n    };\r\n  }, [camera]);\r\n\r\n  useEffect(() => {\r\n    if (!file) return;\r\n    audioLoader.load(file, function (buffer) {\r\n      sound.current.setBuffer(buffer);\r\n      sound.current.setLoop(true);\r\n      sound.current.setVolume(1);\r\n      sound.current.play();\r\n    });\r\n  }, [file]);\r\n\r\n  return <Shader analyzer={analyzer} />;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/danceIcon.ca173d16.png\";","import styled from \"styled-components\";\r\nimport { colors } from \"../../../../colors\";\r\n\r\nexport const StyledMoodButton = styled.div`\r\n  cursor: pointer;\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n  margin: 4px 0;\r\n  color: ${({ selected }) => (selected ? colors.spotifyGreen : colors.primary)};\r\n  &:hover {\r\n    color: ${({ selected }) => (selected ? colors.spotifyGreen : \"white\")};\r\n  }\r\n`;\r\n\r\nexport const Container = styled.div`\r\n  height: 50px;\r\n  width: 50px;\r\n  position: fixed;\r\n  top: 10px;\r\n  right: 10px;\r\n  color: white;\r\n  z-index: 7;\r\n`;\r\n","import { useStore } from \"../../../Store/store\";\r\nimport { StyledMoodButton } from \"./MootButtonStyle\";\r\n\r\nconst map = { 1: \"Slow\", 2: \"Med\", 3: \"Fast\" };\r\nexport default function MoodButton({ mood, selected }) {\r\n  const setMood = useStore((state) => state.setMood);\r\n\r\n  const onClick = () => {\r\n    setMood(mood);\r\n  };\r\n\r\n  return (\r\n    <StyledMoodButton selected={selected} onClick={onClick}>\r\n      {map[mood]}\r\n    </StyledMoodButton>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  position: fixed;\r\n  top: 18px;\r\n  left: 18px;\r\n  z-index: 10;\r\n  max-height: ${({ open }) => (open ? 166 : 30)}px;\r\n  overflow: hidden;\r\n`;\r\nexport const ButtonsContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  opacity: ${({ open }) => (open ? 1 : 0)};\r\n  transition: opacity 1s;\r\n`;\r\nexport const StyledIcon = styled.img`\r\n  height: 30px;\r\n  width: 30px;\r\n  cursor: pointer;\r\n`;\r\n","import { useCallback, useState } from \"react\";\r\nimport { Tooltip } from \"@mui/material\";\r\n\r\nimport icon from \"./danceIcon.png\";\r\nimport MoodButton from \"./MoodButton/MoodButton\";\r\nimport { ButtonsContainer, Container, StyledIcon } from \"./MoodButtonsStyle\";\r\nimport { useStore } from \"../../Store/store\";\r\n\r\nconst moods = [1, 2, 3];\r\nexport default function MoodButtons() {\r\n  const [open, setOpen] = useState(false);\r\n  const storeMood = useStore((state) => state.mood);\r\n\r\n  const onHover = useCallback(() => {\r\n    setOpen(true);\r\n  }, []);\r\n  const onHoverOff = useCallback(() => {\r\n    setOpen(false);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Container\r\n        open={open}\r\n        onPointerEnter={onHover}\r\n        onPointerLeave={onHoverOff}\r\n      >\r\n        <Tooltip title=\"Tempo\" placement=\"right\">\r\n          <StyledIcon src={icon} />\r\n        </Tooltip>\r\n        <ButtonsContainer open={open}>\r\n          {moods.map((mood) => (\r\n            <MoodButton key={mood} mood={mood} selected={mood === storeMood} />\r\n          ))}\r\n        </ButtonsContainer>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import { Canvas } from \"@react-three/fiber\";\r\nimport AudioAnalysis from \"./AudioAnalysis/AudioAnalysis\";\r\nimport { useStore } from \"../Store/store\";\r\nimport MoodButtons from \"./MoodButtons/MoodButtons\";\r\n\r\nexport default function SelectedFilePlayer() {\r\n  const mode = useStore((state) => state.mode);\r\n  return (\r\n    <>\r\n      {mode === \"file\" && (\r\n        <>\r\n          <MoodButtons />\r\n          <Canvas\r\n            key=\"audioPlayer\"\r\n            className=\"canvas\"\r\n            camera={{\r\n              position: [0, 0, 100],\r\n              fov: 40,\r\n              far: 100000,\r\n            }}\r\n          >\r\n            <AudioAnalysis />\r\n          </Canvas>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { colors } from \"../../../colors\";\r\n\r\nexport const HeaderContainer = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: ${colors.primaryBackground};\r\n  height: 75px;\r\n  box-shadow: 0 0 15px 0 ${colors.spotifyGreen};\r\n  z-index: 6;\r\n  position: fixed;\r\n  left: 0;\r\n  top: ${({ open }) => (open ? 0 : \"-80px\")};\r\n  transition: top 1s ease-in-out;\r\n`;\r\n","import styled from \"styled-components\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport ClearIcon from \"@mui/icons-material/Clear\";\r\nimport { colors } from \"../../../../colors\";\r\n\r\nexport const SearchBarContainer = styled.div`\r\n  width: 650px;\r\n  height: 50px;\r\n  position: relative;\r\n  @media (max-width: 1100px) {\r\n    margin-left: 230px;\r\n    margin-right: 60px;\r\n  }\r\n`;\r\n\r\nexport const Input = styled.input`\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 25px;\r\n  border: none;\r\n  outline: none;\r\n  padding: 10px 10px 5px 70px;\r\n  background-color: transparent;\r\n  color: ${colors.secondary};\r\n  box-shadow: inset 8px 8px 8px ${colors.topShadow},\r\n    inset -8px -8px 8px ${colors.bottomShadow};\r\n  font-weight: 700;\r\n  font-size: 1rem;\r\n  ::placeholder {\r\n    color: ${colors.secondary};\r\n  }\r\n`;\r\n\r\nexport const StyledSearchIcon = styled(SearchIcon)`\r\n  color: ${colors.secondary};\r\n  position: absolute;\r\n  left: 10px;\r\n  top: 10px;\r\n`;\r\nexport const StyledCancelIcon = styled(ClearIcon)`\r\n  color: ${colors.secondary};\r\n  position: absolute;\r\n  right: 15px;\r\n  top: 10px;\r\n  cursor: pointer;\r\n`;\r\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { debounce } from \"lodash\";\r\nimport {\r\n  Input,\r\n  SearchBarContainer,\r\n  StyledSearchIcon,\r\n  StyledCancelIcon,\r\n} from \"./SearchStyle\";\r\nimport { useStore } from \"../../../Store/store\";\r\n\r\nexport default function Search() {\r\n  const clearSearchText = useStore((state) => state.clearSearchText);\r\n  const onCloseSearch = useStore((state) => state.onCloseSearch);\r\n  const sendSearchRequest = useStore((state) => state.sendSearchRequest);\r\n\r\n  const [searchText, setSearchText] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setSearchText(\"\");\r\n  }, [clearSearchText]);\r\n\r\n  const requestSearch = useMemo(\r\n    () =>\r\n      debounce(async (query) => {\r\n        if (!query) return;\r\n        sendSearchRequest(query);\r\n      }, 300),\r\n    [sendSearchRequest]\r\n  );\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      requestSearch.cancel();\r\n    };\r\n  }, [requestSearch]);\r\n\r\n  const onSearchTextChange = useCallback(\r\n    (e) => {\r\n      requestSearch(e.target.value);\r\n      setSearchText(e.target.value);\r\n      if (!e.target.value) {\r\n        onCloseSearch();\r\n      }\r\n    },\r\n    [requestSearch, onCloseSearch]\r\n  );\r\n\r\n  return (\r\n    <SearchBarContainer>\r\n      <StyledSearchIcon fontSize=\"large\" />\r\n      <Input\r\n        type=\"text\"\r\n        id=\"search\"\r\n        placeholder={\"Search for songs...\"}\r\n        value={searchText}\r\n        onChange={onSearchTextChange}\r\n        autoComplete=\"off\"\r\n      />\r\n      {searchText && (\r\n        <StyledCancelIcon onClick={onCloseSearch} fontSize=\"large\" />\r\n      )}\r\n    </SearchBarContainer>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Logo = styled.img`\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 25px;\r\n  width: 200px;\r\n  cursor: pointer;\r\n  z-index: 2;\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/spotifyLogo.0c4ae91b.png\";","import { Logo } from \"./SpotifyLogoStyle\";\r\nimport image from \"./spotifyLogo.png\";\r\n\r\nexport default function SpotifyLogo() {\r\n  const onClick = () => {\r\n    const newWindow = window.open(\r\n      \"https://open.spotify.com/\",\r\n      \"_blank\",\r\n      \"noopener,noreferrer\"\r\n    );\r\n    if (newWindow) newWindow.opener = null;\r\n  };\r\n\r\n  return <Logo onClick={onClick} src={image} alt={\"spotify-logo\"} />;\r\n}\r\n","import { useStore } from \"../../Store/store\";\r\nimport { HeaderContainer } from \"./HeaderStyle\";\r\nimport Search from \"./Search/Search\";\r\nimport SpotifyLogo from \"./SpotifyLogo/SpotifyLogo\";\r\n\r\nexport default function Header() {\r\n  const interfaceOpen = useStore((state) => state.interfaceOpen);\r\n  return (\r\n    <HeaderContainer open={interfaceOpen}>\r\n      <SpotifyLogo />\r\n      <Search />\r\n    </HeaderContainer>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { colors } from \"../../../colors\";\r\n\r\nexport const TrackResultContainer = styled.div`\r\n  box-sizing: border-box;\r\n  min-height: 65px;\r\n  width: 100%;\r\n  background-color: rgba(60, 70, 60, 1);\r\n  margin-bottom: 2px;\r\n  border-radius: 15px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  cursor: pointer;\r\n  position: absolute;\r\n  overflow: hidden;\r\n  padding-left: 100px;\r\n  padding-right: 35px;\r\n  top: ${({ top }) => top}px;\r\n\r\n  &:hover {\r\n    background-color: rgb(50, 60, 50);\r\n    box-shadow: 0 0 4px 0px chartreuse;\r\n  }\r\n`;\r\nexport const Image = styled.img`\r\n  height: 65px;\r\n  width: 65px;\r\n  position: absolute;\r\n  left: 0;\r\n`;\r\nexport const TextContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: calc(100% - 50px);\r\n`;\r\nexport const TrackTitle = styled.div`\r\n  font-size: 1.1rem;\r\n  color: ${colors.primary};\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\nexport const Artist = styled.div`\r\n  font-size: 0.8rem;\r\n  color: ${colors.secondary};\r\n  margin-top: 6px;\r\n`;\r\nexport const Duration = styled.div`\r\n  font-size: 1rem;\r\n  color: ${colors.primary};\r\n`;\r\n","import {\r\n  TrackResultContainer,\r\n  Image,\r\n  TextContainer,\r\n  TrackTitle,\r\n  Artist,\r\n  Duration,\r\n} from \"./TrackResultStyle\";\r\n\r\nexport default function TrackResult({ track, selectSong, top }) {\r\n  const onClick = () => {\r\n    selectSong(track.id);\r\n  };\r\n  return (\r\n    <TrackResultContainer onClick={onClick} top={top}>\r\n      <Image src={track.albumUrl} alt={track.title} />\r\n      <TextContainer>\r\n        <TrackTitle>{track.title}</TrackTitle>\r\n        <Artist>{track.artist}</Artist>\r\n      </TextContainer>\r\n      <Duration>{track.duration}</Duration>\r\n    </TrackResultContainer>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledOuter = styled.div`\r\n  box-sizing: border-box;\r\n  z-index: 4;\r\n  position: absolute;\r\n  height: ${({ height }) => height}px;\r\n  width: calc(100vw - 750px);\r\n  overflow: auto;\r\n  padding: 25px;\r\n  overflow: auto;\r\n  color: white;\r\n  font-size: 1.5rem;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\nexport const StyledOuterTop = styled(StyledOuter)`\r\n  transition: top 500ms ease-in-out;\r\n  top: ${({ open }) => (open ? \"75px\" : \"-100%\")};\r\n  left: 350px;\r\n`;\r\nexport const StyledOuterLeft = styled(StyledOuter)`\r\n  transition: left 500ms ease-in-out;\r\n  top: 75px;\r\n  left: ${({ open }) => (open ? \"350px\" : \"-100%\")};\r\n`;\r\nexport const StyledInner = styled.div`\r\n  position: relative;\r\n`;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport const useHeight = () => {\r\n  const [height, setHeight] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const updateHeight = () => {\r\n      setHeight(window.innerHeight - 150);\r\n    };\r\n    updateHeight();\r\n    window.addEventListener(\"resize\", updateHeight);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", updateHeight);\r\n    };\r\n  }, []);\r\n\r\n  return height;\r\n};\r\n","import { StyledInner } from \"./InfiniteLoaderStyle\";\r\n\r\nexport default function InnerElement(props) {\r\n  return <StyledInner {...props} />;\r\n}\r\n","import React, { forwardRef, useCallback, useMemo } from \"react\";\r\nimport { FixedSizeList as List, areEqual } from \"react-window\";\r\nimport InfiniteLoader from \"react-window-infinite-loader\";\r\n\r\nimport { useStore } from \"../../Store/store\";\r\nimport TrackResult from \"../TrackResult/TrackResult\";\r\nimport { StyledOuterLeft } from \"../InfiniteLoader/InfiniteLoaderStyle\";\r\nimport { useHeight } from \"../InfiniteLoader/useHeight\";\r\nimport InnerElement from \"../InfiniteLoader/InnerElement\";\r\n\r\nconst OuterElement = forwardRef(({ children, style, onScroll }, ref) => {\r\n  const open = useStore((state) => state.playlistTracksOpen);\r\n  return (\r\n    <StyledOuterLeft onScroll={onScroll} open={open} height={style.height}>\r\n      {children.props.children.length ? children : <>No Songs Found</>}\r\n    </StyledOuterLeft>\r\n  );\r\n});\r\n\r\nconst Row = React.memo(function Row(props) {\r\n  const setPlaylistSong = useStore((state) => state.setPlaylistSong);\r\n  const { data, index, style } = props;\r\n  const item = data.items[index];\r\n  if (!item) return null;\r\n  const key = item.id;\r\n  return (\r\n    <TrackResult\r\n      key={key}\r\n      track={item}\r\n      top={style.top}\r\n      selectSong={setPlaylistSong}\r\n    />\r\n  );\r\n}, areEqual);\r\n\r\nexport default function PlaylistTracks() {\r\n  const playlistTracks = useStore((state) => state.playlistTracks);\r\n\r\n  const hasNextPage = useStore((state) => !state.playlistRequestsFinised);\r\n  const loadMoreItems = useStore((state) => state.playlistRequestsLoadNextPage);\r\n\r\n  const isItemLoaded = useCallback(\r\n    (index) => !hasNextPage || index < playlistTracks.length,\r\n    [hasNextPage, playlistTracks]\r\n  );\r\n\r\n  const itemCount = useMemo(() => {\r\n    return hasNextPage ? playlistTracks.length + 1 : playlistTracks.length;\r\n  }, [hasNextPage, playlistTracks]);\r\n\r\n  const height = useHeight();\r\n\r\n  return (\r\n    <InfiniteLoader\r\n      isItemLoaded={isItemLoaded}\r\n      itemCount={itemCount}\r\n      loadMoreItems={loadMoreItems}\r\n      threshold={5}\r\n    >\r\n      {({ onItemsRendered, ref }) => (\r\n        <List\r\n          ref={ref}\r\n          height={height}\r\n          itemCount={itemCount}\r\n          itemSize={67}\r\n          onItemsRendered={onItemsRendered}\r\n          outerElementType={OuterElement}\r\n          innerElementType={InnerElement}\r\n          itemData={{\r\n            items: playlistTracks,\r\n          }}\r\n        >\r\n          {Row}\r\n        </List>\r\n      )}\r\n    </InfiniteLoader>\r\n  );\r\n}\r\n","import React, { forwardRef, useCallback, useMemo } from \"react\";\r\nimport { FixedSizeList as List, areEqual } from \"react-window\";\r\nimport InfiniteLoader from \"react-window-infinite-loader\";\r\n\r\nimport { useStore } from \"../../Store/store\";\r\nimport TrackResult from \"../TrackResult/TrackResult\";\r\nimport { StyledOuterTop } from \"../InfiniteLoader/InfiniteLoaderStyle\";\r\nimport { useHeight } from \"../InfiniteLoader/useHeight\";\r\nimport InnerElement from \"../InfiniteLoader/InnerElement\";\r\n\r\nconst OuterElement = forwardRef(({ children, style, onScroll }, ref) => {\r\n  const open = useStore((state) => state.searchTracksOpen);\r\n  return (\r\n    <StyledOuterTop onScroll={onScroll} open={open} height={style.height}>\r\n      {children.props.children.length ? children : <>No Results Found</>}\r\n    </StyledOuterTop>\r\n  );\r\n});\r\n\r\nconst Row = React.memo(function Row(props) {\r\n  const setSearchSong = useStore((state) => state.setSearchSong);\r\n  const { data, index, style } = props;\r\n  const item = data.items[index];\r\n  if (!item) return null;\r\n  const key = item.id;\r\n  return (\r\n    <TrackResult\r\n      key={key}\r\n      track={item}\r\n      top={style.top}\r\n      selectSong={setSearchSong}\r\n    />\r\n  );\r\n}, areEqual);\r\n\r\nexport default function SearchTracks() {\r\n  const searchTracks = useStore((state) => state.searchTracks);\r\n\r\n  const hasNextPage = useStore((state) => !state.searchFinised);\r\n  const loadMoreItems = useStore((state) => state.searchLoadNextPage);\r\n\r\n  const isItemLoaded = useCallback(\r\n    (index) => !hasNextPage || index < searchTracks.length,\r\n    [hasNextPage, searchTracks]\r\n  );\r\n\r\n  const itemCount = useMemo(() => {\r\n    return hasNextPage ? searchTracks.length + 1 : searchTracks.length;\r\n  }, [hasNextPage, searchTracks]);\r\n\r\n  const height = useHeight();\r\n\r\n  return (\r\n    <InfiniteLoader\r\n      isItemLoaded={isItemLoaded}\r\n      itemCount={itemCount}\r\n      loadMoreItems={loadMoreItems}\r\n      threshold={5}\r\n    >\r\n      {({ onItemsRendered, ref }) => (\r\n        <List\r\n          ref={ref}\r\n          height={height}\r\n          itemCount={itemCount}\r\n          itemSize={67}\r\n          onItemsRendered={onItemsRendered}\r\n          outerElementType={OuterElement}\r\n          innerElementType={InnerElement}\r\n          itemData={{\r\n            items: searchTracks,\r\n          }}\r\n        >\r\n          {Row}\r\n        </List>\r\n      )}\r\n    </InfiniteLoader>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { colors } from \"../../../../colors\";\r\n\r\nexport const PlaylistContainer = styled.div`\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 30px;\r\n  color: ${({ selected }) => (selected ? colors.primary : colors.secondary)};\r\n  font-weight: ${({ selected }) => (selected ? 600 : \"\")};\r\n  cursor: pointer;\r\n  padding: 3px 25px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  background-color: ${({ selected }) => (selected ? colors.spotifyGreen : \"\")};\r\n  &:hover {\r\n    color: ${colors.primary};\r\n    background-color: ${({ selected }) =>\r\n      selected ? colors.spotifyGreen : \"rgb(60, 70, 60)\"};\r\n  }\r\n`;\r\n","import { useStore } from \"../../../Store/store\";\r\nimport { PlaylistContainer } from \"./PlaylistStyle\";\r\n\r\nexport default function Playlist({ playlist, selected }) {\r\n  const onSelectPlayList = useStore((state) => state.onSelectPlayList);\r\n\r\n  const onClick = () => {\r\n    onSelectPlayList(playlist.id);\r\n  };\r\n  return (\r\n    <PlaylistContainer selected={selected} onClick={onClick}>\r\n      {playlist.name}\r\n    </PlaylistContainer>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { colors } from \"../../../colors\";\r\n\r\nexport const SidePanelContainer = styled.div`\r\n  box-sizing: border-box;\r\n  width: 350px;\r\n  height: calc(100vh - 157px);\r\n  background-color: ${colors.primaryBackground};\r\n  position: absolute;\r\n  top: 75px;\r\n  z-index: 5;\r\n  box-shadow: 7.5px 0 8px -10px ${colors.spotifyGreen};\r\n  padding: 10px 0;\r\n  overflow: auto;\r\n  left: ${({ open }) => (open ? 0 : \"-360px\")};\r\n  transition: left 1s ease-in-out;\r\n`;\r\n","import { useEffect, useState } from \"react\";\r\nimport { spotifyApi } from \"../../Api/SpotifyApi\";\r\nimport { useStore } from \"../../Store/store\";\r\nimport Playlist from \"./Playlist/Playlist\";\r\nimport { SidePanelContainer } from \"./SidePanelStyle\";\r\n\r\nconst likedSongs = { name: \"Liked Songs\", id: \"liked\" };\r\n\r\nexport default function SidePanel() {\r\n  const interfaceOpen = useStore((state) => state.interfaceOpen);\r\n  const loggedIn = useStore((state) => state.loggedIn);\r\n  const selectedPlaylist = useStore((state) => state.selectedPlaylist);\r\n\r\n  const [playlists, setPlaylists] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!loggedIn) return;\r\n    (async () => {\r\n      const playlists = await spotifyApi.getPlaylists();\r\n      setPlaylists([likedSongs, ...playlists]);\r\n    })();\r\n  }, [loggedIn]);\r\n\r\n  return (\r\n    <SidePanelContainer open={interfaceOpen}>\r\n      {playlists.map((playlist) => (\r\n        <Playlist\r\n          key={playlist.id}\r\n          playlist={playlist}\r\n          selected={selectedPlaylist === playlist.id}\r\n        />\r\n      ))}\r\n    </SidePanelContainer>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { colors } from \"../../../colors\";\r\n\r\nexport const PlayerContainer = styled.div`\r\n  position: fixed;\r\n  width: 100%;\r\n  z-index: 6;\r\n  box-shadow: 0 0 15px 0 ${colors.spotifyGreen};\r\n  bottom: ${({ open }) => (open ? 0 : \"-85px\")};\r\n  transition: bottom 1s ease-in-out;\r\n`;\r\n\r\nexport const styles = {\r\n  bgColor: colors.primaryBackground,\r\n  height: \"75px\",\r\n  color: colors.primary,\r\n  sliderTrackColor: colors.secondary,\r\n  sliderColor: colors.spotifyGreen,\r\n  sliderHandleColor: colors.primary,\r\n  trackNameColor: colors.primary,\r\n  trackArtistColor: colors.secondary,\r\n};\r\n","import { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport SpotifyPlayer from \"react-spotify-web-playback\";\r\nimport { spotifyApi } from \"../../Api/SpotifyApi\";\r\nimport { useStore } from \"../../Store/store\";\r\nimport { PlayerContainer, styles } from \"./PlayerStyles\";\r\n\r\nexport default function Player() {\r\n  const interfaceOpen = useStore((state) => state.interfaceOpen);\r\n  const loggedIn = useStore((state) => state.loggedIn);\r\n  const songs = useStore((state) => state.songs);\r\n  const setIsPlaying = useStore((state) => state.setIsPlaying);\r\n  const setMood = useStore((state) => state.setMood);\r\n  const prevTrack = useRef();\r\n\r\n  const [play, setPlay] = useState(false);\r\n\r\n  const updateMood = useCallback(\r\n    (state) => {\r\n      if (prevTrack.current !== state.track.id) {\r\n        prevTrack.current = state.track.id;\r\n        if (!state.track.id) return;\r\n        const songName = state.track.name.toLowerCase();\r\n        if (songName.includes(\"gangnam\")) setMood(4);\r\n        else if (songName.includes(\"thriller\")) setMood(\"thriller\");\r\n        else {\r\n          spotifyApi.getAudioFeaturesForTrack(state.track.id).then(\r\n            function (data) {\r\n              const { danceability, energy } = data.body;\r\n              if (danceability > 0.7 || energy > 0.7) setMood(3);\r\n              else if (danceability < 0.3 || energy < 0.3) setMood(1);\r\n              else setMood(2);\r\n            },\r\n            function (err) {\r\n              console.log(err);\r\n            }\r\n          );\r\n        }\r\n      }\r\n    },\r\n    [setMood]\r\n  );\r\n\r\n  const playerCB = useCallback(\r\n    (state) => {\r\n      setIsPlaying(state.isPlaying);\r\n      if (!state.isPlaying) setPlay(false);\r\n      updateMood(state);\r\n    },\r\n    [setIsPlaying, updateMood]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!songs.length) return;\r\n\r\n    setPlay(true);\r\n  }, [songs]);\r\n  return (\r\n    <>\r\n      {loggedIn && (\r\n        <PlayerContainer open={interfaceOpen}>\r\n          <SpotifyPlayer\r\n            token={spotifyApi.getAccessToken()}\r\n            play={play}\r\n            callback={playerCB}\r\n            showSaveIcon\r\n            syncExternalDevice\r\n            uris={songs.length ? songs : null}\r\n            styles={styles}\r\n          />\r\n        </PlayerContainer>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useStore } from \"../Store/store\";\r\nimport Header from \"./Header/Header\";\r\nimport PlaylistTracks from \"./PlaylistTracks/PlaylistTracks\";\r\nimport SearchTracks from \"./SearchTracks/SearchTracks\";\r\nimport SidePanel from \"./SidePanel/SidePanel\";\r\nimport Player from \"./Player/Player\";\r\n\r\nexport default function SpotifyComponents() {\r\n  const mode = useStore((state) => state.mode);\r\n\r\n  return (\r\n    <>\r\n      {mode === \"spotify\" && (\r\n        <>\r\n          <Player />\r\n          <Header />\r\n          <SidePanel />\r\n          <PlaylistTracks />\r\n          <SearchTracks />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  color: rgb(0, 37, 46);\r\n  z-index: 0;\r\n  background-color: black;\r\n`;\r\nexport const Background = styled.div`\r\n  height: 100vh;\r\n  width: 100vw;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  background: radial-gradient(circle at top, #034412, #000000);\r\n  opacity: ${({ show }) => (show ? 1 : 0)};\r\n  transition: opacity 2s ease-in-out;\r\n  z-index: 1;\r\n`;\r\n","import \"./App.css\";\nimport { Suspense } from \"react\";\n\nimport Main from \"./Components/Main/Main\";\nimport { useMouseInteraction } from \"./Components/Main/Rig/useInteractions\";\nimport Loader from \"./Components/Loader/Loader\";\nimport Logout from \"./Components/Logout/Logout\";\nimport WelcomeButtons from \"./Components/WelcomeButtons/WelcomeButtons\";\nimport SelectedFilePlayer from \"./Components/SelectedFilePlayer/SelectedFilePlayer\";\nimport SpotifyComponents from \"./Components/SpotifyComponents/SpotifyComponents\";\nimport { Background, Container } from \"./AppStyle\";\nimport { useStore } from \"./Components/Store/store\";\n\nexport default function App() {\n  const mode = useStore((state) => state.mode);\n  const [mouse, onMouseMove] = useMouseInteraction();\n  return (\n    <Container onPointerMove={onMouseMove}>\n      <Background show={mode !== \"file\"} />\n      <WelcomeButtons />\n      <Logout />\n      <SpotifyComponents />\n      <Loader />\n      <Suspense fallback={null}>\n        <SelectedFilePlayer />\n        <Main mouse={mouse} />\n      </Suspense>\n    </Container>\n  );\n}\n","import { useEffect, useState } from \"react\";\r\n\r\nexport default function AuthIntercept({ children }) {\r\n  const [pass, setPass] = useState(false);\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const code = urlParams.get(\"code\");\r\n    const state = urlParams.get(\"state\");\r\n    const error = urlParams.get(\"error\");\r\n    if (error || (code && state)) {\r\n      window.opener.spotifyCallback({ code, state, error });\r\n    } else {\r\n      setPass(true);\r\n    }\r\n  }, []);\r\n\r\n  return <>{pass && children}</>;\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nconst ErrorContainer = styled.div`\r\n  box-sizing: border-box;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1rem;\r\n  background: radial-gradient(circle at top, #034412, #000000);\r\n  color: white;\r\n  text-align: center;\r\n  padding: 30px;\r\n`;\r\nexport default function Error() {\r\n  return (\r\n    <ErrorContainer>\r\n      Sorry this app is not suitable for mobile devices \r\n    </ErrorContainer>\r\n  );\r\n}\r\n","import { isBrowser } from \"react-device-detect\";\r\nimport Error from \"./Error\";\r\n\r\nexport default function DeviceDetect({ children }) {\r\n  return <>{isBrowser ? children : <Error />}</>;\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport AuthIntercept from \"./Components/AuthIntercept/AuthIntercept\";\nimport DeviceDetect from \"./Components/DeviceDetect/DeviceDetect\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <DeviceDetect>\n      <AuthIntercept>\n        <App />\n      </AuthIntercept>\n    </DeviceDetect>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}