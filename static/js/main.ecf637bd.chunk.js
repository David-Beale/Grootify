(this.webpackJsonpgrootify=this.webpackJsonpgrootify||[]).push([[0],{149:function(e,t,n){},150:function(e,t,n){},171:function(e,t){},214:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(44),o=n.n(a),s=(n(149),n(10)),c=(n(150),n(19)),u=n(3);function l(){return Object(u.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-20,0],receiveShadow:!0,children:[Object(u.jsx)("circleBufferGeometry",{args:[75,32]}),Object(u.jsx)("meshStandardMaterial",{color:"rgb(0, 67, 78)"})]})}var h=n(241),f=n.p+"static/media/aAttackGraffiti.761d6a56.ttf";function d(){return Object(u.jsx)(h.a,{font:f,fontSize:7,color:"lime",position:[0,15,-20],letterSpacing:.3,outlineColor:"darkgreen",outlineBlur:.5,outlineWidth:.1,strokeColor:"green",strokeWidth:.21,children:"Grootify"})}var p=n(15),g=n(50),m=n.n(g),b=n(17),v=n(16),x=n.n(v),j=n(21),O=n(115),y=n.n(O),k=n(77),w=n.n(k),S=function(e){for(var t=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++){var r=n.charAt(Math.floor(Math.random()*n.length));t.push(r)}return t.join("")};function M(e){var t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)}function T(e){return btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function C(e){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return n=e.sent,e.abrupt("return",T(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P,A,F=function(e){for(var t=[],n=Object.keys(e),i=0;i<n.length;i++){var r=n[i],a=e[r];i>0&&t.push("&"),t.push(r,"=",a)}return t.join("")},z=function(e,t,n,i,r){var a=n.top.outerHeight/2+n.top.screenY-r/2,o=n.top.outerWidth/2+n.top.screenX-i/2;return n.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(i,", height=").concat(r,", top=").concat(a,", left=").concat(o))},I=new y.a,D=null;I.refreshAccessToken=function(){var e=I.getRefreshToken(),t=new URLSearchParams;return t.append("client_id","316e898df20d4a0d8c486499c9dc7abf"),t.append("grant_type","refresh_token"),t.append("refresh_token",e),w.a.post("https://accounts.spotify.com/api/token",t,{headers:{"Content-Type":"application/x-www-form-urlencoded;"}}).then((function(e){var t=e.data,n=t.access_token,i=t.expires_in,r=t.refresh_token;localStorage.setItem("sp-accessToken",n),localStorage.setItem("sp-refreshToken",r);var a=1e3*(i-60);return localStorage.setItem("sp-expiry",Date.now()+a),I.setRefreshToken(r),I.setAccessToken(n),setTimeout((function(){I.refreshAccessToken()}),a),console.log("accessTokenRefreshed"),!0})).catch((function(e){return console.log("Could not refresh access token",e),N.getState().logout(),!1}))},I.preFlightCheck=function(){var e=Object(j.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("sp-expiry"),!(Date.now()>n)){e.next=7;break}return e.next=4,I.refreshAccessToken();case 4:return e.abrupt("return",e.sent);case 7:setTimeout((function(){I.refreshAccessToken()}),+n-Date.now());case 8:return I.setAccessToken(t),e.abrupt("return","accessTokenValid");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I.login=Object(j.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.getAccessToken(),e.abrupt("return",w.a.get("https://api.spotify.com/v1/me",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return D=e.data.id,!0})).catch((function(e){return console.log("Could not access profile data",e),N.getState().setAccessRequired(),N.getState().logout(),!1})));case 2:case"end":return e.stop()}}),e)}))),I.checkAuthentication=Object(j.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("sp-accessToken"),n=localStorage.getItem("sp-refreshToken"),t&&n){e.next=4;break}return e.abrupt("return",!1);case 4:return I.setRefreshToken(n),e.next=7,I.preFlightCheck(t);case 7:if(e.sent){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,I.login();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)}))),I.loginRedirect=Object(j.a)(x.a.mark((function e(){var t,n,i,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P=S((a=43,o=128,a=Math.ceil(a),o=Math.floor(o),Math.floor(Math.random()*(o-a+1))+a)),e.next=3,C(P);case 3:return t=e.sent,A=S(12),n={response_type:"code",client_id:"316e898df20d4a0d8c486499c9dc7abf",redirect_uri:"http://localhost:3000/",scope:["streaming","user-read-email","user-read-private","user-read-playback-state","user-modify-playback-state","user-library-read","user-library-modify","playlist-read-private"].join(" "),state:A,code_challenge:t,code_challenge_method:"S256"},i="https://accounts.spotify.com/authorize?"+F(n),r=z(i,"Login With Spotify",window,600,800),e.abrupt("return",r);case 10:case"end":return e.stop()}var a,o}),e)}))),I.requestTokens=function(e){var t=e.state,n=e.code;if(e.error||t!==A)return!1;var i=new URLSearchParams;return i.append("client_id","316e898df20d4a0d8c486499c9dc7abf"),i.append("grant_type","authorization_code"),i.append("code",n),i.append("redirect_uri","http://localhost:3000/"),i.append("code_verifier",P),w.a.post("https://accounts.spotify.com/api/token",i,{headers:{"Content-Type":"application/x-www-form-urlencoded;"}}).then((function(e){var t=e.data,n=t.access_token,i=t.refresh_token,r=t.expires_in;localStorage.setItem("sp-accessToken",n),localStorage.setItem("sp-refreshToken",i);var a=1e3*(r-60);return localStorage.setItem("sp-expiry",Date.now()+a),I.setAccessToken(n),I.setRefreshToken(i),setTimeout((function(){I.refreshAccessToken()}),a),!0})).catch((function(e){return console.log(e),!1}))};var H=function(e){var t=Math.round(e/1e3),n=~~(t/60);return t-=60*n,"".concat(n,":").concat(t.toString().padStart(2,"0"))},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e){t&&(e=e.track);var n=e.album.images.reduce((function(e,t){return t.height<e.height?t:e}),e.album.images[0]);return{artist:e.artists[0].name,title:e.name,id:e.id,albumUrl:n.url,duration:H(e.duration_ms)}}))};I.getTracks=function(e,t){return I.searchTracks(e,{offset:t}).then((function(e){return U(e.body.tracks.items)})).catch((function(){return!1}))},I.getMyPlaylist=function(e,t){return"liked"===e?I.getMySavedTracks({offset:t}).then((function(e){return U(e.body.items,!0)})).catch((function(e){return console.log(e),!1})):I.getPlaylist(e,{offset:t}).then((function(e){return U(e.body.tracks.items,!0)})).catch((function(e){return console.log(e),!1}))},I.getTracks=function(e){return I.searchTracks(e).then((function(e){return U(e.body.tracks.items)})).catch((function(){return!1}))},I.getPlaylists=function(){return I.getUserPlaylists(D,{limit:50}).then((function(e){return e.body.items.map((function(e){return{name:e.name,id:e.id,image:e.images[1]||e.images[0]}}))}),(function(e){console.log("Something went wrong!",e)})).catch((function(e){return console.log(e)}))};var B=null,L=null,E=function(e){e((function(){return{searchTracksOpen:!1,clearSearchText:[],searchFinised:!1,searchQuery:null,searchOffset:0,inProgress:!1}}));var t=Date.now();B=Date.now(),setTimeout((function(){t===B&&e((function(){return{searchTracks:[]}}))}),500)},_=null,q=null,J=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return[].concat(Object(b.a)(e.slice(n,e.length)),Object(b.a)(e.slice(0,n))).map((function(e){return"spotify:track:"+e.id}))},V=function(e){e((function(){return{selectedPlaylist:null,playlistTracksOpen:!1,playlistRequestsFinised:!1,playlistRequestsOffset:0,playlistRequestsInProgress:!1}}));var t=Date.now();_=Date.now(),setTimeout((function(){t===_&&e((function(){return{playlistTracks:[]}}))}),500)},N=m()((function(e,t){return Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},function(e){return{loggedIn:null,accessRequired:!1,login:function(){return e((function(){return{loggedIn:!0,accessRequired:!1}}))},logout:function(){e((function(){return{loggedIn:!1,interfaceOpen:!1,lightsOn:!1}})),localStorage.removeItem("sp-accessToken"),localStorage.removeItem("sp-refreshToken")},setAccessRequired:function(){return e((function(){return{accessRequired:!0}}))}}}(e)),function(e){return{file:null,setFile:function(t){return e((function(){return{file:t}}))}}}(e)),function(e){return{isPreLoaded:!1,setPreLoaded:function(){return e((function(){return{isPreLoaded:!0}}))},isLoaded:!1,setLoaded:function(){return e((function(){return{isLoaded:!0}}))}}}(e)),function(e){return{mode:null,setMode:function(t){return e((function(){return{mode:t}}))}}}(e)),function(e,t){return{playlistTracksOpen:!1,playlistTracks:[],selectedPlaylist:null,playlistRequestsFinised:!1,playlistRequestsOffset:0,playlistRequestsInProgress:!1,onClosePlaylist:function(){V(e)},onSelectPlayList:function(){var n=Object(j.a)(x.a.mark((function n(i){var r,a;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i!==t().selectedPlaylist){n.next=3;break}return V(e),n.abrupt("return");case 3:return r=Date.now(),q=r,n.next=7,I.getMyPlaylist(i);case 7:if(a=n.sent,q===r){n.next=10;break}return n.abrupt("return");case 10:_="abort",e((function(){return{selectedPlaylist:i,playlistTracksOpen:!0,playlistTracks:a,playlistRequestsOffset:20,playlistRequestsFinised:a.length<20}})),E(e);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),setPlaylistSong:function(n){V(e);var i=t().playlistTracks,r=J(i,n);e((function(){return{songs:r,isPlaying:!0}}))},playlistRequestsLoadNextPage:function(){var n=Object(j.a)(x.a.mark((function n(){var i;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t().playlistRequestsOffset&&!t().playlistRequestsInProgress){n.next=2;break}return n.abrupt("return");case 2:return e((function(){return{playlistRequestsInProgress:!0}})),n.next=5,I.getMyPlaylist(t().selectedPlaylist,t().playlistRequestsOffset);case 5:i=n.sent,e((function(e){return{playlistTracks:[].concat(Object(b.a)(e.playlistTracks),Object(b.a)(i)),playlistRequestsOffset:e.playlistRequestsOffset+20,playlistRequestsFinised:i.length<20,playlistRequestsInProgress:!1}}));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}}(e,t)),function(e,t){return{clearSearchText:[],searchTracksOpen:!1,searchTracks:[],searchFinised:!1,searchQuery:null,searchOffset:0,searchInProgress:!1,sendSearchRequest:function(){var t=Object(j.a)(x.a.mark((function t(n){var i,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Date.now(),L=i,t.next=4,I.getTracks(n,0);case 4:if(r=t.sent,L===i){t.next=7;break}return t.abrupt("return");case 7:B="abort",e((function(){return{searchTracks:r,searchTracksOpen:!0,searchQuery:n,searchOffset:20,searchFinised:r.length<20}})),V(e);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onCloseSearch:function(){return E(e)},setSearchSong:function(t){E(e),e((function(){return{songs:["spotify:track:"+t],isPlaying:!0}}))},searchLoadNextPage:function(){var n=Object(j.a)(x.a.mark((function n(){var i;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t().searchOffset&&!t().searchInProgress){n.next=2;break}return n.abrupt("return");case 2:return e((function(){return{searchInProgress:!0}})),n.next=5,I.getTracks(t().searchQuery,t().searchOffset);case 5:i=n.sent,e((function(e){return{searchTracks:[].concat(Object(b.a)(e.searchTracks),Object(b.a)(i)),searchOffset:e.searchOffset+20,searchFinised:i.length<20,searchInProgress:!1}}));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}}(e,t)),{songs:[]}),function(e){return{interfaceOpen:!1,onInterfaceOpen:function(){return e((function(){return{interfaceOpen:!0}}))},running:!1,setRunning:function(t){return e((function(){return{running:t}}))},lightsOn:!1,setLightsOn:function(){return e((function(){return{lightsOn:!0}}))},click:!1,onClick:function(){return e((function(){return{click:[]}}))},isPlaying:!1,setIsPlaying:function(t){return e((function(){return{isPlaying:t}}))},mood:2,setMood:function(t){return e((function(){return{mood:t}}))}}}(e))})),W=n(2),G=n(4),Q=n.p+"static/media/HangingIdle.6c06d7e9.fbx",X=n.p+"static/media/Fall.534bdd27.fbx",Y=n.p+"static/media/Land.d0119f07.fbx",K=n.p+"static/media/Waving.91a7305c.fbx",Z=n.p+"static/media/Stunned.c5377893.fbx",$=n.p+"static/media/Getting Up.2d5ceffd.fbx",ee=n.p+"static/media/Angry.7db84f18.fbx",te=n.p+"static/media/Typing.cedeec8e.fbx",ne=n.p+"static/media/RunningRight.60369293.fbx",ie=n.p+"static/media/RunningLeft.0707ef58.fbx",re=n.p+"static/media/Happy Idle.9c825c3c.fbx",ae={hangingIdle:{file:Q,blockUser:!0},falling:{file:X,blockAll:!0},land:{file:Y,once:!0,blockAll:!0},waving:{file:K,once:!0,blockUser:!0},typing:{file:te,once:!0,blockUser:!0},angry:{file:ee,once:!0,blockUser:!0},stunned:{file:Z,once:!0,blockAll:!0},gettingUp:{file:$,once:!0,blockAll:!0},idle:{file:n.p+"static/media/Breathing Idle.2de5616f.fbx"},happyIdle:{file:re},runRight:{file:ne,blockUser:!0},scared:{file:n.p+"static/media/Scared.0c3aefb1.fbx",blockUser:!0},runLeft:{file:ie,blockUser:!0},ArmSwing:{file:n.p+"static/media/ArmSwing.cfa64b8b.fbx",once:!0},HipHop5:{file:n.p+"static/media/HipHop5.bfc85956.fbx",once:!0},Belly:{file:n.p+"static/media/Belly.e398baef.fbx",once:!0},Samba1:{file:n.p+"static/media/Samba1.308a41bf.fbx",once:!0},Samba5:{file:n.p+"static/media/Samba5.28f1b775.fbx",once:!0},Dance:{file:n.p+"static/media/Dance.6589c141.fbx",once:!0},House2:{file:n.p+"static/media/House2.1be45f0a.fbx",once:!0},Gangnam:{file:n.p+"static/media/Gangnam Style.94781dc5.fbx"},moonwalk:{file:n.p+"static/media/Moonwalk.f6ecffc3.fbx",once:!0,blockUser:!0},thrillerIdle:{file:n.p+"static/media/Thriller Idle.214830c1.fbx",blockUser:!0}},oe=["runLeft","RunningLeft2","RunningLeft3","RunningLeft4"],se=["runLeft"],ce=["runRight"],ue=["scared"],le=["Gangnam"],he=["Arms","Belly","Breakdance2","Dance","HipHop11","Jazz2","Jazz3","Salsa4","Samba4"],fe=["Dance","Belly"],de=["ArmSwing","Arms","Bboy1","Bboy2","Breakdance2","Can","Chicken","Dance2","HipHop11","HipHop13","HipHop2","HipHop3","HipHop4","HipHop5","HipHop6","HipHop7","HipHop8","Hokey","House2","Jazz2","Jazz3","Locking","Macarena","Maraschino","Robot","Rumba","Salsa1","Salsa2","Salsa3","Salsa4","Samba1","Samba2","Samba3","Samba4","Samba5","Samba6","Silly2","Swing","Swing2","Swing3","Tut","Twist"],pe=["ArmSwing","Samba1"],ge=["Bboy1","Bboy2","Dance2","HipHop10","HipHop12","HipHop2","HipHop3","HipHop4","HipHop5","HipHop6","HipHop7","HipHop8","House1","House2","Locking","Maraschino","Robot","Rumba","Running","Salsa1","Salsa2","Samba1","Samba2","Samba3","Samba5","Samba6","Shuffling","Silly1","Silly2","Swing","Swing2","Swing3","Tut","Twerk","ArmSwing"],me=["ArmSwing","Samba5","House2"],be={Can:2,Chicken:2,HipHop12:2,Maraschino:2,Bboy1:3,Bboy2:2,Breakdance2:3,Jazz2:3,Jazz3:3,Rumba:3,Salsa2:3,Swing2:2},ve=["moonwalk","thrillerIdle","thriller1","thriller2","thriller3","thriller4"],xe=function(){function e(t){Object(W.a)(this,e),this.model=t,this.stacks={1:{name:"low",list:fe,count:0},2:{name:"med",list:pe,count:0},3:{name:"high",list:me,count:0}},this.lists={1:{name:"low",list:he},2:{name:"med",list:de},3:{name:"high",list:ge},4:{name:"gangnam",list:le}},this.mood=2,this.isDancing=!1,this.downloading={name:null,mood:null,active:!1}}return Object(G.a)(e,[{key:"addToStack",value:function(){var e=this.downloading,t=e.name,n=e.mood,i=this.stacks[n];i.count++,i.list.push(t)}},{key:"popStack",value:function(e,t){var n;e.count--,e.count<0&&(e.count=0);do{n=e.list.pop(),e.list.unshift(n)}while(n===t.name);return n}},{key:"getRandomMove",value:function(e){var t,n=this.lists[this.mood].list;do{t=n[Math.floor(Math.random()*n.length)]}while(t===e.name||t===this.downloading.name);return t}},{key:"get",value:function(e){var t=this.model.animationManager.actions;this.isDancing=!0;var n=this.mood||2,i=this.stacks[n];if(i&&i.count)return this.popStack(i,e);var r=this.getRandomMove(e);return t[r]?r:(this.downloading.active||(t[r]=!0,this.downloading={name:r,mood:n,active:!0},this.model.worker.postMessage({name:r,type:"dance"})),this.popStack(i,e))}},{key:"setMood",value:function(e){this.mood=e}},{key:"onWorkerMessage",value:function(e){var t=be[this.downloading.name];this.model.animationManager.loadAnimation({animation:e,once:!t,loop:t,name:this.downloading.name}),this.addToStack(),this.downloading={name:null,mood:null,active:!1}}}]),e}(),je=n(12),Oe=function(){function e(t){var n;Object(W.a)(this,e),this.model=t,this.stacks=Object(je.a)({},-1,{name:"left",list:se,count:0}),this.lists=(n={},Object(je.a)(n,-1,oe),Object(je.a)(n,1,ce),Object(je.a)(n,"scared",ue),n),this.scared=!1,this.downloading={name:null,direction:null,active:!1}}return Object(G.a)(e,[{key:"addToStack",value:function(){var e=this.downloading,t=e.name,n=e.direction,i=this.stacks[n];i.count++,i.list.push(t)}},{key:"popStack",value:function(e){e.count--,e.count<0&&(e.count=0);var t=e.list.pop();return e.list.unshift(t),t}},{key:"getRandomMove",value:function(){if(this.scared)return this.scared=!1,this.lists.scared[0];var e,t=this.model.positionManager.runningDirection,n=this.lists[t];do{e=n[Math.floor(Math.random()*n.length)]}while(e===this.downloading.name);return e}},{key:"setScared",value:function(){this.scared=!0}},{key:"get",value:function(){if(!this.model.positionManager.updateDirection())return this.scared=!1,!1;var e=this.model.positionManager.runningDirection,t=this.model.animationManager.actions,n=this.stacks[e];if(n&&n.count)return this.popStack(n);var i=this.getRandomMove();return t[i]?i:(this.downloading.active||(t[i]=!0,this.downloading={name:i,direction:e,active:!0},this.model.worker.postMessage({name:i,type:"running"})),this.popStack(n))}},{key:"onWorkerMessage",value:function(e){this.model.animationManager.loadAnimation({animation:e,name:this.downloading.name}),this.addToStack(),this.downloading={name:null,direction:null,active:!1}}}]),e}(),ye=function(){function e(){Object(W.a)(this,e),this.posController=null,this.vel=0,this.pos="left",this.requestedDirection=!1,this.runningDirection=0,this.isFalling=!1}return Object(G.a)(e,[{key:"setPosController",value:function(e){this.posController=e}},{key:"setPos",value:function(e){this.pos=e}},{key:"incrVel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.vel+=e,t&&(this.vel=Math.min(t,this.vel))}},{key:"startFalling",value:function(){this.isFalling=!0}},{key:"fall",value:function(){if(this.isFalling)return this.incrVel(-.01),this.updateY(),this.posController.y<=-20&&(this.stopFalling(),!0)}},{key:"stopFalling",value:function(){this.vel=0,this.isFalling=!1,this.posController.y=-20}},{key:"run",value:function(){if(this.runningDirection)return this.incrVel(.008,.4),this.updateX(),(1===this.runningDirection&&this.posController.x>=56||-1===this.runningDirection&&this.posController.x<=0)&&(this.stopRunning(),!0)}},{key:"stopRunning",value:function(){-1===this.runningDirection?this.setPos("left"):this.setPos("right"),this.requestedDirection=!1,this.runningDirection=0,this.vel=0}},{key:"setDirection",value:function(e){this.requestedDirection=e,this.runningDirection!==this.requestedDirection&&(this.vel=0),this.setPos("transit")}},{key:"updateY",value:function(){this.posController.y+=this.vel}},{key:"updateX",value:function(){this.posController.x+=this.vel*this.runningDirection}},{key:"updateDirection",value:function(){return this.requestedDirection!==this.runningDirection&&(this.runningDirection=this.requestedDirection,!0)}}]),e}(),ke=function(){function e(t){Object(W.a)(this,e),this.model=t,this.mouseX=0,this.mouseY=0,this.waveStatus={count:0,side:null,time:null}}return Object(G.a)(e,[{key:"setMouse",value:function(e){var t=Object(s.a)(e,2),n=t[0],i=t[1];this.mouseX=n,this.mouseY=i}},{key:"getSide",value:function(){return this.mouseX<-.17?-1:this.mouseX<.17?0:1}},{key:"wave",value:function(){if(this.model.animationManager.waveAllowed()){var e=this.getSide();if(e){var t=this.waveStatus,n=t.count,i=t.side,r=t.time,a=Date.now();if(!n)return this.waveStatus.count++,this.waveStatus.side=e,void(this.waveStatus.time=a);if(i!==e)return a-r>1e3?this.waveStatus.count=0:(this.waveStatus.count++,this.waveStatus.side=e,this.waveStatus.time=a,3===this.waveStatus.count?(this.waveStatus.count=0,!0):void 0)}}}}]),e}(),we=function(){function e(t){var n=this;Object(W.a)(this,e),this.getJointAngle=function(){n.x=n.neck.rotation.y/1.2,n.y=n.neck.rotation.x/1.2},this.model=t,this.x=0,this.y=0,this.neck=null,this.waist=null,this.fadeJointsRequired=!1}return Object(G.a)(e,[{key:"setJoint",value:function(e){e.isBone&&"mixamorigNeck"===e.name?this.neck=e:e.isBone&&"mixamorigSpine"===e.name&&(this.waist=e)}},{key:"moveJoint",value:function(e,t){e.rotation.y=this.x*t,e.rotation.x=this.y*t}},{key:"moveJoints",value:function(){var e=this.model.animationManager.currentAction;if(e&&"idle"===e.name){var t=this.model.mouseManager,n=t.mouseX,i=t.mouseY-.1,r=n;"right"===this.model.positionManager.pos?(r-=.43)>0&&(r*=13):r*=2,this.x+=.07*(r-this.x),this.y+=.07*(i-this.y),this.moveJoint(this.neck,1.2),this.moveJoint(this.waist,.5)}}},{key:"fadeJoints",value:function(){if(this.fadeJointsRequired){var e=this.neck.rotation.y/1.2,t=this.neck.rotation.x/1.2;this.x+=.07*(e-this.x),this.y+=.07*(t-this.y),this.moveJoint(this.neck,1.2),this.moveJoint(this.waist,.5)}}},{key:"checkIfFadeRequired",value:function(e,t){var n=this;"idle"===e.name&&"stunned"!==t.name&&(this.fadeJointsRequired=!0,setTimeout((function(){n.fadeJointsRequired=!1}),500))}}]),e}(),Se=function(){function e(t){var n=this;Object(W.a)(this,e),this.startFalling=function(){n.positionManager.startFalling(),n.model.started=!0},this.updateFade=function(){n.model.animationManager.fadeSpeed=.5},this.isPlayingCheck=function(){if(n.model.isPlaying)return N.setState({interfaceOpen:!0}),n.model.setChain("danceChain"),!0;n.runRight()},this.land=function(){N.setState({lightsOn:!0})},this.runLeft=function(){n.positionManager.setDirection(-1)},this.runRight=function(){n.positionManager.setDirection(1)},this.runScared=function(){n.positionManager.setDirection(1),n.runningManager.setScared()},this.typing=function(){setTimeout((function(){N.setState({interfaceOpen:!0})}),2e3)},this.resetThriller=function(){n.model.thrillerManager.resetThriller()},this.model=t,this.positionManager=t.positionManager,this.runningManager=t.runningManager,this.jointManager=t.jointManager,this.chain=[]}return Object(G.a)(e,[{key:"getBlockingActions",value:function(){for(var e=this.model.animationManager.actions,t=[],n=0;n<this.chain.length;n++){var i=this.chain[n];if(!e[i.animation]||!e[i.animation].blockAll)break;t.push(i)}return t}},{key:"shift",value:function(){return this.chain.shift()}},{key:"push",value:function(e){var t,n=this[e]().chain;(t=this.chain).push.apply(t,Object(b.a)(n))}},{key:"setChain",value:function(e){if(!this[e])return console.log(e," does not exist"),!1;var t=this[e](),n=t.chain,i=t.isUserAction,r=this.model.animationManager.currentAction;if((r.blockUser||r.blockAll)&&i)return!1;if(r.blockAll){if(!n)return!1;var a=this.getBlockingActions();return this.chain=[].concat(Object(b.a)(a),Object(b.a)(n)),!1}return n&&(this.chain=n),!0}},{key:"leftDanceChain",value:function(){return{chain:[{animation:"running",cb:this.runLeft},{animation:"dance"}]}}},{key:"danceChain",value:function(){return{chain:[{animation:"dance"}]}}},{key:"rightDanceChain",value:function(){return{chain:[{animation:"running",cb:this.runRight},{animation:"dance"}]}}},{key:"rightIdleChain",value:function(){return{chain:[{animation:"running",cb:this.runRight},{animation:"idle",cb:this.jointManager.getJointAngle}]}}},{key:"idleChain",value:function(){return{chain:[{animation:"idle",cb:this.jointManager.getJointAngle}]}}},{key:"angryChain",value:function(){return{chain:[{animation:"angry"},{animation:"idle",cb:this.jointManager.getJointAngle}]}}},{key:"scaredDanceChain",value:function(){return{chain:[{animation:"running",cb:this.runScared},{animation:"dance"}]}}},{key:"scaredIdleChain",value:function(){return{chain:[{animation:"running",cb:this.runScared},{animation:"idle",cb:this.jointManager.getJointAngle}]}}},{key:"fallingChain",value:function(){return{chain:[{animation:"falling",cb:this.startFalling},{animation:"land",cb:this.land},{animation:"waving",cb:this.updateFade},{animation:"running",cb:this.isPlayingCheck},{animation:"typing",cb:this.typing},{animation:"idle",cb:this.jointManager.getJointAngle}]}}},{key:"waveChain",value:function(){var e=[{animation:"waving"}];return"idle"===this.model.animationManager.currentAction.name?e.push({animation:"idle",cb:this.jointManager.getJointAngle}):"dance"===this.chain[0].animation&&e.push({animation:"dance"}),{chain:e,isUserAction:!0}}},{key:"fallOverChain",value:function(){var e=[{animation:"stunned"},{animation:"gettingUp"}];return"idle"===this.model.animationManager.currentAction.name?e.push({animation:"idle",cb:this.jointManager.getJointAngle}):"dance"===this.chain[0].animation&&e.push({animation:"dance"}),{chain:e,isUserAction:!0}}},{key:"thrillerChain",value:function(){return{chain:[{animation:"thriller",cb:this.resetThriller}]}}},{key:"thrillerNextChain",value:function(){return{chain:[{animation:"thriller"}]}}},{key:"leftThrillerChain",value:function(){return{chain:[{animation:"running",cb:this.runLeft},{animation:"thriller",cb:this.resetThriller}]}}}]),e}(),Me=n(1),Te=n(135),Ce=n.p+"static/media/Model.4743001a.fbx",Re=function(){function e(t){var n=this;Object(W.a)(this,e),this.loadAnimation=function(e){var t=e.animation,i=e.name,r=e.once,a=e.loop,o=e.blockUser,s=e.blockAll,c=n.mixer.clipAction(t);r?(c.loop=Me.LoopOnce,c.clampWhenFinished=!0):a&&(c.repetitions=a,c.clampWhenFinished=!0),c.name=i,c.blockUser=o,c.blockAll=s,n.actions[i]=c,"idle"===i&&(c._clip.tracks.splice(5,1),c._clip.tracks.splice(2,1)),"hangingIdle"===i&&(n.currentAction=c,c.play())},this.loadFile=function(e,t){var i=t.file,r=t.once,a=t.blockUser,o=t.blockAll;n.loader.load(i,(function(t){n.loadAnimation({animation:t.animations[0],name:e,once:r,blockUser:a,blockAll:o})}))},this.eventFinished=function(e){e.action.name===n.currentAction.name&&n.runNextAnimation()},this.runNextAnimation=function(){n.mixer.removeEventListener("finished",n.eventFinished),n.reset();var e=n.model.chainManager.shift(),t=e.animation,i=e.cb;if(i&&i())return;var r=n.animationRouter(t);r&&(r.reset(),n.fade(r),r.play(),n.currentAction=r,n.mixer.addEventListener("finished",n.eventFinished))},this.waveAllowed=function(){return n.currentAction&&!n.currentAction.blockUser&&!n.currentAction.blockAll},this.model=t,this.mixer=null,this.loader=new Te.a,this.fbx=null,this.actions={},this.currentAction=null,this.fadeSpeed=.25,this.init()}return Object(G.a)(e,[{key:"init",value:function(){var e=this;this.loader.load(Ce,(function(t){for(var n in t.scale.setScalar(.02),t.traverse((function(t){t.isMesh?(t.castShadow=!0,t.__r3f={handlers:{}}):e.model.jointManager.setJoint(t)})),e.mixer=new Me.AnimationMixer(t),e.fbx=t,ae)e.loadFile(n,ae[n])}))}},{key:"reset",value:function(){this.model.danceManager.isDancing=!1}},{key:"animationRouter",value:function(e){if("dance"===e){this.model.chainManager.push("danceChain");var t=this.model.danceManager.get(this.currentAction);return this.actions[t]}if("running"===e){var n=this.model.runningManager.get();return!!n&&this.actions[n]}if("thriller"===e){this.model.chainManager.push("thrillerNextChain");var i=this.model.thrillerManager.get();return!!i&&this.actions[i]}return e!==this.currentAction.name&&this.actions[e]}},{key:"fade",value:function(e){this.currentAction&&(e.crossFadeFrom(this.currentAction,this.fadeSpeed),this.model.jointManager.checkIfFadeRequired(this.currentAction,e))}}]),e}(),Pe=function(){function e(t){Object(W.a)(this,e),this.model=t,this.list=ve,this.downloading=null,this.index=0,this.downloadIndex=1,this.paused=!1}return Object(G.a)(e,[{key:"resetThriller",value:function(){this.index=0,1===this.downloadIndex&&this.downloadNextMove()}},{key:"downloadNextMove",value:function(){this.downloadIndex++;var e=this.list[this.downloadIndex];e&&(this.downloading=e,this.model.worker.postMessage({name:e,type:"thriller"}))}},{key:"getNextMove",value:function(){var e=this.list[this.index];if(this.index++,"thrillerIdle"===e){if(this.downloadIndex>2)return this.getNextMove();this.paused=!0}return e}},{key:"get",value:function(){this.model.danceManager.isDancing=!0;var e=this.getNextMove();if(e)return this.model.animationManager.actions[e]?e:(this.paused=!0,null);this.model.setChain("danceChain")}},{key:"onWorkerMessage",value:function(e){this.model.animationManager.loadAnimation({animation:e,once:!0,blockUser:!0,name:this.downloading}),this.paused&&(this.model.animationManager.runNextAnimation(),this.paused=!1),this.downloadNextMove()}}]),e}(),Ae=new Worker("./loader/loader.js"),Fe=new(function(){function e(){Object(W.a)(this,e),this.started=!1,this.isPlaying=!1,this.worker=Ae,this.positionManager=new ye,this.danceManager=new xe(this),this.runningManager=new Oe(this),this.mouseManager=new ke(this),this.jointManager=new we(this),this.chainManager=new Se(this),this.animationManager=new Re(this),this.thrillerManager=new Pe(this),this.workerInit()}return Object(G.a)(e,[{key:"setIsPlaying",value:function(e){this.isPlaying=e}},{key:"workerInit",value:function(){var e=this;this.worker.onmessage=function(t){var n=t.data,i=n.anim,r=n.type,a=Me.AnimationClip.parse(i);"dance"===r?e.danceManager.onWorkerMessage(a):"running"===r?e.runningManager.onWorkerMessage(a):"thriller"===r&&e.thrillerManager.onWorkerMessage(a)}}},{key:"moveJoints",value:function(){this.jointManager.moveJoints()}},{key:"fadeJoints",value:function(){this.jointManager.fadeJoints()}},{key:"wave",value:function(){var e=this.mouseManager.wave();e&&this.setChain("waveChain")}},{key:"fall",value:function(){this.positionManager.fall()&&this.animationManager.runNextAnimation()}},{key:"run",value:function(){this.positionManager.run()&&this.animationManager.runNextAnimation()}},{key:"setChain",value:function(e){this.chainManager.setChain(e)&&this.animationManager.runNextAnimation()}}]),e}()),ze=Object(i.memo)((function(e){var t=e.modelRef,n=N((function(e){return e.onClick})),r=function(e){var t=N((function(e){return e.isPreLoaded})),n=N((function(e){return e.setLoaded})),r=Object(i.useState)({}),a=Object(s.a)(r,2),o=a[0],u=a[1];return Object(i.useEffect)((function(){t&&(u(Fe.animationManager.fbx),Fe.positionManager.setPosController(e.current.position),setTimeout((function(){n()}),2e3))}),[t,e,n]),Object(c.c)((function(){Fe.animationManager.mixer&&(Fe.animationManager.mixer.update(.0167),Fe.moveJoints(),Fe.fadeJoints(),Fe.wave())})),o}(t);return function(){var e=N((function(e){return e.mode})),t=N((function(e){return e.isLoaded})),n=N((function(e){return e.onInterfaceOpen})),r=N((function(e){return e.setLightsOn}));Object(i.useEffect)((function(){e&&t&&(Fe.started?(n(),r()):Fe.setChain("fallingChain"))}),[e,t,n,r]),Object(c.c)((function(){Fe.fall()}))}(),Object(c.c)((function(){Fe.run()})),function(){var e=N((function(e){return e.click}));Object(i.useEffect)((function(){e&&Fe.setChain("fallOverChain")}),[e])}(),function(){var e=Object(i.useRef)(!1),t=N((function(e){return e.isPlaying})),n=N((function(e){return e.mood})),r=N((function(e){return e.playlistTracksOpen})),a=N((function(e){return e.searchTracksOpen})),o=N((function(e){return e.isLoaded})),s=N((function(e){return e.mode}));Object(i.useEffect)((function(){if("file"===s){Fe.setIsPlaying(!0);var e=Fe.positionManager.pos;"right"!==e&&"transit"!==e||Fe.setChain("leftDanceChain")}}),[s]),Object(i.useEffect)((function(){e.current=o}),[o]),Object(i.useEffect)((function(){if(Fe.setIsPlaying(t),e.current){var n=Fe.positionManager.pos,i=r||a;t?i?"left"===n||"transit"===n?Fe.setChain("scaredDanceChain"):Fe.setChain("danceChain"):"right"===n||"transit"===n?Fe.setChain("leftDanceChain"):Fe.setChain("danceChain"):i?"left"===n||"transit"===n?Fe.setChain("scaredIdleChain"):Fe.setChain("idleChain"):"right"===n?Fe.setChain("idleChain"):"transit"===n?Fe.setChain("rightIdleChain"):Fe.setChain("angryChain")}}),[t,r,a]),Object(i.useEffect)((function(){if("thriller"!==n)Fe.danceManager.setMood(n),Fe.danceManager.isDancing&&Fe.setChain("danceChain");else{Fe.danceManager.setMood(2);var e=Fe.positionManager.pos;"right"===e||"transit"===e?Fe.setChain("leftThrillerChain"):Fe.setChain("thrillerChain")}}),[n])}(),Object(u.jsxs)("group",{onClick:n,ref:t,position:[0,21.5,0],children:[Object(u.jsx)("primitive",{object:r}),";"]})})),Ie=n(136),De=n(116),He=n(5),Ue=n(6),Be=n(33),Le=n(53),Ee=n(90),_e=function(e){Object(He.a)(n,e);var t=Object(Ue.a)(n);function n(e,i,r,a){var o;Object(W.a)(this,n),(o=t.call(this)).strength=void 0!==i?i:1,o.radius=r,o.threshold=a,o.resolution=void 0!==e?new Me.Vector2(e.x,e.y):new Me.Vector2(256,256),o.clearColor=new Me.Color(0,0,0);var s={minFilter:Me.LinearFilter,magFilter:Me.LinearFilter,format:Me.RGBAFormat};o.renderTargetsHorizontal=[],o.renderTargetsVertical=[],o.nMips=5;var c=Math.round(o.resolution.x/2),u=Math.round(o.resolution.y/2);o.renderTargetBright=new Me.WebGLRenderTarget(c,u,s),o.renderTargetBright.texture.name="UnrealBloomPass.bright",o.renderTargetBright.texture.generateMipmaps=!1;for(var l=0;l<o.nMips;l++){var h=new Me.WebGLRenderTarget(c,u,s);h.texture.name="UnrealBloomPass.h"+l,h.texture.generateMipmaps=!1,o.renderTargetsHorizontal.push(h);var f=new Me.WebGLRenderTarget(c,u,s);f.texture.name="UnrealBloomPass.v"+l,f.texture.generateMipmaps=!1,o.renderTargetsVertical.push(f),c=Math.round(c/2),u=Math.round(u/2)}void 0===Ee.a&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");var d=Ee.a;o.highPassUniforms=Me.UniformsUtils.clone(d.uniforms),o.highPassUniforms.luminosityThreshold.value=a,o.highPassUniforms.smoothWidth.value=.01,o.materialHighPassFilter=new Me.ShaderMaterial({uniforms:o.highPassUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,defines:{}}),o.separableBlurMaterials=[];var p=[3,5,7,9,11];c=Math.round(o.resolution.x/2),u=Math.round(o.resolution.y/2);for(var g=0;g<o.nMips;g++)o.separableBlurMaterials.push(o.getSeperableBlurMaterial(p[g])),o.separableBlurMaterials[g].uniforms.texSize.value=new Me.Vector2(c,u),c=Math.round(c/2),u=Math.round(u/2);o.compositeMaterial=o.getCompositeMaterial(o.nMips),o.compositeMaterial.uniforms.blurTexture1.value=o.renderTargetsVertical[0].texture,o.compositeMaterial.uniforms.blurTexture2.value=o.renderTargetsVertical[1].texture,o.compositeMaterial.uniforms.blurTexture3.value=o.renderTargetsVertical[2].texture,o.compositeMaterial.uniforms.blurTexture4.value=o.renderTargetsVertical[3].texture,o.compositeMaterial.uniforms.blurTexture5.value=o.renderTargetsVertical[4].texture,o.compositeMaterial.uniforms.bloomStrength.value=i,o.compositeMaterial.uniforms.bloomRadius.value=.1,o.compositeMaterial.needsUpdate=!0;o.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],o.bloomTintColors=[new Me.Vector3(1,1,1),new Me.Vector3(1,1,1),new Me.Vector3(1,1,1),new Me.Vector3(1,1,1),new Me.Vector3(1,1,1)],o.compositeMaterial.uniforms.bloomTintColors.value=o.bloomTintColors,void 0===Le.a&&console.error("THREE.UnrealBloomPass relies on CopyShader");var m=Le.a;return o.copyUniforms=Me.UniformsUtils.clone(m.uniforms),o.copyUniforms.opacity.value=1,o.materialCopy=new Me.ShaderMaterial({uniforms:o.copyUniforms,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,blending:Me.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),o.enabled=!0,o.needsSwap=!1,o._oldClearColor=new Me.Color,o.oldClearAlpha=1,o.basic=new Me.MeshBasicMaterial,o.fsQuad=new Be.a(null),o}return Object(G.a)(n,[{key:"dispose",value:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(var t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()}},{key:"setSize",value:function(e,t){var n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(var r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(n,i),this.renderTargetsVertical[r].setSize(n,i),this.separableBlurMaterials[r].uniforms.texSize.value=new Me.Vector2(n,i),n=Math.round(n/2),i=Math.round(i/2)}},{key:"render",value:function(e,t,i,r,a){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),a&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var s=this.renderTargetBright,c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[c].uniforms.direction.value=n.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=n.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),s=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}},{key:"getSeperableBlurMaterial",value:function(e){return new Me.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new Me.Vector2(.5,.5)},direction:{value:new Me.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n        void main() {\n          vec2 invSize = 1.0 / texSize;\n          float fSigma = float(SIGMA);\n          float weightSum = gaussianPdf(0.0, fSigma);\n          float alphaSum = 0.0;\n          vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n          for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n            float x = float(i);\n            float w = gaussianPdf(x, fSigma);\n            vec2 uvOffset = direction * invSize * x;\n            vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n            vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n            diffuseSum += (sample1.rgb + sample2.rgb) * w;\n            alphaSum += (sample1.a + sample2.a) * w;\n            weightSum += 2.0 * w;\n          }\n          gl_FragColor = vec4(diffuseSum/weightSum, alphaSum/weightSum);\n        }"})}},{key:"getCompositeMaterial",value:function(e){return new Me.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform sampler2D dirtTexture;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}]),n}(Be.b);function qe(e){var t=e.children,n=e.bloomRef,r=Object(i.useRef)(),a=Object(c.e)(),o=a.gl,l=a.size,h=a.camera,f=Object(i.useState)(),d=Object(s.a)(f,2),p=d[0],g=d[1];Object(i.useEffect)((function(){r.current.setSize(l.width,l.height)}),[l]),Object(c.c)((function(){p&&r.current&&r.current.render()}),1);var m=0,b=.5,v=.1;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("scene",{ref:g,children:t}),Object(u.jsxs)("effectComposer",{ref:r,args:[o],children:[Object(u.jsx)("renderPass",{attachArray:"passes",scene:p,camera:h}),Object(u.jsx)("unrealBloomPass",{ref:n,attachArray:"passes",args:[void 0,m,b,v]})]})]})}function Je(e){var t=e.children,n=Object(i.useRef)(),r=Object(c.e)(),a=r.gl,o=r.camera;return Object(c.c)((function(){a.autoClear=!1,a.clearDepth(),a.render(n.current,o)}),2),Object(u.jsx)("scene",{ref:n,children:t})}function Ve(){return Object(u.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-20,0],children:[Object(u.jsx)("torusBufferGeometry",{args:[76,1,3,36,Math.PI]}),Object(u.jsx)("meshBasicMaterial",{color:"chartreuse"})]})}_e.BlurDirectionX=new Me.Vector2(1,0),_e.BlurDirectionY=new Me.Vector2(0,1),Object(c.b)({EffectComposer:Ie.a,RenderPass:De.a,UnrealBloomPass:_e});var Ne=n(242),We=n.p+"static/media/djglb.de0b3ccf.glb";function Ge(){var e=Object(i.useRef)(),t=Object(Ne.a)(We).nodes;return Object(u.jsx)("group",{ref:e,scale:[.026,.026,.026],position:[56,-20,5],rotation:[0,2.8,0],dispose:null,children:Object(u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.mesh_0.geometry,material:t.mesh_0.material,position:[-.12,185.8,-29.12],rotation:[-Math.PI/2,0,0]})})}Ne.a.preload(We);var Qe=n(31),Xe=n(9),Ye=n(117),Ke=["depthBuffer","color","distance","angle","attenuation","anglePower"],Ze=new Me.Vector3,$e=i.forwardRef((function(e,t){var n=e.depthBuffer,r=e.color,a=void 0===r?"white":r,o=e.distance,u=void 0===o?5:o,l=e.angle,h=void 0===l?.15:l,f=e.attenuation,d=void 0===f?5:f,p=e.anglePower,g=void 0===p?5:p,m=Object(Qe.a)(e,Ke),b=i.useRef(null),v=Object(c.e)((function(e){return e.size})),x=Object(c.e)((function(e){return e.camera})),j=Object(c.e)((function(e){return e.viewport.dpr})),O=i.useState((function(){return new Ye.a})),y=Object(s.a)(O,1)[0];Object(c.c)((function(){y.uniforms.spotPosition.value.copy(b.current.getWorldPosition(Ze)),b.current.lookAt(b.current.parent.target.position)}));var k=i.useMemo((function(){var e=new Me.CylinderGeometry(.1,50*h,u,128,64,!0);return e.applyMatrix4((new Me.Matrix4).makeTranslation(0,-u/2,0)),e.applyMatrix4((new Me.Matrix4).makeRotationX(-Math.PI/2)),e}),[h,u]);return i.createElement("spotLight",Object(Xe.a)({ref:t,angle:h,color:a,distance:u},m),i.createElement("mesh",{ref:b,geometry:k},i.createElement("primitive",{object:y,attach:"material","uniforms-lightColor-value":a,"uniforms-attenuation-value":d,"uniforms-anglePower-value":g,"uniforms-depth-value":n,"uniforms-cameraNear-value":x.near,"uniforms-cameraFar-value":x.far,"uniforms-resolution-value":n?[v.width*j,v.height*j]:[0,0]})))}));function et(e){var t=e.modelRef,n=e.bloomRef,r=N((function(e){return e.lightsOn})),a=Object(i.useRef)(0),o=Object(i.useState)(360),c=Object(s.a)(o,2),l=c[0],h=c[1];return Object(i.useEffect)((function(){r?(a.current.intensity=5,a.current.angle=.8,n.current.strength=4,h(.8)):(a.current.intensity=0,a.current.angle=360,n.current.strength=0,h(360))}),[r,n]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ambientLight",{intensity:.3}),Object(u.jsx)($e,{ref:a,intensity:0,position:[0,40,0],angle:l,penumbra:1,distance:150,attenuation:75,anglePower:5,target:t.current,color:"white",castShadow:!0})]})}function tt(e){var t=e.mouse,n=Object(c.e)().camera;return Object(c.c)((function(){n.position.x+=.025*(20*t.current[0]-n.position.x),n.position.y+=.025*(20*-t.current[1]-n.position.y),n.lookAt(0,0,0),Fe.mouseManager.setMouse(t.current)})),null}function nt(e){var t=e.mouse,n=Object(i.useRef)(),r=Object(i.useRef)();return Object(u.jsxs)(c.a,{className:"canvas canvasMain",camera:{position:[0,0,100],fov:40,far:1e5},shadows:!0,children:[Object(u.jsxs)(Je,{children:[Object(u.jsx)(ze,{modelRef:r}),Object(u.jsx)(et,{modelRef:r,bloomRef:n}),Object(u.jsx)(l,{}),Object(u.jsx)(Ge,{})]}),Object(u.jsxs)(qe,{bloomRef:n,children:[Object(u.jsx)(d,{}),Object(u.jsx)(Ve,{})]}),Object(u.jsx)(tt,{mouse:t})]})}var it,rt,at,ot,st,ct,ut=n(235),lt=n(13),ht=n(14),ft=Object(ht.b)(it||(it=Object(lt.a)(["\nfrom {\n  transform: rotate3d(.5,.5,.5, 360deg);\n}\nto{\n  transform: rotate3d(0deg);\n}\n"]))),dt=ht.a.div(rt||(rt=Object(lt.a)(["\n  position: fixed;\n  z-index: 999;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: radial-gradient(circle at top, #034412, #000000);\n"]))),pt=ht.a.div(at||(at=Object(lt.a)(["\n  width: 33vh;\n  height: 33vh;\n  border-radius: 50%;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),gt=ht.a.div(ot||(ot=Object(lt.a)(["\n  color: white;\n  font-size: 2rem;\n"]))),mt=Object(ht.a)(pt)(st||(st=Object(lt.a)(["\n  padding: 3px;\n  box-shadow: inset -0 0 75px 0px rgba(83, 198, 251, 0.7);\n  border: 3px solid rgb(83, 198, 251);\n  animation: "," 1.8s linear 0s infinite;\n"])),ft),bt=Object(ht.a)(pt)(ct||(ct=Object(lt.a)(["\n  padding: 3px;\n  box-shadow: inset -0 0 75px 0px rgba(2, 238, 120, 0.7);\n  border: 3px solid rgb(2, 238, 120);\n\n  animation: "," 2.5s linear 0s infinite;\n"])),ft);function vt(){var e=N((function(e){return e.isLoaded})),t=N((function(e){return e.setPreLoaded})),n=Object(ut.a)(),r=n.active,a=n.progress;return Object(i.useEffect)((function(){!1===r&&a>0&&t()}),[a,r,t]),Object(u.jsx)(u.Fragment,{children:!e&&Object(u.jsxs)(dt,{children:[Object(u.jsxs)(gt,{children:[Math.round(a),"%"]}),Object(u.jsx)(mt,{}),Object(u.jsx)(bt,{})]})})}var xt,jt,Ot,yt,kt=n(240),wt=n(120),St=n.n(wt),Mt="#1db954",Tt="#25362c",Ct="#2b6d42",Rt="rgb(218, 218, 218)",Pt="rgb(168, 168, 168)",At="rgb(23, 23, 23)",Ft=ht.a.div(xt||(xt=Object(lt.a)(["\n  height: 50px;\n  width: 50px;\n  position: fixed;\n  top: 10px;\n  right: 10px;\n  color: white;\n  z-index: 7;\n"]))),zt=Object(ht.a)(St.a)(jt||(jt=Object(lt.a)(["\n  color: ",";\n"])),Rt);function It(){var e=N((function(e){return e.mode})),t=N((function(e){return e.logout})),n=N((function(e){return e.setMode})),i=N((function(e){return e.setFile}));return Object(u.jsx)(u.Fragment,{children:null!==e&&Object(u.jsx)(Ft,{children:Object(u.jsx)(kt.a,{color:"success",onClick:function(){t(),n(null),i(null);var e=Fe.positionManager.pos;"left"===e||"transit"===e?Fe.setChain("rightIdleChain"):Fe.setChain("idleChain")},children:Object(u.jsx)(zt,{fontSize:"large"})})})})}function Dt(){var e=Object(i.useState)("..."),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){var e;return function t(){e=setTimeout((function(){r((function(e){return 3===e.length?"":0===e.length?".":1===e.length?"..":2===e.length?"...":void 0})),t()}),500)}(),function(){clearTimeout(e)}}),[]),Object(u.jsx)(u.Fragment,{children:n})}var Ht,Ut,Bt,Lt,Et=ht.a.div(Ot||(Ot=Object(lt.a)(["\n  width: 130px;\n  color: ",";\n  font-weight: 700;\n  height: 45px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n"])),(function(e){return e.error?"rgb(247,49,49)":""})),_t=ht.a.div(yt||(yt=Object(lt.a)(["\n  font-size: 1rem;\n  color: white;\n  padding: 0 25px;\n  text-align: center;\n"]))),qt=ht.a.div(Ht||(Ht=Object(lt.a)(["\n  position: fixed;\n  top: 50px;\n  left: 0;\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  z-index: 4;\n"]))),Jt=ht.a.div(Ut||(Ut=Object(lt.a)(["\n  background-color: ",";\n  width: 200px;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2rem;\n  border-radius: 25px;\n  cursor: pointer;\n  box-shadow: 0 0 6px 0px white;\n  user-select: none;\n  transition: background-position 0.2s ease-in-out;\n  background-image: linear-gradient(to top, white 50%, transparent 50%);\n  background-size: 100% 200%;\n  background-position: top;\n  &:hover {\n    background-position: bottom;\n    color: ",";\n    font-weight: 600;\n  }\n"])),Mt,Mt),Vt=ht.a.div(Bt||(Bt=Object(lt.a)(["\n  font-size: 1.2rem;\n  margin-bottom: 45px;\n"]))),Nt=ht.a.input(Lt||(Lt=Object(lt.a)(["\n  position: fixed;\n  left: 9999px;\n"])));function Wt(){var e=N((function(e){return e.loggedIn})),t=N((function(e){return e.accessRequired})),n=N((function(e){return e.login})),r=N((function(e){return e.logout})),a=N((function(e){return e.setMode})),o=function(){var e=N((function(e){return e.login})),t=N((function(e){return e.setMode})),n=Object(i.useState)(!1),r=Object(s.a)(n,2),a=r[0],o=r[1],c=Object(i.useState)(!1),u=Object(s.a)(c,2),l=u[0],h=u[1],f=function(){var n=Object(j.a)(x.a.mark((function n(){var i,r;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o(!0),h(!1),n.next=4,I.loginRedirect();case 4:i=n.sent,r=function(){var n=Object(j.a)(x.a.mark((function n(i){var r;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I.requestTokens(i);case 2:if(r=n.sent,o(!1),!r){n.next=9;break}return n.next=7,I.login();case 7:n.sent&&(e(),t("spotify"));case 9:h(!0);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),window.spotifyCallback=function(e){i.close(),r(e)};case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return[f,a,l]}(),c=Object(s.a)(o,3),l=c[0],h=c[1],f=c[2];return Object(i.useEffect)((function(){Object(j.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.checkAuthentication();case 2:e.sent?(n(),a("spotify")):r();case 4:case"end":return e.stop()}}),e)})))()}),[n,r,a]),Object(u.jsx)(u.Fragment,{children:!1===e&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Jt,{onClick:l,children:"Login"}),Object(u.jsx)(Et,{error:f,children:h?Object(u.jsxs)(u.Fragment,{children:["Authenticating ",Object(u.jsx)(Dt,{})]}):f&&Object(u.jsx)(u.Fragment,{children:"Error Logging In"})}),t&&Object(u.jsx)(_t,{children:"Sorry, your account needs to be manually authorised. Please get in touch."})]})})}function Gt(){var e=N((function(e){return e.setFile})),t=N((function(e){return e.setMode})),n=Object(i.useRef)();return Object(u.jsxs)(Jt,{onClick:function(){n.current.click()},children:["Select Song",Object(u.jsx)(Nt,{ref:n,type:"file",name:"file",accept:"audio/*",onChange:function(n){if(n.target.files[0]){var i=URL.createObjectURL(n.target.files[0]);e(i),t("file")}}})]})}function Qt(){var e=N((function(e){return e.mode}));return Object(u.jsx)(u.Fragment,{children:null===e&&Object(u.jsxs)(qt,{children:[Object(u.jsx)(Wt,{}),Object(u.jsx)(Vt,{children:"Or"}),Object(u.jsx)(Gt,{})]})})}function Xt(e){var t=e.analyzer,n=Object(i.useRef)(),r=Object(i.useMemo)((function(){return{resolution:{value:175},data:{value:Array(20).fill(0)},time:{value:0}}}),[]),a=Object(i.useRef)();return Object(c.c)((function(e){if(t.current){a.current=t.current.getFrequencyData();for(var i=[],r=9,o=10,s=0;s<20;s++){var c=void 0;s%2===0?(c=r,r--):(c=o,o++),i[c]=a.current[4*s]/255}n.current.uniforms.data.value=i,n.current.uniforms.time.value=e.clock.elapsedTime}})),Object(u.jsxs)("mesh",{position:[0,11,-100],children:[Object(u.jsx)("planeBufferGeometry",{args:[340,130]}),Object(u.jsx)("shaderMaterial",{ref:n,uniforms:r,vertexShader:"\nvarying vec2 vPosition;\nvoid main() {\n  vPosition = position.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n\nvarying vec2 vPosition;\n\nconst int dots = 20; \nconst float radius = .2; \nconst float brightness = 0.03;\n\nuniform float resolution;\nuniform float data[ 20 ];\nuniform float time;\n\n\n//convert HSV to RGB\nvec3 hsv2rgb(vec3 c){\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\t\t\nvoid main() {\n\t\n\tvec2 p=vPosition.xy / resolution;\n  p.x += 0.5;\n  p.y += 0.5;\n  vec3 c=vec3(0,0,0); //background color\n\t\t\n    for(int i=0;i<dots; i++){\n   \n      float vol =  data[i];\n      float b = vol * vol * brightness;\n     \n      float x = float(i)/float(dots);\n      float y = 0.9;\n      vec2 o = vec2(x,y);\n       \n      vec3 dotCol = hsv2rgb(vec3((float(i) + time)/float(dots),1.,1.0));\n       \n      float dist1 = clamp(length(p-o),0.05,1.);\n      c += b/dist1*dotCol;\n    }\n  gl_FragColor = vec4(c,1); \n}\n\n"})]})}var Yt=new Me.AudioLoader,Kt=new Me.AudioListener,Zt=new Me.Audio(Kt);function $t(){var e=N((function(e){return e.file})),t=Object(i.useRef)(),n=Object(i.useRef)(),r=Object(c.e)().camera;return Object(i.useEffect)((function(){return r.add(Kt),t.current=Zt,n.current=new Me.AudioAnalyser(t.current,256),function(){t.current.stop()}}),[r]),Object(i.useEffect)((function(){e&&Yt.load(e,(function(e){t.current.setBuffer(e),t.current.setLoop(!0),t.current.setVolume(1),t.current.play()}))}),[e]),Object(u.jsx)(Xt,{analyzer:n})}var en,tn,nn,rn,an,on=n(239),sn=n.p+"static/media/danceIcon.ca173d16.png",cn=ht.a.div(en||(en=Object(lt.a)(["\n  cursor: pointer;\n  font-size: 1.2rem;\n  font-weight: 600;\n  margin: 4px 0;\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.selected?Mt:Rt}),(function(e){return e.selected?Mt:"white"})),un=(ht.a.div(tn||(tn=Object(lt.a)(["\n  height: 50px;\n  width: 50px;\n  position: fixed;\n  top: 10px;\n  right: 10px;\n  color: white;\n  z-index: 7;\n"]))),{1:"Slow",2:"Med",3:"Fast"});function ln(e){var t=e.mood,n=e.selected,i=N((function(e){return e.setMood}));return Object(u.jsx)(cn,{selected:n,onClick:function(){i(t)},children:un[t]})}var hn,fn=ht.a.div(nn||(nn=Object(lt.a)(["\n  position: fixed;\n  top: 18px;\n  left: 18px;\n  z-index: 10;\n  max-height: ","px;\n  overflow: hidden;\n"])),(function(e){return e.open?166:30})),dn=ht.a.div(rn||(rn=Object(lt.a)(["\n  display: flex;\n  flex-direction: column;\n  opacity: ",";\n  transition: opacity 1s;\n"])),(function(e){return e.open?1:0})),pn=ht.a.img(an||(an=Object(lt.a)(["\n  height: 30px;\n  width: 30px;\n  cursor: pointer;\n"]))),gn=[1,2,3];function mn(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],a=N((function(e){return e.mood})),o=Object(i.useCallback)((function(){r(!0)}),[]),c=Object(i.useCallback)((function(){r(!1)}),[]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(fn,{open:n,onPointerEnter:o,onPointerLeave:c,children:[Object(u.jsx)(on.a,{title:"Tempo",placement:"right",children:Object(u.jsx)(pn,{src:sn})}),Object(u.jsx)(dn,{open:n,children:gn.map((function(e){return Object(u.jsx)(ln,{mood:e,selected:e===a},e)}))})]})})}function bn(){var e=N((function(e){return e.mode}));return Object(u.jsx)(u.Fragment,{children:"file"===e&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(mn,{}),Object(u.jsx)(c.a,{className:"canvas",camera:{position:[0,0,100],fov:40,far:1e5},children:Object(u.jsx)($t,{})},"audioPlayer")]})})}var vn,xn,jn,On,yn,kn=ht.a.div(hn||(hn=Object(lt.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  height: 75px;\n  box-shadow: 0 0 15px 0 ",";\n  z-index: 6;\n  position: fixed;\n  left: 0;\n  top: ",";\n  transition: top 1s ease-in-out;\n"])),At,Mt,(function(e){return e.open?0:"-80px"})),wn=n(122),Sn=n(123),Mn=n.n(Sn),Tn=n(124),Cn=n.n(Tn),Rn=ht.a.div(vn||(vn=Object(lt.a)(["\n  width: 650px;\n  height: 50px;\n  max-width: calc(100vw - 95px);\n  position: relative;\n"]))),Pn=ht.a.input(xn||(xn=Object(lt.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  border-radius: 25px;\n  border: none;\n  outline: none;\n  padding: 10px 10px 5px 70px;\n  background-color: transparent;\n  color: ",";\n  box-shadow: inset 8px 8px 8px ",",\n    inset -8px -8px 8px ",";\n  font-weight: 700;\n  font-size: 1rem;\n  ::placeholder {\n    color: ",";\n  }\n"])),Pt,Tt,Ct,Pt),An=Object(ht.a)(Mn.a)(jn||(jn=Object(lt.a)(["\n  color: ",";\n  position: absolute;\n  left: 10px;\n  top: 10px;\n"])),Pt),Fn=Object(ht.a)(Cn.a)(On||(On=Object(lt.a)(["\n  color: ",";\n  position: absolute;\n  right: 15px;\n  top: 10px;\n  cursor: pointer;\n"])),Pt);function zn(){var e=N((function(e){return e.clearSearchText})),t=N((function(e){return e.onCloseSearch})),n=N((function(e){return e.sendSearchRequest})),r=Object(i.useState)(""),a=Object(s.a)(r,2),o=a[0],c=a[1];Object(i.useEffect)((function(){c("")}),[e]);var l=Object(i.useMemo)((function(){return Object(wn.debounce)(function(){var e=Object(j.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:n(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),300)}),[n]);Object(i.useEffect)((function(){return function(){l.cancel()}}),[l]);var h=Object(i.useCallback)((function(e){l(e.target.value),c(e.target.value),e.target.value||t()}),[l,t]);return Object(u.jsxs)(Rn,{children:[Object(u.jsx)(An,{fontSize:"large"}),Object(u.jsx)(Pn,{type:"text",id:"search",placeholder:"Search for songs...",value:o,onChange:h,autoComplete:"off"}),o&&Object(u.jsx)(Fn,{onClick:t,fontSize:"large"})]})}var In=ht.a.img(yn||(yn=Object(lt.a)(["\n  position: absolute;\n  top: 5px;\n  left: 25px;\n  width: 200px;\n  cursor: pointer;\n  z-index: 2;\n"]))),Dn=n.p+"static/media/spotifyLogo.0c4ae91b.png";function Hn(){return Object(u.jsx)(In,{onClick:function(){var e=window.open("https://open.spotify.com/","_blank","noopener,noreferrer");e&&(e.opener=null)},src:Dn,alt:"spotify-logo"})}function Un(){var e=N((function(e){return e.interfaceOpen}));return Object(u.jsxs)(kn,{open:e,children:[Object(u.jsx)(Hn,{}),Object(u.jsx)(zn,{})]})}var Bn,Ln,En,_n,qn,Jn,Vn,Nn,Wn,Gn,Qn=n(55),Xn=n(75),Yn=ht.a.div(Bn||(Bn=Object(lt.a)(["\n  box-sizing: border-box;\n  min-height: 65px;\n  width: 100%;\n  background-color: rgba(60, 70, 60, 1);\n  margin-bottom: 2px;\n  border-radius: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  position: absolute;\n  overflow: hidden;\n  padding-left: 100px;\n  padding-right: 35px;\n  top: ","px;\n\n  &:hover {\n    background-color: rgb(50, 60, 50);\n    box-shadow: 0 0 4px 0px chartreuse;\n  }\n"])),(function(e){return e.top})),Kn=ht.a.img(Ln||(Ln=Object(lt.a)(["\n  height: 65px;\n  width: 65px;\n  position: absolute;\n  left: 0;\n"]))),Zn=ht.a.div(En||(En=Object(lt.a)(["\n  display: flex;\n  flex-direction: column;\n  width: calc(100% - 50px);\n"]))),$n=ht.a.div(_n||(_n=Object(lt.a)(["\n  font-size: 1.1rem;\n  color: ",";\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"])),Rt),ei=ht.a.div(qn||(qn=Object(lt.a)(["\n  font-size: 0.8rem;\n  color: ",";\n  margin-top: 6px;\n"])),Pt),ti=ht.a.div(Jn||(Jn=Object(lt.a)(["\n  font-size: 1rem;\n  color: ",";\n"])),Rt);function ni(e){var t=e.track,n=e.selectSong,i=e.top;return Object(u.jsxs)(Yn,{onClick:function(){n(t.id)},top:i,children:[Object(u.jsx)(Kn,{src:t.albumUrl,alt:t.title}),Object(u.jsxs)(Zn,{children:[Object(u.jsx)($n,{children:t.title}),Object(u.jsx)(ei,{children:t.artist})]}),Object(u.jsx)(ti,{children:t.duration})]})}var ii=ht.a.div(Vn||(Vn=Object(lt.a)(["\n  box-sizing: border-box;\n  z-index: 4;\n  position: absolute;\n  height: ","px;\n  width: calc(100vw - 750px);\n  overflow: auto;\n  padding: 25px;\n  overflow: auto;\n  color: white;\n  font-size: 1.5rem;\n  display: flex;\n  justify-content: center;\n"])),(function(e){return e.height})),ri=Object(ht.a)(ii)(Nn||(Nn=Object(lt.a)(["\n  transition: top 500ms ease-in-out;\n  top: ",";\n  left: 350px;\n"])),(function(e){return e.open?"75px":"-100%"})),ai=Object(ht.a)(ii)(Wn||(Wn=Object(lt.a)(["\n  transition: left 500ms ease-in-out;\n  top: 75px;\n  left: ",";\n"])),(function(e){return e.open?"350px":"-100%"})),oi=ht.a.div(Gn||(Gn=Object(lt.a)(["\n  position: relative;\n"]))),si=function(){var e=Object(i.useState)(0),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){var e=function(){r(window.innerHeight-150)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n};function ci(e){return Object(u.jsx)(oi,Object(p.a)({},e))}var ui=Object(i.forwardRef)((function(e,t){var n=e.children,i=e.style,r=e.onScroll,a=N((function(e){return e.playlistTracksOpen}));return Object(u.jsx)(ai,{onScroll:r,open:a,height:i.height,children:n.props.children.length?n:Object(u.jsx)(u.Fragment,{children:"No Songs Found"})})})),li=r.a.memo((function(e){var t=N((function(e){return e.setPlaylistSong})),n=e.data,i=e.index,r=e.style,a=n.items[i];if(!a)return null;var o=a.id;return Object(u.jsx)(ni,{track:a,top:r.top,selectSong:t},o)}),Qn.b);function hi(){var e=N((function(e){return e.playlistTracks})),t=N((function(e){return!e.playlistRequestsFinised})),n=N((function(e){return e.playlistRequestsLoadNextPage})),r=Object(i.useCallback)((function(n){return!t||n<e.length}),[t,e]),a=Object(i.useMemo)((function(){return t?e.length+1:e.length}),[t,e]),o=si();return Object(u.jsx)(Xn.a,{isItemLoaded:r,itemCount:a,loadMoreItems:n,threshold:5,children:function(t){var n=t.onItemsRendered,i=t.ref;return Object(u.jsx)(Qn.a,{ref:i,height:o,itemCount:a,itemSize:67,onItemsRendered:n,outerElementType:ui,innerElementType:ci,itemData:{items:e},children:li})}})}var fi,di=Object(i.forwardRef)((function(e,t){var n=e.children,i=e.style,r=e.onScroll,a=N((function(e){return e.searchTracksOpen}));return Object(u.jsx)(ri,{onScroll:r,open:a,height:i.height,children:n.props.children.length?n:Object(u.jsx)(u.Fragment,{children:"No Results Found"})})})),pi=r.a.memo((function(e){var t=N((function(e){return e.setSearchSong})),n=e.data,i=e.index,r=e.style,a=n.items[i];if(!a)return null;var o=a.id;return Object(u.jsx)(ni,{track:a,top:r.top,selectSong:t},o)}),Qn.b);function gi(){var e=N((function(e){return e.searchTracks})),t=N((function(e){return!e.searchFinised})),n=N((function(e){return e.searchLoadNextPage})),r=Object(i.useCallback)((function(n){return!t||n<e.length}),[t,e]),a=Object(i.useMemo)((function(){return t?e.length+1:e.length}),[t,e]),o=si();return Object(u.jsx)(Xn.a,{isItemLoaded:r,itemCount:a,loadMoreItems:n,threshold:5,children:function(t){var n=t.onItemsRendered,i=t.ref;return Object(u.jsx)(Qn.a,{ref:i,height:o,itemCount:a,itemSize:67,onItemsRendered:n,outerElementType:di,innerElementType:ci,itemData:{items:e},children:pi})}})}var mi,bi=ht.a.div(fi||(fi=Object(lt.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  color: ",";\n  font-weight: ",";\n  cursor: pointer;\n  padding: 3px 25px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  background-color: ",";\n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"])),(function(e){return e.selected?Rt:Pt}),(function(e){return e.selected?600:""}),(function(e){return e.selected?Mt:""}),Rt,(function(e){return e.selected?Mt:"rgb(60, 70, 60)"}));function vi(e){var t=e.playlist,n=e.selected,i=N((function(e){return e.onSelectPlayList}));return Object(u.jsx)(bi,{selected:n,onClick:function(){i(t.id)},children:t.name})}var xi=ht.a.div(mi||(mi=Object(lt.a)(["\n  box-sizing: border-box;\n  width: 350px;\n  height: calc(100vh - 157px);\n  background-color: ",";\n  position: absolute;\n  top: 75px;\n  z-index: 5;\n  box-shadow: 7.5px 0 8px -10px ",";\n  padding: 10px 0;\n  overflow: auto;\n  left: ",";\n  transition: left 1s ease-in-out;\n"])),At,Mt,(function(e){return e.open?0:"-360px"})),ji={name:"Liked Songs",id:"liked"};function Oi(){var e=N((function(e){return e.interfaceOpen})),t=N((function(e){return e.loggedIn})),n=N((function(e){return e.selectedPlaylist})),r=Object(i.useState)([]),a=Object(s.a)(r,2),o=a[0],c=a[1];return Object(i.useEffect)((function(){t&&Object(j.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getPlaylists();case 2:t=e.sent,c([ji].concat(Object(b.a)(t)));case 4:case"end":return e.stop()}}),e)})))()}),[t]),Object(u.jsx)(xi,{open:e,children:o.map((function(e){return Object(u.jsx)(vi,{playlist:e,selected:n===e.id},e.id)}))})}var yi,ki,wi,Si=n(134),Mi=ht.a.div(yi||(yi=Object(lt.a)(["\n  position: fixed;\n  width: 100%;\n  z-index: 6;\n  box-shadow: 0 0 15px 0 ",";\n  bottom: ",";\n  transition: bottom 1s ease-in-out;\n"])),Mt,(function(e){return e.open?0:"-85px"})),Ti={bgColor:At,height:"75px",color:Rt,sliderTrackColor:Pt,sliderColor:Mt,sliderHandleColor:Rt,trackNameColor:Rt,trackArtistColor:Pt};function Ci(){var e=N((function(e){return e.interfaceOpen})),t=N((function(e){return e.loggedIn})),n=N((function(e){return e.songs})),r=N((function(e){return e.setIsPlaying})),a=N((function(e){return e.setMood})),o=Object(i.useRef)(),c=Object(i.useState)(!1),l=Object(s.a)(c,2),h=l[0],f=l[1],d=Object(i.useCallback)((function(e){if(o.current!==e.track.id){if(o.current=e.track.id,!e.track.id)return;var t=e.track.name.toLowerCase();t.includes("gangnam")?a(4):t.includes("thriller")?a("thriller"):I.getAudioFeaturesForTrack(e.track.id).then((function(e){var t=e.body,n=t.danceability,i=t.energy;a(n>.7||i>.7?3:n<.3||i<.3?1:2)}),(function(e){console.log(e)}))}}),[a]),p=Object(i.useCallback)((function(e){r(e.isPlaying),e.isPlaying||f(!1),d(e)}),[r,d]);return Object(i.useEffect)((function(){n.length&&f(!0)}),[n]),Object(u.jsx)(u.Fragment,{children:t&&Object(u.jsx)(Mi,{open:e,children:Object(u.jsx)(Si.a,{token:I.getAccessToken(),play:h,callback:p,showSaveIcon:!0,syncExternalDevice:!0,uris:n.length?n:null,styles:Ti})})})}function Ri(){var e=N((function(e){return e.mode}));return Object(u.jsx)(u.Fragment,{children:"spotify"===e&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Ci,{}),Object(u.jsx)(Un,{}),Object(u.jsx)(Oi,{}),Object(u.jsx)(hi,{}),Object(u.jsx)(gi,{})]})})}var Pi=ht.a.div(ki||(ki=Object(lt.a)(["\n  position: absolute;\n  width: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  color: rgb(0, 37, 46);\n  z-index: 0;\n  background-color: black;\n"]))),Ai=ht.a.div(wi||(wi=Object(lt.a)(["\n  height: 100vh;\n  width: 100vw;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background: radial-gradient(circle at top, #034412, #000000);\n  opacity: ",";\n  transition: opacity 2s ease-in-out;\n  z-index: 1;\n"])),(function(e){return e.show?1:0}));function Fi(){var e=N((function(e){return e.mode})),t=function(){var e=N((function(e){return e.mode})),t=Object(i.useRef)([0,0]),n=Object(i.useCallback)((function(n){e&&(t.current=[n.clientX/window.innerWidth-.5,n.clientY/window.innerHeight-.5])}),[e]);return[t,n]}(),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(u.jsxs)(Pi,{onPointerMove:a,children:[Object(u.jsx)(Ai,{show:"file"!==e}),Object(u.jsx)(Qt,{}),Object(u.jsx)(It,{}),Object(u.jsx)(Ri,{}),Object(u.jsx)(vt,{}),Object(u.jsxs)(i.Suspense,{fallback:null,children:[Object(u.jsx)(bn,{}),Object(u.jsx)(nt,{mouse:r})]})]})}function zi(e){var t=e.children,n=Object(i.useState)(!1),r=Object(s.a)(n,2),a=r[0],o=r[1];return Object(i.useEffect)((function(){var e=new URLSearchParams(window.location.search),t=e.get("code"),n=e.get("state"),i=e.get("error");i||t&&n?window.opener.spotifyCallback({code:t,state:n,error:i}):o(!0)}),[]),Object(u.jsx)(u.Fragment,{children:a&&t})}var Ii,Di=n(133),Hi=ht.a.div(Ii||(Ii=Object(lt.a)(["\n  box-sizing: border-box;\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n  background: radial-gradient(circle at top, #034412, #000000);\n  color: white;\n  text-align: center;\n  padding: 30px;\n"])));function Ui(){return Object(u.jsx)(Hi,{children:"Sorry this app is not suitable for mobile devices \ud83d\ude1e"})}function Bi(e){var t=e.children;return Object(u.jsx)(u.Fragment,{children:Di.isBrowser?t:Object(u.jsx)(Ui,{})})}o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Bi,{children:Object(u.jsx)(zi,{children:Object(u.jsx)(Fi,{})})})}),document.getElementById("root"))}},[[214,1,2]]]);
//# sourceMappingURL=main.ecf637bd.chunk.js.map